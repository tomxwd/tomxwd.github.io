<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-128x128.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-32x32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-16x16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="alternate" href="/atom.xml" title="tomxwd.blog" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="tomxwd">
<meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="tomxwd.blog">
<meta property="og:url" content="http:&#x2F;&#x2F;www.blog.tomxwd.com&#x2F;page&#x2F;2&#x2F;index.html">
<meta property="og:site_name" content="tomxwd.blog">
<meta property="og:description" content="tomxwd">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.blog.tomxwd.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>tomxwd.blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">tomxwd.blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/tomxwd" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/07/Nginx/06_Nginx_%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/07/Nginx/06_Nginx_%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/" class="post-title-link" itemprop="url">06_Nginx_配置实例-负载均衡</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-01-07 22:20:47 / 修改时间：22:57:39" itemprop="dateCreated datePublished" datetime="2020-01-07T22:20:47+08:00">2020-01-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="06-Nginx-配置实例-负载均衡"><a href="#06-Nginx-配置实例-负载均衡" class="headerlink" title="06_Nginx_配置实例-负载均衡"></a>06_Nginx_配置实例-负载均衡</h1><ol>
<li><p>实现效果</p>
<ul>
<li>访问<a href="http://www.123.com/edu/a.html，达到负载均衡的效果，也就是把请求平均分发到8081以及8082中；" target="_blank" rel="noopener">http://www.123.com/edu/a.html，达到负载均衡的效果，也就是把请求平均分发到8081以及8082中；</a></li>
</ul>
</li>
<li><p>准备工作</p>
<p>两台tomcat服务器，一台8080，一台8081</p>
<p>在两台tomcat的webapps中，都创建edu文件夹，以及a.html，内容分别为<code>&lt;h1&gt;8080!!!&lt;/h1&gt;</code>以及<code>&lt;h1&gt;8081&lt;/h1&gt;</code></p>
</li>
<li><p>配置nginx.conf</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">http&#123;</span><br><span class="line">......</span><br><span class="line">	upstream myserver&#123;</span><br><span class="line">		server 192.168.2.128:8080;</span><br><span class="line">		server 192.168.2.128:8081;</span><br><span class="line">	&#125;</span><br><span class="line">......</span><br><span class="line">	server&#123;</span><br><span class="line">		location / &#123;</span><br><span class="line">			......</span><br><span class="line">			proxy_pass http://myserver;</span><br><span class="line">		&#125;</span><br><span class="line">		......</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试</p>
<p>访问<a href="http://www.123.com/edu/a.html，刷新几次，查看页面变化" target="_blank" rel="noopener">http://www.123.com/edu/a.html，刷新几次，查看页面变化</a></p>
<p>可以看到8080和8081交替被访问的效果</p>
</li>
</ol>
<h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><p>随着互联网信息的爆炸性增长，负载均衡（load balance）已经不再是一个很陌生的话题，顾名思义，负载均衡即是将负载分摊到不同的服务单元，既保证服务的可用性，又保证响应足够快，给用户很好的体验。快速增长的访问量和数据流量催生了各式各样的负载均衡产品，很多专业的负载均衡硬件提供了很好的功能，但是价格不菲，这使得负载均衡软件大受欢迎，Nginx就是其中一个。在Linux中有Nginx、LVS、Haproxy等等服务可以提供负载均衡服务，而Nginx提供了以下几种分配方式（策略）：</p>
<ol>
<li><p>轮询（默认）</p>
<p>每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。</p>
</li>
<li><p>weight（权重）</p>
<p><strong>在upstream块中的server ip:prot 后面添加weight=xxx；</strong></p>
<p>weight代表权重，默认是1，权重越高分配到的客户端越多；</p>
<p>指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况，例如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream myserver&#123;</span><br><span class="line">	server 192.168.2.128:8080 weight=10;</span><br><span class="line">	server 192.168.2.128:8081 weight=10;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ip_hash</p>
<p><strong>在upstream块中添加ip_hash；</strong></p>
<p>每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，<strong>可以解决session问题</strong>，例如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">upstream myserver&#123;</span><br><span class="line">	ip_hash;</span><br><span class="line">	server 192.168.2.128:8080;</span><br><span class="line">	server 192.168.2.128:8081;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>fair（第三方）</p>
<p>按后端服务器的<strong>响应时间来分配请求</strong>，响应时间短的优先分配。例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">upstream myserver&#123;</span><br><span class="line">	fair;</span><br><span class="line">	server 192.168.2.128:8080;</span><br><span class="line">	server 192.168.2.128:8081;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/07/Nginx/05_Nginx_location%E6%8C%87%E4%BB%A4%E8%AF%B4%E6%98%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/07/Nginx/05_Nginx_location%E6%8C%87%E4%BB%A4%E8%AF%B4%E6%98%8E/" class="post-title-link" itemprop="url">05_Nginx_location指令说明</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-01-07 22:14:12 / 修改时间：22:19:03" itemprop="dateCreated datePublished" datetime="2020-01-07T22:14:12+08:00">2020-01-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="05-Nginx-location指令说明"><a href="#05-Nginx-location指令说明" class="headerlink" title="05_Nginx_location指令说明"></a>05_Nginx_location指令说明</h1><h2 id="location指令说明"><a href="#location指令说明" class="headerlink" title="location指令说明"></a>location指令说明</h2><p>该指令用于匹配URL</p>
<p><strong>语法：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location [ = | ~ | ~* | ^~] uri &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p>=</p>
<p>用于不含正则表达式的uri前，要求请求字符串与uri严格匹配，如果匹配成功，就停止继续向下搜索并立即处理该请求；</p>
</li>
<li><p>~</p>
<p>用于表示uri包含正则表达式，并且区分大小写</p>
</li>
<li><p>~*</p>
<p>用于表示uri包含正则表达式，并且不区分大小写</p>
</li>
<li><p>^~</p>
<p>用于不含正则表达式的uri前，要求Nginx服务器找到标识uri和请求字符串匹配度最高的location之后，立即使用此location处理请求，而不再使用location块中的正则uri和请求字符串做匹配；</p>
</li>
</ol>
<p><strong>注意：</strong>如果uri包含正则表达式，则必须要有<del>或者</del>*标识；</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/06/Nginx/04_Nginx_%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/06/Nginx/04_Nginx_%E9%85%8D%E7%BD%AE%E5%AE%9E%E4%BE%8B-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/" class="post-title-link" itemprop="url">04_Nginx_配置实例-反向代理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-06 22:41:11" itemprop="dateCreated datePublished" datetime="2020-01-06T22:41:11+08:00">2020-01-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-07 22:12:43" itemprop="dateModified" datetime="2020-01-07T22:12:43+08:00">2020-01-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="04-Nginx-配置实例-反向代理"><a href="#04-Nginx-配置实例-反向代理" class="headerlink" title="04_Nginx_配置实例-反向代理"></a>04_Nginx_配置实例-反向代理</h1><h2 id="反向代理实例1"><a href="#反向代理实例1" class="headerlink" title="反向代理实例1"></a>反向代理实例1</h2><ol>
<li><p>实现效果</p>
<ul>
<li>打开浏览器，在浏览器地址栏中输入地址<a href="http://www.123.com，跳转到linux系统tomcat主页面中" target="_blank" rel="noopener">www.123.com，跳转到linux系统tomcat主页面中</a></li>
</ul>
</li>
<li><p>准备工作</p>
<ul>
<li><p>安装jdk</p>
<p>解压tar包</p>
<p>etc/profile配置文件追加</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> java 环境配置</span></span><br><span class="line">export JAVA_HOME=/opt/open/environment/jdk/jdk1.8.0_221</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure>

<p>source /etc/profile让配置生效</p>
</li>
<li><p>安装tomcat</p>
<p>解压tar包</p>
<p>运行tomcat：到tomcat/bin目录下./startup.sh即可</p>
<p>对外开放访问端口：<code>firewall-cmd --add-port=8080/tcp --permanent</code></p>
<p>重启防火墙：<code>firewall-cmd --reload</code></p>
<p>查看已经开放的端口号：<code>firewall-cmd --list-all</code></p>
<p>在windows端直接访问ip:8080看看能不能访问到tomcat</p>
</li>
<li><p>修改windows端对虚拟机的host</p>
<p>C:\Windows\System32\drivers\etc目录下的hosts文件追加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.2.128	www.123.com</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>访问过程分析</p>
<p>通过访问123.com，直接访问到tomcat里面， 注意这里Nginx开放的是80端口，而tomcat开放的是8080端口，所以我们要做的是屏蔽掉tomcat对外暴露的端口，仅通过Nginx的80端口访问Tomcat；</p>
</li>
<li><p>修改Nginx配置文件nginx.conf</p>
<ul>
<li>修改默认的server块中，server_name由localhost改为虚拟机ip</li>
<li>server块中，location加到root下面，添加<code>proxy_pass http://127.0.0.1:8080;</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  192.168.2.128;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            proxy_pass   http://127.0.0.1:8080;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动Nginx</p>
</li>
<li><p>访问<a href="http://www.123.com应该要跳转到tomcat页面，同时，8080端口其实可以不对外开放" target="_blank" rel="noopener">www.123.com应该要跳转到tomcat页面，同时，8080端口其实可以不对外开放</a></p>
</li>
</ol>
<h2 id="反向代理实例2"><a href="#反向代理实例2" class="headerlink" title="反向代理实例2"></a>反向代理实例2</h2><ol>
<li><p>实现效果：</p>
<p>使用nginx反向代理，根据访问的路径跳转到不同的端口服务中</p>
<p>nginx监听9001端口</p>
<p>访问<a href="http://www.123.com:9001/edu/" target="_blank" rel="noopener">http://www.123.com:9001/edu/</a> 直接跳转到127.0.0.1:8080</p>
<p>访问<a href="http://www.123.com:9001/vod/" target="_blank" rel="noopener">http://www.123.com:9001/vod/</a> 直接跳转到127.0.0.1:8081</p>
</li>
<li><p>准备工作</p>
<ul>
<li><p>准备两个tomcat服务器，一个8080，一个8081</p>
</li>
<li><p>8081tomcat需要配置端口号，在/conf/server.xml中配置</p>
<p><code>&lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</code></p>
<p>改为：</p>
<p><code>&lt;Server port=&quot;8015&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</code>，</p>
<p>再把</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port="8080" protocol="HTTP/1.1"</span><br><span class="line">           connectionTimeout="20000"</span><br><span class="line">           redirectPort="8443" /&gt;</span><br></pre></td></tr></table></figure>
<p>改为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port="8081" protocol="HTTP/1.1"</span><br><span class="line">           connectionTimeout="20000"</span><br><span class="line">           redirectPort="8443" /&gt;</span><br></pre></td></tr></table></figure>

<p>再把</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /&gt;</span><br></pre></td></tr></table></figure>

<p>改为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port="8019" protocol="AJP/1.3" redirectPort="8443" /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建文件夹和测试的页面</p>
<p>在8080端口的tomcat中的webapps下创建edu文件夹，编写a.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">    8080!!!!!!!!!</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在8081端口的tomcat中的webapps下创建vod文件夹，编写a.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">    8081!!!!!!!!!</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果没有开放9001端口：</p>
<p><code>firewall-cmd --add-port=9001/tcp --permanent</code></p>
<p><code>firewall-cmd --reload</code></p>
</li>
</ul>
</li>
<li><p>Nginx具体配置</p>
<p>添加一段server配置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">	listen  9001;</span><br><span class="line">	server_name 192.168.2.128;</span><br><span class="line"></span><br><span class="line">	location ~ /edu/ &#123;</span><br><span class="line">	proxy_pass http://localhost:8080;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	location ~ /vod/ &#123;</span><br><span class="line">	proxy_pass http://localhost:8081;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试：</p>
<ul>
<li>访问<a href="http://www.123.com:9001/edu/a.html" target="_blank" rel="noopener">http://www.123.com:9001/edu/a.html</a></li>
<li>访问<a href="http://www.123.com:9001/vod/a.html" target="_blank" rel="noopener">http://www.123.com:9001/vod/a.html</a></li>
<li>查看结果</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/05/Nginx/03_Nginx_%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/05/Nginx/03_Nginx_%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url">03_Nginx_配置文件</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-05 22:46:42" itemprop="dateCreated datePublished" datetime="2020-01-05T22:46:42+08:00">2020-01-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-06 22:40:34" itemprop="dateModified" datetime="2020-01-06T22:40:34+08:00">2020-01-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="03-Nginx-配置文件"><a href="#03-Nginx-配置文件" class="headerlink" title="03_Nginx_配置文件"></a>03_Nginx_配置文件</h1><p><strong>Nginx配置文件位置：</strong>/usr/local/nginx/conf文件夹下的nginx.conf，修改前最好备份一份；或者在/etc目录下</p>
<h2 id="Nginx配置文件组成"><a href="#Nginx配置文件组成" class="headerlink" title="Nginx配置文件组成"></a>Nginx配置文件组成</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">user  nobody;</span></span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">    #                  '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">    #                  '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache's document root</span><br><span class="line">        # concurs with nginx's one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol>
<li><p>Nginx配置文件由三个部分组成</p>
<ul>
<li><p><strong>第一部分：全局块</strong></p>
<p>从配置文件到events块之间的内容，主要会设置一些影响nginx服务器整体运行的配置指令，主要包括配置运行Nginx服务器的用户（组）、允许生成的worker process数，进程PID存放路径、日志存放路径和类型，以及配置文件的引入等。</p>
<p>比如第一行的配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_processes 1;</span><br></pre></td></tr></table></figure>

<p>这是Nginx服务器并发处理服务的关键配置，worker_processes值越大，可以支持的并发处理量也越多，但是会受到硬件、软件等设备的制约；</p>
</li>
<li><p><strong>第二部分：events块</strong></p>
<p>比如上面的配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>events块设计的指令主要影响<strong>Nginx服务器与用户的网络连接</strong>，常用的设置包括是否开启对多work process下的网络连接进行序列化，是否允许同时接收多个网络连接，选取哪种事件驱动模型来处理连接请求，每个work process可以同时支持的最大连接数等。</p>
<p><strong>上述例子就表示work process支持的最大连接数为1024</strong></p>
<p>这部分配置对Nginx的性能影响较大，在实际中应该灵活配置</p>
</li>
<li><p><strong>第三部分：http块</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">    #                  '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">    #                  '"$http_user_agent" "$http_x_forwarded_for"';</span><br><span class="line"></span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache's document root</span><br><span class="line">        # concurs with nginx's one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这算是Nginx服务器配置中最频繁的部分，代理、缓存和日志定义等绝大多数功能和第三方模块的配置都在这里，需要注意的是：<strong>http块也可以包括http全局块、server块</strong></p>
<ul>
<li><p>http全局块</p>
<p>http全局块配置的指令包括文件引入、MIME-TYPE定义、日志自定义、连接超时时间、单链接请求书数上限等；</p>
</li>
<li><p>server块</p>
<ul>
<li><p>这块和虚拟主机有密切关系，虚拟主机从用户角度看，和一台独立的硬件主机是完全一样的，该技术的产生是为了节省互联网服务器硬件成本。</p>
</li>
<li><p>每个http块可以包括多个server块，而每个server块就相当于一个虚拟主机。</p>
</li>
<li><p>每个server块也分为全局server块，以及可以同时包含多个location块。</p>
</li>
<li><p><strong>全局server块</strong>：</p>
<p>最常见的配置是本虚拟机主机的监听配置和本虚拟机主机的名称或IP配置。</p>
</li>
<li><p><strong>location块：</strong></p>
<p>一个server块可以配置多个location块。</p>
</li>
</ul>
</li>
</ul>
<p>这块的主要作用是基于Nginx服务器收到的请求字符串（例如server_name/uri-string），对虚拟主机名称（也可以是ip别名）之外的字符串（例如前面的uri-string）进行匹配，对特定的请求进行处理。地址定向、数据缓存和应答控制等功能，还有许多第三方模块的配置也在这里运行。</p>
</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/05/Nginx/02_Nginx_%E5%AE%89%E8%A3%85%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/05/Nginx/02_Nginx_%E5%AE%89%E8%A3%85%E5%8F%8A%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">02_Nginx_安装及常用命令</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-05 21:11:48" itemprop="dateCreated datePublished" datetime="2020-01-05T21:11:48+08:00">2020-01-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-07 21:47:32" itemprop="dateModified" datetime="2020-01-07T21:47:32+08:00">2020-01-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="02-Nginx-安装及常用命令"><a href="#02-Nginx-安装及常用命令" class="headerlink" title="02_Nginx_安装及常用命令"></a>02_Nginx_安装及常用命令</h1><blockquote>
<p><a href="http://nginx.org" target="_blank" rel="noopener">Nginx官网</a></p>
</blockquote>
<ol>
<li><p>连接Linux服务器</p>
</li>
<li><p><a href="http://nginx.org" target="_blank" rel="noopener">官网</a>下载1.12.2版本Nginx</p>
</li>
<li><p>Nginx需要的相关素材（依赖）</p>
<ul>
<li><p>pcre-8.37.tar.gz</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://downloads.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz</span><br></pre></td></tr></table></figure>

<p>解压文件<code>tar -zxvf pcre-8.37.tar.gz</code>，在./configure完成后，回到pcre目录下执行make，最后执行make install</p>
<p>安装之后，使用命令，查看版本号<code>pcre-config -version</code></p>
</li>
<li><p>openssl-1.0.1t.tar.gz</p>
</li>
<li><p>zlib-1.2.8.tar.gz</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel</span><br></pre></td></tr></table></figure>
</li>
<li><p>nginx-1.12.2.tar.gz</p>
</li>
</ul>
<p><strong>一键安装上面四个依赖：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 一键安装四个依赖</span><br><span class="line">yum -y install gcc zlib zlib-devel pcre-devel openssl openssl-devel</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装Nginx</p>
<ul>
<li>解压nginx.xx.tar.gz包</li>
<li>进入解压缩目录，执行./configure</li>
<li>make &amp;&amp; make install</li>
<li>安装成功之后，在usr/local会多出一个文件夹nginx，在nginx中有sbin有启动脚本，在sbin目录下，用./nginx启动Nginx；  </li>
</ul>
</li>
<li><p>查看开放的端口号</p>
<ul>
<li>firewall-cmd –list-all</li>
</ul>
</li>
<li><p>设置开放的端口号</p>
<ul>
<li>firewall-cmd –add-service=http –permanent【开启http服务】</li>
<li>sudo firewall-cmd –add-port=80/tcp –permanent</li>
<li>【关闭端口】（<code>firewall-cmd --remove-port=8080/tcp --permanent</code>）</li>
</ul>
</li>
<li><p>重启防火墙</p>
<ul>
<li>firewall-cmd –reload</li>
</ul>
</li>
</ol>
<h2 id="Nginx操作的常用命令"><a href="#Nginx操作的常用命令" class="headerlink" title="Nginx操作的常用命令"></a>Nginx操作的常用命令</h2><p>使用Nginx操作命令的前提条件，必须进入nginx的目录【/usr/local/nginx/sbin】</p>
<ol>
<li>查看nginx的版本号<ul>
<li>./nginx -v</li>
</ul>
</li>
<li>启动Nginx<ul>
<li>./nginx</li>
</ul>
</li>
<li>关闭Nginx<ul>
<li>./nginx -s stop：强制退出</li>
<li>./nginx -s quit：普通退出</li>
</ul>
</li>
<li>重新加载Nginx<ul>
<li>./nginx -s reload</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/05/Nginx/01_Nginx_%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/05/Nginx/01_Nginx_%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">01_Nginx_简介</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-01-05 20:23:53 / 修改时间：21:13:34" itemprop="dateCreated datePublished" datetime="2020-01-05T20:23:53+08:00">2020-01-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="01-Nginx-简介"><a href="#01-Nginx-简介" class="headerlink" title="01_Nginx_简介"></a>01_Nginx_简介</h1><ol>
<li>什么是Nginx</li>
<li>反向代理</li>
<li>负载均衡</li>
<li>动静分离</li>
</ol>
<h2 id="Nginx概述"><a href="#Nginx概述" class="headerlink" title="Nginx概述"></a>Nginx概述</h2><p>Nginx（“engine x”）是一个高性能的HTTP和反向代理服务器，特点是占有内存少，并发能力强，事实上Nginx的并发能力确实在同类的网页服务器中表现较好，中国大陆使用Nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等；</p>
<h2 id="Nginx作为Web服务器"><a href="#Nginx作为Web服务器" class="headerlink" title="Nginx作为Web服务器"></a>Nginx作为Web服务器</h2><p>Nginx可以作为静态页面的web服务器，同时还支持CGI协议的动态语言，比如perl、php等。但是不支持Java，Java程序只能通过与Tomcat配合完成。Nginx专为性能优化而开发，性能是其最重要的考量，实现上非常注重效率，能经受高负载的考验，有报告表明能支持高达50000个并发连接数；</p>
<p><a href="https://lnmp.org/nginx.html" target="_blank" rel="noopener">Nginx介绍网站</a></p>
<h2 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h2><p>Nginx不仅可以做反向代理，实现负载均衡，还能用作正向代理来进行上网等功能；</p>
<p><strong>正向代理：</strong>如果把局域网外的Internet想象成一个巨大的资源库，则局域网中的客户端要访问Internet，则需要通过代理服务器来访问，这种代理服务就称为正向代理；</p>
<p><img src="01_Nginx_%E7%AE%80%E4%BB%8B/image-20200105204046212.png" alt="image-20200105204046212"></p>
<p>在客户端（浏览器）配置代理服务器，通过代理服务器进行互联网的访问；</p>
<h2 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h2><p>反向代理，其实客户端对代理是无感知的，因为客户端不需要任何配置就可以访问，我们只需要将请求发送到反向代理服务器，由反向代理服务器去选择目标服务器获取数据后，再返回给客户端，此时反向代理服务器和目标服务器对外就是一个服务器，暴露的是代理服务器地址，隐藏了真实服务器IP地址；</p>
<p><img src="01_Nginx_%E7%AE%80%E4%BB%8B/image-20200105205035307.png" alt="image-20200105205035307"></p>
<h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><p>客户端发送多个请求到服务器，服务器处理请求，有一些可能要与数据库进行交互，服务器处理完毕之后，再将结果返回给客户端；</p>
<p>这种架构模式对于早期的系统相对单一，并发请求相对较少的情况下是比较合适的，成本也低，但是随着信息数量的不断增长，访问量和数据量的飞速增长，以及系统业务的复杂度增加，这种架构会造成服务器响应客户端的请求日益缓慢，并发量特别大的时候，还容易造成服务器直接崩溃。很明显这是由于服务器性能的瓶颈造成的问题，那么如何解决这种情况呢？</p>
<p>我们首先想到的可能是升级服务器的配置，比如提高CPU执行效率，加大内存等提高机器的物理性能来解决此问题，但是我们知道<strong>摩尔定律</strong>的日益失效，硬件的性能提升已经不能满足日益提升的需求了。最明显的一个例子，天猫双十一当天，某个热销商品的瞬时访问量是及其庞大的，那么类似上面的系统架构，将机器都增加到现有的顶级物理配置，都是不能够满足需求的，那么该怎么办呢？</p>
<p>上面的分析我们去掉了增加服务器物理配置来解决问题的办法，也就是说纵向解决问题的办法行不通了，那么横向增加服务器的数量呢？这时候集群的概念产生了，单个服务器解决不了，我们增加服务器的数量，然后将请求分发到各个服务器上，将原先请求集中到单个服务器上的情况改为将请求分发到多个服务器上，将负载分发到不同的服务器，也就是我们所说的<strong>负载均衡</strong>；</p>
<p><img src="01_Nginx_%E7%AE%80%E4%BB%8B/image-20200105210602461.png" alt="image-20200105210602461"></p>
<h2 id="动静分离"><a href="#动静分离" class="headerlink" title="动静分离"></a>动静分离</h2><p>为了加快网站的解析速度，可以把动态页面和静态页面由不同的服务器来解析，加快解析速度，降低原来单个服务器的压力；</p>
<p><img src="01_Nginx_%E7%AE%80%E4%BB%8B/image-20200105210928259.png" alt="image-20200105210928259"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/05/MySQL/04_MySQL_DDL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/05/MySQL/04_MySQL_DDL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">04_MySQL_DDL基本语法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-05 10:15:57" itemprop="dateCreated datePublished" datetime="2020-01-05T10:15:57+08:00">2020-01-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-13 21:57:37" itemprop="dateModified" datetime="2020-01-13T21:57:37+08:00">2020-01-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="04-MySQL-DDL基本语法"><a href="#04-MySQL-DDL基本语法" class="headerlink" title="04_MySQL_DDL基本语法"></a>04_MySQL_DDL基本语法</h1><blockquote>
<p><a href="https://github.com/tomxwd/MySQL-Basic" target="_blank" rel="noopener">相关代码GitHub仓库</a></p>
<p><a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:tomxwd/MySQL-Basic.git</p>
<p><a href="https://github.com/tomxwd/MySQL-Basic.git" target="_blank" rel="noopener">https://github.com/tomxwd/MySQL-Basic.git</a></p>
</blockquote>
<p>DDL（Data Define Language）：数据定义语言，库和表的管理</p>
<ol>
<li><p>库的管理</p>
<ul>
<li>创建</li>
<li>修改</li>
<li>删除</li>
</ul>
</li>
<li><p>表的管理</p>
<ul>
<li>创建</li>
<li>修改</li>
<li>删除</li>
</ul>
</li>
<li><p>关键字</p>
<ul>
<li>创建：create</li>
<li>修改：alter</li>
<li>删除：drop</li>
</ul>
</li>
</ol>
<h2 id="库的管理"><a href="#库的管理" class="headerlink" title="库的管理"></a>库的管理</h2><h3 id="库的创建"><a href="#库的创建" class="headerlink" title="库的创建"></a>库的创建</h3><p><strong>语法：</strong></p>
<p>create database 【if not exists】 库名；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 库的管理</span></span><br><span class="line"><span class="comment"># 1. 库的创建</span></span><br><span class="line"><span class="comment"># 案例： 创建库books</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> books;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> books;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">database</span> books;</span><br></pre></td></tr></table></figure>



<h3 id="查看库的信息"><a href="#查看库的信息" class="headerlink" title="查看库的信息"></a>查看库的信息</h3><p><strong>语法：</strong></p>
<p>show create database 库名;</p>
<h3 id="库的修改"><a href="#库的修改" class="headerlink" title="库的修改"></a>库的修改</h3><p><strong>语法：</strong></p>
<p>alter database 库名 属性 set 值；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 库的修改</span></span><br><span class="line"><span class="comment"># 案例：更改库的字符集</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">database</span> books <span class="built_in">character</span> <span class="keyword">set</span> gbk;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">database</span> books;</span><br></pre></td></tr></table></figure>



<h3 id="库的删除"><a href="#库的删除" class="headerlink" title="库的删除"></a>库的删除</h3><p><strong>语法：</strong></p>
<p>drop database 【if exists】 库名；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 库的删除</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> books;</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">exists</span> books;</span><br></pre></td></tr></table></figure>



<h2 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h2><h3 id="表的创建"><a href="#表的创建" class="headerlink" title="表的创建"></a>表的创建</h3><p><strong>语法：</strong></p>
<p>create table 【if not exists】 表名(</p>
<p>​    列名 列的类型【(长度)，约束】,</p>
<p>​    列名 列的类型【(长度)，约束】,</p>
<p>​    …..</p>
<p>​    列名 列的类型【(长度)，约束】</p>
<p>)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 表的管理</span></span><br><span class="line"><span class="keyword">use</span> books;</span><br><span class="line"><span class="comment"># 1. 表的创建</span></span><br><span class="line"><span class="comment"># 创建book书籍表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> book</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span>          <span class="built_in">int</span>,</span><br><span class="line">    bName       <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    price       <span class="keyword">double</span>,</span><br><span class="line">    authorId    <span class="built_in">int</span>,</span><br><span class="line">    publishDate datetime</span><br><span class="line">);</span><br><span class="line">desc book;</span><br><span class="line"><span class="comment"># 创建author作者表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> author</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span>      <span class="built_in">int</span>,</span><br><span class="line">    au_name <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    nation  <span class="built_in">varchar</span>(<span class="number">10</span>)</span><br><span class="line">);</span><br><span class="line">desc author;</span><br></pre></td></tr></table></figure>



<h3 id="表的修改"><a href="#表的修改" class="headerlink" title="表的修改"></a>表的修改</h3><ol>
<li>修改列名</li>
<li>修改列的类型或约束</li>
<li>添加新的列</li>
<li>删除列</li>
<li>修改表名</li>
</ol>
<p><strong>语法：</strong></p>
<p>alter table 表名 add|drop|modify|change column 列名 列类型 约束；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2.表的修改</span></span><br><span class="line"><span class="comment"># ① 修改列名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line">    <span class="keyword">change</span> <span class="keyword">column</span> publishDate pubDate datetime;</span><br><span class="line"><span class="comment"># ② 修改列的类型或约束</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> book</span><br><span class="line">    <span class="keyword">modify</span> <span class="keyword">column</span> pubDate <span class="built_in">timestamp</span>;</span><br><span class="line"><span class="comment"># ③ 添加新的列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> author</span><br><span class="line">    <span class="keyword">add</span> <span class="keyword">column</span> annual <span class="keyword">double</span>;</span><br><span class="line"><span class="comment"># ④ 删除列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> author</span><br><span class="line">    <span class="keyword">drop</span> <span class="keyword">column</span> annual;</span><br><span class="line"><span class="comment"># ⑤ 修改表名</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">authors</span> <span class="keyword">rename</span> <span class="keyword">to</span> bok_authors;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> bok_authors <span class="keyword">rename</span> <span class="keyword">to</span> <span class="keyword">authors</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br></pre></td></tr></table></figure>



<h3 id="表的删除"><a href="#表的删除" class="headerlink" title="表的删除"></a>表的删除</h3><p><strong>语法：</strong></p>
<p>drop table 【if exists】 表名；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 表的删除</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">authors</span>;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>;</span><br></pre></td></tr></table></figure>



<h3 id="表的复制"><a href="#表的复制" class="headerlink" title="表的复制"></a>表的复制</h3><h4 id="仅仅复制表的结构"><a href="#仅仅复制表的结构" class="headerlink" title="仅仅复制表的结构"></a>仅仅复制表的结构</h4><p><strong>语法：</strong></p>
<p>create table 复制后表名 like 表名;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4. 表的复制</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> author (<span class="keyword">id</span>, au_name, nation)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">1</span>, <span class="string">'村上春树'</span>, <span class="string">'日本'</span>),</span><br><span class="line">       (<span class="number">2</span>, <span class="string">'莫言'</span>, <span class="string">'中国'</span>),</span><br><span class="line">       (<span class="number">3</span>, <span class="string">'冯唐'</span>, <span class="string">'中国'</span>),</span><br><span class="line">       (<span class="number">4</span>, <span class="string">'金庸'</span>, <span class="string">'中国'</span>);</span><br><span class="line"><span class="comment"># ①：仅仅复制表的结构</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> author_copy <span class="keyword">like</span> author;</span><br></pre></td></tr></table></figure>



<h4 id="复制表的结构以及数据"><a href="#复制表的结构以及数据" class="headerlink" title="复制表的结构以及数据"></a>复制表的结构以及数据</h4><p><strong>语法：</strong></p>
<p>create table 复制后的表名 【查询语句】;</p>
<ol>
<li>复制表的所有结构与数据</li>
<li>复制表的结构与部分数据</li>
<li>复制表的部分结构</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ②：复制表的结构+数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> author_copy2</span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> author_copy2;</span><br><span class="line"><span class="comment"># 复制部分列与部分数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> author_copy3</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">id</span>, au_name</span><br><span class="line"><span class="keyword">from</span> author</span><br><span class="line"><span class="keyword">where</span> nation = <span class="string">'中国'</span>;</span><br></pre></td></tr></table></figure>










      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2020/01/04/MySQL/03_MySQL_DML%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/01/04/MySQL/03_MySQL_DML%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">03_MySQL_DML基本语法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-04 20:24:38" itemprop="dateCreated datePublished" datetime="2020-01-04T20:24:38+08:00">2020-01-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-12 22:04:46" itemprop="dateModified" datetime="2020-01-12T22:04:46+08:00">2020-01-12</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="03-MySQL-DML基本语法"><a href="#03-MySQL-DML基本语法" class="headerlink" title="03_MySQL_DML基本语法"></a>03_MySQL_DML基本语法</h1><blockquote>
<p><a href="https://github.com/tomxwd/MySQL-Basic" target="_blank" rel="noopener">相关代码GitHub仓库</a></p>
<p><a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:tomxwd/MySQL-Basic.git</p>
<p><a href="https://github.com/tomxwd/MySQL-Basic.git" target="_blank" rel="noopener">https://github.com/tomxwd/MySQL-Basic.git</a></p>
</blockquote>
<p>DML语言：数据操作语言</p>
<ul>
<li>插入：insert</li>
<li>修改：update</li>
<li>删除：delete</li>
</ul>
<h2 id="插入语句"><a href="#插入语句" class="headerlink" title="插入语句"></a>插入语句</h2><p><strong>语法1：</strong></p>
<p>insert into 表名(列名,…) values (值1……);</p>
<ol>
<li>这个方法后面可以写多个行值，用逗号隔开；</li>
<li>支持子查询插入，不写values关键字，在表名(列名)之后直接加select查询；</li>
</ol>
<p><strong>语法2：</strong></p>
<p>insert into 表名 set 列名=值，列名=值，……</p>
<p><strong>注意：</strong></p>
<ol>
<li>插入的值的类型要与列的类型一致或兼容</li>
<li>不可以为null的列必须要插入值，可以为null的列插入空值，或插入的时候不写该字段</li>
<li>列的顺序可调换</li>
<li>列数和值的个数必须一致</li>
<li>可以省略列名，默认是所有列，而且列的顺序和表中列的顺序是一致的</li>
</ol>
<p><strong>两种语法对比：</strong></p>
<ol>
<li>语法1支持插入多行，语法2不支持；</li>
<li>语法1支持子查询，语法2不支持；</li>
</ol>
<p>一般来讲使用方式1；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 插入语句</span></span><br><span class="line"><span class="keyword">use</span> girls;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 语法1</span></span><br><span class="line"><span class="comment"># 1. 插入的值的类型要与列的类型一致或兼容</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(<span class="keyword">id</span>, <span class="keyword">name</span>, sex, borndate, phone, photo, boyfriend_id)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">13</span>, <span class="string">'唐艺昕'</span>, <span class="string">'女'</span>, <span class="string">'1990-4-23'</span>, <span class="string">'18988888888'</span>, <span class="literal">null</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 不可以为null的列必须要插入值，可以为null的列插入空值，或插入的时候不写该字段</span></span><br><span class="line"><span class="comment"># 方式1：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(<span class="keyword">id</span>, <span class="keyword">name</span>, sex, borndate, phone, photo, boyfriend_id)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">13</span>, <span class="string">'唐艺昕'</span>, <span class="string">'女'</span>, <span class="string">'1990-4-23'</span>, <span class="string">'18988888888'</span>, <span class="literal">null</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment"># 方式2：</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(<span class="keyword">id</span>, <span class="keyword">name</span>, sex, borndate, phone, boyfriend_id)</span><br><span class="line"><span class="keyword">values</span> (<span class="number">14</span>, <span class="string">'金星'</span>, <span class="string">'女'</span>, <span class="string">'1990-4-23'</span>, <span class="string">'18888888888'</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 列的顺序可调换</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(<span class="keyword">name</span>, sex, <span class="keyword">id</span>, phone)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">'蒋欣'</span>,<span class="string">'女'</span>,<span class="string">'16'</span>,<span class="number">110</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 列数和值的个数必须一致</span></span><br><span class="line"><span class="comment"># 5. 可以省略列名，默认是所有列，而且列的顺序和表中列的顺序是一致的</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty <span class="keyword">values</span> (<span class="number">18</span>,<span class="string">'张飞'</span>,<span class="string">'男'</span>,<span class="literal">NULL</span>,<span class="string">'119'</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line"><span class="comment"># 语法1支持插入多行</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty <span class="keyword">values</span> (<span class="number">19</span>,<span class="string">'刘备'</span>,<span class="string">'男'</span>,<span class="literal">NULL</span>,<span class="string">'1219'</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>),(<span class="number">20</span>,<span class="string">'关羽'</span>,<span class="string">'男'</span>,<span class="literal">NULL</span>,<span class="string">'12219'</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>);</span><br><span class="line"><span class="comment"># 语法1支持子查询插入数据</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty (<span class="keyword">id</span>,<span class="keyword">name</span>,phone) <span class="keyword">select</span> <span class="number">26</span>,<span class="string">'宋茜'</span>,<span class="string">'1181233'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 语法2</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">id</span> = <span class="number">21</span>,<span class="keyword">name</span>=<span class="string">'刘涛'</span>,phone=<span class="string">'999'</span>;</span><br></pre></td></tr></table></figure>



<h2 id="修改语句"><a href="#修改语句" class="headerlink" title="修改语句"></a>修改语句</h2><h3 id="修改单表的记录"><a href="#修改单表的记录" class="headerlink" title="修改单表的记录"></a>修改单表的记录</h3><p><strong>语法：</strong></p>
<p>update 表名 set 列=新值,列=新值……</p>
<p>where 筛选条件（正常情况都要加条件）；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 修改单表的记录</span></span><br><span class="line"><span class="comment"># 案例1：修改beauty表中姓唐的女神的电话为13898999898</span></span><br><span class="line"><span class="keyword">update</span> beauty <span class="keyword">set</span> phone = <span class="string">'13898999898'</span> <span class="keyword">where</span> <span class="keyword">name</span> <span class="keyword">like</span> <span class="string">'唐%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：修改boys表中id号为2的名称为张飞，魅力值为10</span></span><br><span class="line"><span class="keyword">update</span> boys <span class="keyword">set</span> boyName = <span class="string">'张飞'</span>, userCP = <span class="number">10</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="string">'2'</span>;</span><br></pre></td></tr></table></figure>



<h3 id="修改多表的记录【补充】"><a href="#修改多表的记录【补充】" class="headerlink" title="修改多表的记录【补充】"></a>修改多表的记录【补充】</h3><p><strong>92语法：</strong></p>
<p>update 表1 别名，表2 别名</p>
<p>set 列=值…</p>
<p>where 连接条件</p>
<p>and 筛选条件</p>
<p><strong>99语法：</strong></p>
<p>update 表1 别名</p>
<p>inner|left|right join 表2 b别名</p>
<p>on 连接条件</p>
<p>set 列=值……</p>
<p>where 筛选条件；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 修改多表的记录</span></span><br><span class="line"><span class="comment"># 案例1：修改张无忌的女朋友的手机号为114</span></span><br><span class="line"><span class="keyword">update</span> boys bo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> beauty b <span class="keyword">on</span> bo.id=b.boyfriend_id</span><br><span class="line"><span class="keyword">set</span> b.phone=<span class="string">'114'</span></span><br><span class="line"><span class="keyword">where</span> bo.boyName=<span class="string">'张无忌'</span>;</span><br><span class="line"><span class="comment"># 案例2：没有男朋友的女神的男朋友编号为2</span></span><br><span class="line"><span class="keyword">update</span> beauty b</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> boys bo <span class="keyword">on</span> bo.id = b.boyfriend_id</span><br><span class="line"><span class="keyword">set</span> b.boyfriend_id = <span class="number">2</span></span><br><span class="line"><span class="keyword">where</span> bo.id <span class="keyword">is</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>



<h2 id="删除语句"><a href="#删除语句" class="headerlink" title="删除语句"></a>删除语句</h2><p><strong>语法一：</strong></p>
<p>delete from 表名 where 筛选条件</p>
<p><strong>语法二：</strong></p>
<p>truncate table 表名；（整个表的数据都删除）</p>
<h3 id="删除单表的记录"><a href="#删除单表的记录" class="headerlink" title="删除单表的记录"></a>删除单表的记录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式1：delete</span></span><br><span class="line"><span class="comment"># 1. 单表的删除</span></span><br><span class="line"><span class="comment"># 案例1： 删除手机号以9结尾的女神信息</span></span><br><span class="line"><span class="keyword">delete</span></span><br><span class="line"><span class="keyword">from</span> beauty</span><br><span class="line"><span class="keyword">where</span> phone <span class="keyword">like</span> <span class="string">'%9'</span>;</span><br></pre></td></tr></table></figure>



<h3 id="删除多表的记录"><a href="#删除多表的记录" class="headerlink" title="删除多表的记录"></a>删除多表的记录</h3><p>sql92：</p>
<p>delete 【表1的别名】，【表2的别名】</p>
<p>from 表1 别名，表2 别名</p>
<p>where 连接条件</p>
<p>and 筛选条件；</p>
<p>sql99：</p>
<p>delete 【表1的别名】，【表2的别名】</p>
<p>from 表1 别名</p>
<p>inner|left|right join 表2 别名</p>
<p>on 连接条件</p>
<p>where 筛选条件；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 多表的删除</span></span><br><span class="line"><span class="comment"># 案例2：删除张无忌的女朋友的信息</span></span><br><span class="line"><span class="keyword">delete</span> b</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> boys bo <span class="keyword">on</span> b.boyfriend_id = bo.id</span><br><span class="line"><span class="keyword">where</span> bo.boyName = <span class="string">'张无忌'</span>;</span><br><span class="line"><span class="comment"># 案例3：删除黄晓明的信息以及女朋友的信息</span></span><br><span class="line"><span class="keyword">delete</span> b,bo</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> boys bo <span class="keyword">on</span> b.boyfriend_id = bo.id</span><br><span class="line"><span class="keyword">where</span> bo.boyName = <span class="string">'黄晓明'</span>;</span><br></pre></td></tr></table></figure>



<h3 id="清空表记录"><a href="#清空表记录" class="headerlink" title="清空表记录"></a>清空表记录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式2：truncate语句</span></span><br><span class="line"><span class="comment"># 案例：清空表数据</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> boys;</span><br></pre></td></tr></table></figure>



<h3 id="delete和truncate对比"><a href="#delete和truncate对比" class="headerlink" title="delete和truncate对比"></a>delete和truncate对比</h3><ol>
<li>delete可以加where条件，truncate不能加；</li>
<li>truncate效率比delete高一点；</li>
<li>假如要删除的表中有自增长列，如果delete删除后，再删除数据，自增长列的值从断点开始，而truncate删除后，再插入数据，自增长列的值从1开始；</li>
<li>truncate删除没有返回值，delete删除有返回值，返回受影响的行数；</li>
<li>truncate删除不能回滚，delete删除可以回滚；</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/12/30/MySQL/02_MySQL_DQL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/30/MySQL/02_MySQL_DQL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="post-title-link" itemprop="url">02_MySQL_DQL基本语法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-30 20:55:03" itemprop="dateCreated datePublished" datetime="2019-12-30T20:55:03+08:00">2019-12-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-16 13:37:07" itemprop="dateModified" datetime="2020-02-16T13:37:07+08:00">2020-02-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="02-MySQL-DQL基本语法"><a href="#02-MySQL-DQL基本语法" class="headerlink" title="02_MySQL_DQL基本语法"></a>02_MySQL_DQL基本语法</h1><blockquote>
<p><a href="https://github.com/tomxwd/MySQL-Basic" target="_blank" rel="noopener">相关代码GitHub仓库</a></p>
<p><a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:tomxwd/MySQL-Basic.git</p>
<p><a href="https://github.com/tomxwd/MySQL-Basic.git" target="_blank" rel="noopener">https://github.com/tomxwd/MySQL-Basic.git</a></p>
</blockquote>
<p>这里是DQL（Data Query Language）</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>建表；</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">SQLyog Ultimate v10.00 Beta1</span></span><br><span class="line"><span class="comment">MySQL - 5.5.15 : Database - myemployees</span></span><br><span class="line"><span class="comment">*********************************************************************</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET NAMES utf8 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=''*/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="comment">/*!32312 IF NOT EXISTS*/</span><span class="string">`myemployees`</span> <span class="comment">/*!40100 DEFAULT CHARACTER SET gb2312 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">USE</span> <span class="string">`myemployees`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `departments` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`departments`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`departments`</span> (</span><br><span class="line">  <span class="string">`department_id`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`department_name`</span> <span class="built_in">varchar</span>(<span class="number">3</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`manager_id`</span> <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`location_id`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`department_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`loc_id_fk`</span> (<span class="string">`location_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`loc_id_fk`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`location_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`locations`</span> (<span class="string">`location_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">271</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=gb2312;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `departments` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`departments`</span>(<span class="string">`department_id`</span>,<span class="string">`department_name`</span>,<span class="string">`manager_id`</span>,<span class="string">`location_id`</span>) <span class="keyword">values</span> (<span class="number">10</span>,<span class="string">'Adm'</span>,<span class="number">200</span>,<span class="number">1700</span>),(<span class="number">20</span>,<span class="string">'Mar'</span>,<span class="number">201</span>,<span class="number">1800</span>),(<span class="number">30</span>,<span class="string">'Pur'</span>,<span class="number">114</span>,<span class="number">1700</span>),(<span class="number">40</span>,<span class="string">'Hum'</span>,<span class="number">203</span>,<span class="number">2400</span>),(<span class="number">50</span>,<span class="string">'Shi'</span>,<span class="number">121</span>,<span class="number">1500</span>),(<span class="number">60</span>,<span class="string">'IT'</span>,<span class="number">103</span>,<span class="number">1400</span>),(<span class="number">70</span>,<span class="string">'Pub'</span>,<span class="number">204</span>,<span class="number">2700</span>),(<span class="number">80</span>,<span class="string">'Sal'</span>,<span class="number">145</span>,<span class="number">2500</span>),(<span class="number">90</span>,<span class="string">'Exe'</span>,<span class="number">100</span>,<span class="number">1700</span>),(<span class="number">100</span>,<span class="string">'Fin'</span>,<span class="number">108</span>,<span class="number">1700</span>),(<span class="number">110</span>,<span class="string">'Acc'</span>,<span class="number">205</span>,<span class="number">1700</span>),(<span class="number">120</span>,<span class="string">'Tre'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">130</span>,<span class="string">'Cor'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">140</span>,<span class="string">'Con'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">150</span>,<span class="string">'Sha'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">160</span>,<span class="string">'Ben'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">170</span>,<span class="string">'Man'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">180</span>,<span class="string">'Con'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">190</span>,<span class="string">'Con'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">200</span>,<span class="string">'Ope'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">210</span>,<span class="string">'IT '</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">220</span>,<span class="string">'NOC'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">230</span>,<span class="string">'IT '</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">240</span>,<span class="string">'Gov'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">250</span>,<span class="string">'Ret'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">260</span>,<span class="string">'Rec'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>),(<span class="number">270</span>,<span class="string">'Pay'</span>,<span class="literal">NULL</span>,<span class="number">1700</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `employees` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`employees`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`employees`</span> (</span><br><span class="line">  <span class="string">`employee_id`</span> <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`first_name`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`last_name`</span> <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`phone_number`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`job_id`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`salary`</span> <span class="keyword">double</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`commission_pct`</span> <span class="keyword">double</span>(<span class="number">4</span>,<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`manager_id`</span> <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`department_id`</span> <span class="built_in">int</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`hiredate`</span> datetime <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`employee_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`dept_id_fk`</span> (<span class="string">`department_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`job_id_fk`</span> (<span class="string">`job_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`dept_id_fk`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`department_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`departments`</span> (<span class="string">`department_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`job_id_fk`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`job_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`jobs`</span> (<span class="string">`job_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">207</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=gb2312;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `employees` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`employees`</span>(<span class="string">`employee_id`</span>,<span class="string">`first_name`</span>,<span class="string">`last_name`</span>,<span class="string">`email`</span>,<span class="string">`phone_number`</span>,<span class="string">`job_id`</span>,<span class="string">`salary`</span>,<span class="string">`commission_pct`</span>,<span class="string">`manager_id`</span>,<span class="string">`department_id`</span>,<span class="string">`hiredate`</span>) <span class="keyword">values</span> (<span class="number">100</span>,<span class="string">'Steven'</span>,<span class="string">'K_ing'</span>,<span class="string">'SKING'</span>,<span class="string">'515.123.4567'</span>,<span class="string">'AD_PRES'</span>,<span class="number">24000.00</span>,<span class="literal">NULL</span>,<span class="literal">NULL</span>,<span class="number">90</span>,<span class="string">'1992-04-03 00:00:00'</span>),(<span class="number">101</span>,<span class="string">'Neena'</span>,<span class="string">'Kochhar'</span>,<span class="string">'NKOCHHAR'</span>,<span class="string">'515.123.4568'</span>,<span class="string">'AD_VP'</span>,<span class="number">17000.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">90</span>,<span class="string">'1992-04-03 00:00:00'</span>),(<span class="number">102</span>,<span class="string">'Lex'</span>,<span class="string">'De Haan'</span>,<span class="string">'LDEHAAN'</span>,<span class="string">'515.123.4569'</span>,<span class="string">'AD_VP'</span>,<span class="number">17000.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">90</span>,<span class="string">'1992-04-03 00:00:00'</span>),(<span class="number">103</span>,<span class="string">'Alexander'</span>,<span class="string">'Hunold'</span>,<span class="string">'AHUNOLD'</span>,<span class="string">'590.423.4567'</span>,<span class="string">'IT_PROG'</span>,<span class="number">9000.00</span>,<span class="literal">NULL</span>,<span class="number">102</span>,<span class="number">60</span>,<span class="string">'1992-04-03 00:00:00'</span>),(<span class="number">104</span>,<span class="string">'Bruce'</span>,<span class="string">'Ernst'</span>,<span class="string">'BERNST'</span>,<span class="string">'590.423.4568'</span>,<span class="string">'IT_PROG'</span>,<span class="number">6000.00</span>,<span class="literal">NULL</span>,<span class="number">103</span>,<span class="number">60</span>,<span class="string">'1992-04-03 00:00:00'</span>),(<span class="number">105</span>,<span class="string">'David'</span>,<span class="string">'Austin'</span>,<span class="string">'DAUSTIN'</span>,<span class="string">'590.423.4569'</span>,<span class="string">'IT_PROG'</span>,<span class="number">4800.00</span>,<span class="literal">NULL</span>,<span class="number">103</span>,<span class="number">60</span>,<span class="string">'1998-03-03 00:00:00'</span>),(<span class="number">106</span>,<span class="string">'Valli'</span>,<span class="string">'Pataballa'</span>,<span class="string">'VPATABAL'</span>,<span class="string">'590.423.4560'</span>,<span class="string">'IT_PROG'</span>,<span class="number">4800.00</span>,<span class="literal">NULL</span>,<span class="number">103</span>,<span class="number">60</span>,<span class="string">'1998-03-03 00:00:00'</span>),(<span class="number">107</span>,<span class="string">'Diana'</span>,<span class="string">'Lorentz'</span>,<span class="string">'DLORENTZ'</span>,<span class="string">'590.423.5567'</span>,<span class="string">'IT_PROG'</span>,<span class="number">4200.00</span>,<span class="literal">NULL</span>,<span class="number">103</span>,<span class="number">60</span>,<span class="string">'1998-03-03 00:00:00'</span>),(<span class="number">108</span>,<span class="string">'Nancy'</span>,<span class="string">'Greenberg'</span>,<span class="string">'NGREENBE'</span>,<span class="string">'515.124.4569'</span>,<span class="string">'FI_MGR'</span>,<span class="number">12000.00</span>,<span class="literal">NULL</span>,<span class="number">101</span>,<span class="number">100</span>,<span class="string">'1998-03-03 00:00:00'</span>),(<span class="number">109</span>,<span class="string">'Daniel'</span>,<span class="string">'Faviet'</span>,<span class="string">'DFAVIET'</span>,<span class="string">'515.124.4169'</span>,<span class="string">'FI_ACCOUNT'</span>,<span class="number">9000.00</span>,<span class="literal">NULL</span>,<span class="number">108</span>,<span class="number">100</span>,<span class="string">'1998-03-03 00:00:00'</span>),(<span class="number">110</span>,<span class="string">'John'</span>,<span class="string">'Chen'</span>,<span class="string">'JCHEN'</span>,<span class="string">'515.124.4269'</span>,<span class="string">'FI_ACCOUNT'</span>,<span class="number">8200.00</span>,<span class="literal">NULL</span>,<span class="number">108</span>,<span class="number">100</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">111</span>,<span class="string">'Ismael'</span>,<span class="string">'Sciarra'</span>,<span class="string">'ISCIARRA'</span>,<span class="string">'515.124.4369'</span>,<span class="string">'FI_ACCOUNT'</span>,<span class="number">7700.00</span>,<span class="literal">NULL</span>,<span class="number">108</span>,<span class="number">100</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">112</span>,<span class="string">'Jose Manuel'</span>,<span class="string">'Urman'</span>,<span class="string">'JMURMAN'</span>,<span class="string">'515.124.4469'</span>,<span class="string">'FI_ACCOUNT'</span>,<span class="number">7800.00</span>,<span class="literal">NULL</span>,<span class="number">108</span>,<span class="number">100</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">113</span>,<span class="string">'Luis'</span>,<span class="string">'Popp'</span>,<span class="string">'LPOPP'</span>,<span class="string">'515.124.4567'</span>,<span class="string">'FI_ACCOUNT'</span>,<span class="number">6900.00</span>,<span class="literal">NULL</span>,<span class="number">108</span>,<span class="number">100</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">114</span>,<span class="string">'Den'</span>,<span class="string">'Raphaely'</span>,<span class="string">'DRAPHEAL'</span>,<span class="string">'515.127.4561'</span>,<span class="string">'PU_MAN'</span>,<span class="number">11000.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">30</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">115</span>,<span class="string">'Alexander'</span>,<span class="string">'Khoo'</span>,<span class="string">'AKHOO'</span>,<span class="string">'515.127.4562'</span>,<span class="string">'PU_CLERK'</span>,<span class="number">3100.00</span>,<span class="literal">NULL</span>,<span class="number">114</span>,<span class="number">30</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">116</span>,<span class="string">'Shelli'</span>,<span class="string">'Baida'</span>,<span class="string">'SBAIDA'</span>,<span class="string">'515.127.4563'</span>,<span class="string">'PU_CLERK'</span>,<span class="number">2900.00</span>,<span class="literal">NULL</span>,<span class="number">114</span>,<span class="number">30</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">117</span>,<span class="string">'Sigal'</span>,<span class="string">'Tobias'</span>,<span class="string">'STOBIAS'</span>,<span class="string">'515.127.4564'</span>,<span class="string">'PU_CLERK'</span>,<span class="number">2800.00</span>,<span class="literal">NULL</span>,<span class="number">114</span>,<span class="number">30</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">118</span>,<span class="string">'Guy'</span>,<span class="string">'Himuro'</span>,<span class="string">'GHIMURO'</span>,<span class="string">'515.127.4565'</span>,<span class="string">'PU_CLERK'</span>,<span class="number">2600.00</span>,<span class="literal">NULL</span>,<span class="number">114</span>,<span class="number">30</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">119</span>,<span class="string">'Karen'</span>,<span class="string">'Colmenares'</span>,<span class="string">'KCOLMENA'</span>,<span class="string">'515.127.4566'</span>,<span class="string">'PU_CLERK'</span>,<span class="number">2500.00</span>,<span class="literal">NULL</span>,<span class="number">114</span>,<span class="number">30</span>,<span class="string">'2000-09-09 00:00:00'</span>),(<span class="number">120</span>,<span class="string">'Matthew'</span>,<span class="string">'Weiss'</span>,<span class="string">'MWEISS'</span>,<span class="string">'650.123.1234'</span>,<span class="string">'ST_MAN'</span>,<span class="number">8000.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">121</span>,<span class="string">'Adam'</span>,<span class="string">'Fripp'</span>,<span class="string">'AFRIPP'</span>,<span class="string">'650.123.2234'</span>,<span class="string">'ST_MAN'</span>,<span class="number">8200.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">122</span>,<span class="string">'Payam'</span>,<span class="string">'Kaufling'</span>,<span class="string">'PKAUFLIN'</span>,<span class="string">'650.123.3234'</span>,<span class="string">'ST_MAN'</span>,<span class="number">7900.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">123</span>,<span class="string">'Shanta'</span>,<span class="string">'Vollman'</span>,<span class="string">'SVOLLMAN'</span>,<span class="string">'650.123.4234'</span>,<span class="string">'ST_MAN'</span>,<span class="number">6500.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">124</span>,<span class="string">'Kevin'</span>,<span class="string">'Mourgos'</span>,<span class="string">'KMOURGOS'</span>,<span class="string">'650.123.5234'</span>,<span class="string">'ST_MAN'</span>,<span class="number">5800.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">125</span>,<span class="string">'Julia'</span>,<span class="string">'Nayer'</span>,<span class="string">'JNAYER'</span>,<span class="string">'650.124.1214'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">3200.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">126</span>,<span class="string">'Irene'</span>,<span class="string">'Mikkilineni'</span>,<span class="string">'IMIKKILI'</span>,<span class="string">'650.124.1224'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2700.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">127</span>,<span class="string">'James'</span>,<span class="string">'Landry'</span>,<span class="string">'JLANDRY'</span>,<span class="string">'650.124.1334'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2400.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">128</span>,<span class="string">'Steven'</span>,<span class="string">'Markle'</span>,<span class="string">'SMARKLE'</span>,<span class="string">'650.124.1434'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2200.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">129</span>,<span class="string">'Laura'</span>,<span class="string">'Bissot'</span>,<span class="string">'LBISSOT'</span>,<span class="string">'650.124.5234'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">3300.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">130</span>,<span class="string">'Mozhe'</span>,<span class="string">'Atkinson'</span>,<span class="string">'MATKINSO'</span>,<span class="string">'650.124.6234'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2800.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">131</span>,<span class="string">'James'</span>,<span class="string">'Marlow'</span>,<span class="string">'JAMRLOW'</span>,<span class="string">'650.124.7234'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2500.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">132</span>,<span class="string">'TJ'</span>,<span class="string">'Olson'</span>,<span class="string">'TJOLSON'</span>,<span class="string">'650.124.8234'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2100.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">133</span>,<span class="string">'Jason'</span>,<span class="string">'Mallin'</span>,<span class="string">'JMALLIN'</span>,<span class="string">'650.127.1934'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">3300.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2004-02-06 00:00:00'</span>),(<span class="number">134</span>,<span class="string">'Michael'</span>,<span class="string">'Rogers'</span>,<span class="string">'MROGERS'</span>,<span class="string">'650.127.1834'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2900.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">135</span>,<span class="string">'Ki'</span>,<span class="string">'Gee'</span>,<span class="string">'KGEE'</span>,<span class="string">'650.127.1734'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2400.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">136</span>,<span class="string">'Hazel'</span>,<span class="string">'Philtanker'</span>,<span class="string">'HPHILTAN'</span>,<span class="string">'650.127.1634'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2200.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">137</span>,<span class="string">'Renske'</span>,<span class="string">'Ladwig'</span>,<span class="string">'RLADWIG'</span>,<span class="string">'650.121.1234'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">3600.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">138</span>,<span class="string">'Stephen'</span>,<span class="string">'Stiles'</span>,<span class="string">'SSTILES'</span>,<span class="string">'650.121.2034'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">3200.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">139</span>,<span class="string">'John'</span>,<span class="string">'Seo'</span>,<span class="string">'JSEO'</span>,<span class="string">'650.121.2019'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2700.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">140</span>,<span class="string">'Joshua'</span>,<span class="string">'Patel'</span>,<span class="string">'JPATEL'</span>,<span class="string">'650.121.1834'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2500.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">141</span>,<span class="string">'Trenna'</span>,<span class="string">'Rajs'</span>,<span class="string">'TRAJS'</span>,<span class="string">'650.121.8009'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">3500.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">142</span>,<span class="string">'Curtis'</span>,<span class="string">'Davies'</span>,<span class="string">'CDAVIES'</span>,<span class="string">'650.121.2994'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">3100.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">143</span>,<span class="string">'Randall'</span>,<span class="string">'Matos'</span>,<span class="string">'RMATOS'</span>,<span class="string">'650.121.2874'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2600.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">144</span>,<span class="string">'Peter'</span>,<span class="string">'Vargas'</span>,<span class="string">'PVARGAS'</span>,<span class="string">'650.121.2004'</span>,<span class="string">'ST_CLERK'</span>,<span class="number">2500.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">145</span>,<span class="string">'John'</span>,<span class="string">'Russell'</span>,<span class="string">'JRUSSEL'</span>,<span class="string">'011.44.1344.429268'</span>,<span class="string">'SA_MAN'</span>,<span class="number">14000.00</span>,<span class="number">0.40</span>,<span class="number">100</span>,<span class="number">80</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">146</span>,<span class="string">'Karen'</span>,<span class="string">'Partners'</span>,<span class="string">'KPARTNER'</span>,<span class="string">'011.44.1344.467268'</span>,<span class="string">'SA_MAN'</span>,<span class="number">13500.00</span>,<span class="number">0.30</span>,<span class="number">100</span>,<span class="number">80</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">147</span>,<span class="string">'Alberto'</span>,<span class="string">'Errazuriz'</span>,<span class="string">'AERRAZUR'</span>,<span class="string">'011.44.1344.429278'</span>,<span class="string">'SA_MAN'</span>,<span class="number">12000.00</span>,<span class="number">0.30</span>,<span class="number">100</span>,<span class="number">80</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">148</span>,<span class="string">'Gerald'</span>,<span class="string">'Cambrault'</span>,<span class="string">'GCAMBRAU'</span>,<span class="string">'011.44.1344.619268'</span>,<span class="string">'SA_MAN'</span>,<span class="number">11000.00</span>,<span class="number">0.30</span>,<span class="number">100</span>,<span class="number">80</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">149</span>,<span class="string">'Eleni'</span>,<span class="string">'Zlotkey'</span>,<span class="string">'EZLOTKEY'</span>,<span class="string">'011.44.1344.429018'</span>,<span class="string">'SA_MAN'</span>,<span class="number">10500.00</span>,<span class="number">0.20</span>,<span class="number">100</span>,<span class="number">80</span>,<span class="string">'2002-12-23 00:00:00'</span>),(<span class="number">150</span>,<span class="string">'Peter'</span>,<span class="string">'Tucker'</span>,<span class="string">'PTUCKER'</span>,<span class="string">'011.44.1344.129268'</span>,<span class="string">'SA_REP'</span>,<span class="number">10000.00</span>,<span class="number">0.30</span>,<span class="number">145</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">151</span>,<span class="string">'David'</span>,<span class="string">'Bernstein'</span>,<span class="string">'DBERNSTE'</span>,<span class="string">'011.44.1344.345268'</span>,<span class="string">'SA_REP'</span>,<span class="number">9500.00</span>,<span class="number">0.25</span>,<span class="number">145</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">152</span>,<span class="string">'Peter'</span>,<span class="string">'Hall'</span>,<span class="string">'PHALL'</span>,<span class="string">'011.44.1344.478968'</span>,<span class="string">'SA_REP'</span>,<span class="number">9000.00</span>,<span class="number">0.25</span>,<span class="number">145</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">153</span>,<span class="string">'Christopher'</span>,<span class="string">'Olsen'</span>,<span class="string">'COLSEN'</span>,<span class="string">'011.44.1344.498718'</span>,<span class="string">'SA_REP'</span>,<span class="number">8000.00</span>,<span class="number">0.20</span>,<span class="number">145</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">154</span>,<span class="string">'Nanette'</span>,<span class="string">'Cambrault'</span>,<span class="string">'NCAMBRAU'</span>,<span class="string">'011.44.1344.987668'</span>,<span class="string">'SA_REP'</span>,<span class="number">7500.00</span>,<span class="number">0.20</span>,<span class="number">145</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">155</span>,<span class="string">'Oliver'</span>,<span class="string">'Tuvault'</span>,<span class="string">'OTUVAULT'</span>,<span class="string">'011.44.1344.486508'</span>,<span class="string">'SA_REP'</span>,<span class="number">7000.00</span>,<span class="number">0.15</span>,<span class="number">145</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">156</span>,<span class="string">'Janette'</span>,<span class="string">'K_ing'</span>,<span class="string">'JKING'</span>,<span class="string">'011.44.1345.429268'</span>,<span class="string">'SA_REP'</span>,<span class="number">10000.00</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">157</span>,<span class="string">'Patrick'</span>,<span class="string">'Sully'</span>,<span class="string">'PSULLY'</span>,<span class="string">'011.44.1345.929268'</span>,<span class="string">'SA_REP'</span>,<span class="number">9500.00</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">158</span>,<span class="string">'Allan'</span>,<span class="string">'McEwen'</span>,<span class="string">'AMCEWEN'</span>,<span class="string">'011.44.1345.829268'</span>,<span class="string">'SA_REP'</span>,<span class="number">9000.00</span>,<span class="number">0.35</span>,<span class="number">146</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">159</span>,<span class="string">'Lindsey'</span>,<span class="string">'Smith'</span>,<span class="string">'LSMITH'</span>,<span class="string">'011.44.1345.729268'</span>,<span class="string">'SA_REP'</span>,<span class="number">8000.00</span>,<span class="number">0.30</span>,<span class="number">146</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">160</span>,<span class="string">'Louise'</span>,<span class="string">'Doran'</span>,<span class="string">'LDORAN'</span>,<span class="string">'011.44.1345.629268'</span>,<span class="string">'SA_REP'</span>,<span class="number">7500.00</span>,<span class="number">0.30</span>,<span class="number">146</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">161</span>,<span class="string">'Sarath'</span>,<span class="string">'Sewall'</span>,<span class="string">'SSEWALL'</span>,<span class="string">'011.44.1345.529268'</span>,<span class="string">'SA_REP'</span>,<span class="number">7000.00</span>,<span class="number">0.25</span>,<span class="number">146</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">162</span>,<span class="string">'Clara'</span>,<span class="string">'Vishney'</span>,<span class="string">'CVISHNEY'</span>,<span class="string">'011.44.1346.129268'</span>,<span class="string">'SA_REP'</span>,<span class="number">10500.00</span>,<span class="number">0.25</span>,<span class="number">147</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">163</span>,<span class="string">'Danielle'</span>,<span class="string">'Greene'</span>,<span class="string">'DGREENE'</span>,<span class="string">'011.44.1346.229268'</span>,<span class="string">'SA_REP'</span>,<span class="number">9500.00</span>,<span class="number">0.15</span>,<span class="number">147</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">164</span>,<span class="string">'Mattea'</span>,<span class="string">'Marvins'</span>,<span class="string">'MMARVINS'</span>,<span class="string">'011.44.1346.329268'</span>,<span class="string">'SA_REP'</span>,<span class="number">7200.00</span>,<span class="number">0.10</span>,<span class="number">147</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">165</span>,<span class="string">'David'</span>,<span class="string">'Lee'</span>,<span class="string">'DLEE'</span>,<span class="string">'011.44.1346.529268'</span>,<span class="string">'SA_REP'</span>,<span class="number">6800.00</span>,<span class="number">0.10</span>,<span class="number">147</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">166</span>,<span class="string">'Sundar'</span>,<span class="string">'Ande'</span>,<span class="string">'SANDE'</span>,<span class="string">'011.44.1346.629268'</span>,<span class="string">'SA_REP'</span>,<span class="number">6400.00</span>,<span class="number">0.10</span>,<span class="number">147</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">167</span>,<span class="string">'Amit'</span>,<span class="string">'Banda'</span>,<span class="string">'ABANDA'</span>,<span class="string">'011.44.1346.729268'</span>,<span class="string">'SA_REP'</span>,<span class="number">6200.00</span>,<span class="number">0.10</span>,<span class="number">147</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">168</span>,<span class="string">'Lisa'</span>,<span class="string">'Ozer'</span>,<span class="string">'LOZER'</span>,<span class="string">'011.44.1343.929268'</span>,<span class="string">'SA_REP'</span>,<span class="number">11500.00</span>,<span class="number">0.25</span>,<span class="number">148</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">169</span>,<span class="string">'Harrison'</span>,<span class="string">'Bloom'</span>,<span class="string">'HBLOOM'</span>,<span class="string">'011.44.1343.829268'</span>,<span class="string">'SA_REP'</span>,<span class="number">10000.00</span>,<span class="number">0.20</span>,<span class="number">148</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">170</span>,<span class="string">'Tayler'</span>,<span class="string">'Fox'</span>,<span class="string">'TFOX'</span>,<span class="string">'011.44.1343.729268'</span>,<span class="string">'SA_REP'</span>,<span class="number">9600.00</span>,<span class="number">0.20</span>,<span class="number">148</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">171</span>,<span class="string">'William'</span>,<span class="string">'Smith'</span>,<span class="string">'WSMITH'</span>,<span class="string">'011.44.1343.629268'</span>,<span class="string">'SA_REP'</span>,<span class="number">7400.00</span>,<span class="number">0.15</span>,<span class="number">148</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">172</span>,<span class="string">'Elizabeth'</span>,<span class="string">'Bates'</span>,<span class="string">'EBATES'</span>,<span class="string">'011.44.1343.529268'</span>,<span class="string">'SA_REP'</span>,<span class="number">7300.00</span>,<span class="number">0.15</span>,<span class="number">148</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">173</span>,<span class="string">'Sundita'</span>,<span class="string">'Kumar'</span>,<span class="string">'SKUMAR'</span>,<span class="string">'011.44.1343.329268'</span>,<span class="string">'SA_REP'</span>,<span class="number">6100.00</span>,<span class="number">0.10</span>,<span class="number">148</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">174</span>,<span class="string">'Ellen'</span>,<span class="string">'Abel'</span>,<span class="string">'EABEL'</span>,<span class="string">'011.44.1644.429267'</span>,<span class="string">'SA_REP'</span>,<span class="number">11000.00</span>,<span class="number">0.30</span>,<span class="number">149</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">175</span>,<span class="string">'Alyssa'</span>,<span class="string">'Hutton'</span>,<span class="string">'AHUTTON'</span>,<span class="string">'011.44.1644.429266'</span>,<span class="string">'SA_REP'</span>,<span class="number">8800.00</span>,<span class="number">0.25</span>,<span class="number">149</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">176</span>,<span class="string">'Jonathon'</span>,<span class="string">'Taylor'</span>,<span class="string">'JTAYLOR'</span>,<span class="string">'011.44.1644.429265'</span>,<span class="string">'SA_REP'</span>,<span class="number">8600.00</span>,<span class="number">0.20</span>,<span class="number">149</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">177</span>,<span class="string">'Jack'</span>,<span class="string">'Livingston'</span>,<span class="string">'JLIVINGS'</span>,<span class="string">'011.44.1644.429264'</span>,<span class="string">'SA_REP'</span>,<span class="number">8400.00</span>,<span class="number">0.20</span>,<span class="number">149</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">178</span>,<span class="string">'Kimberely'</span>,<span class="string">'Grant'</span>,<span class="string">'KGRANT'</span>,<span class="string">'011.44.1644.429263'</span>,<span class="string">'SA_REP'</span>,<span class="number">7000.00</span>,<span class="number">0.15</span>,<span class="number">149</span>,<span class="literal">NULL</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">179</span>,<span class="string">'Charles'</span>,<span class="string">'Johnson'</span>,<span class="string">'CJOHNSON'</span>,<span class="string">'011.44.1644.429262'</span>,<span class="string">'SA_REP'</span>,<span class="number">6200.00</span>,<span class="number">0.10</span>,<span class="number">149</span>,<span class="number">80</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">180</span>,<span class="string">'Winston'</span>,<span class="string">'Taylor'</span>,<span class="string">'WTAYLOR'</span>,<span class="string">'650.507.9876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3200.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">181</span>,<span class="string">'Jean'</span>,<span class="string">'Fleaur'</span>,<span class="string">'JFLEAUR'</span>,<span class="string">'650.507.9877'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3100.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">182</span>,<span class="string">'Martha'</span>,<span class="string">'Sullivan'</span>,<span class="string">'MSULLIVA'</span>,<span class="string">'650.507.9878'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">2500.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">183</span>,<span class="string">'Girard'</span>,<span class="string">'Geoni'</span>,<span class="string">'GGEONI'</span>,<span class="string">'650.507.9879'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">2800.00</span>,<span class="literal">NULL</span>,<span class="number">120</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">184</span>,<span class="string">'Nandita'</span>,<span class="string">'Sarchand'</span>,<span class="string">'NSARCHAN'</span>,<span class="string">'650.509.1876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">4200.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">185</span>,<span class="string">'Alexis'</span>,<span class="string">'Bull'</span>,<span class="string">'ABULL'</span>,<span class="string">'650.509.2876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">4100.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">186</span>,<span class="string">'Julia'</span>,<span class="string">'Dellinger'</span>,<span class="string">'JDELLING'</span>,<span class="string">'650.509.3876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3400.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">187</span>,<span class="string">'Anthony'</span>,<span class="string">'Cabrio'</span>,<span class="string">'ACABRIO'</span>,<span class="string">'650.509.4876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3000.00</span>,<span class="literal">NULL</span>,<span class="number">121</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">188</span>,<span class="string">'Kelly'</span>,<span class="string">'Chung'</span>,<span class="string">'KCHUNG'</span>,<span class="string">'650.505.1876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3800.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">189</span>,<span class="string">'Jennifer'</span>,<span class="string">'Dilly'</span>,<span class="string">'JDILLY'</span>,<span class="string">'650.505.2876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3600.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">190</span>,<span class="string">'Timothy'</span>,<span class="string">'Gates'</span>,<span class="string">'TGATES'</span>,<span class="string">'650.505.3876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">2900.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">191</span>,<span class="string">'Randall'</span>,<span class="string">'Perkins'</span>,<span class="string">'RPERKINS'</span>,<span class="string">'650.505.4876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">2500.00</span>,<span class="literal">NULL</span>,<span class="number">122</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">192</span>,<span class="string">'Sarah'</span>,<span class="string">'Bell'</span>,<span class="string">'SBELL'</span>,<span class="string">'650.501.1876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">4000.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">193</span>,<span class="string">'Britney'</span>,<span class="string">'Everett'</span>,<span class="string">'BEVERETT'</span>,<span class="string">'650.501.2876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3900.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">194</span>,<span class="string">'Samuel'</span>,<span class="string">'McCain'</span>,<span class="string">'SMCCAIN'</span>,<span class="string">'650.501.3876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3200.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">195</span>,<span class="string">'Vance'</span>,<span class="string">'Jones'</span>,<span class="string">'VJONES'</span>,<span class="string">'650.501.4876'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">2800.00</span>,<span class="literal">NULL</span>,<span class="number">123</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">196</span>,<span class="string">'Alana'</span>,<span class="string">'Walsh'</span>,<span class="string">'AWALSH'</span>,<span class="string">'650.507.9811'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3100.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">197</span>,<span class="string">'Kevin'</span>,<span class="string">'Feeney'</span>,<span class="string">'KFEENEY'</span>,<span class="string">'650.507.9822'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">3000.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">198</span>,<span class="string">'Donald'</span>,<span class="string">'OConnell'</span>,<span class="string">'DOCONNEL'</span>,<span class="string">'650.507.9833'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">2600.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">199</span>,<span class="string">'Douglas'</span>,<span class="string">'Grant'</span>,<span class="string">'DGRANT'</span>,<span class="string">'650.507.9844'</span>,<span class="string">'SH_CLERK'</span>,<span class="number">2600.00</span>,<span class="literal">NULL</span>,<span class="number">124</span>,<span class="number">50</span>,<span class="string">'2014-03-05 00:00:00'</span>),(<span class="number">200</span>,<span class="string">'Jennifer'</span>,<span class="string">'Whalen'</span>,<span class="string">'JWHALEN'</span>,<span class="string">'515.123.4444'</span>,<span class="string">'AD_ASST'</span>,<span class="number">4400.00</span>,<span class="literal">NULL</span>,<span class="number">101</span>,<span class="number">10</span>,<span class="string">'2016-03-03 00:00:00'</span>),(<span class="number">201</span>,<span class="string">'Michael'</span>,<span class="string">'Hartstein'</span>,<span class="string">'MHARTSTE'</span>,<span class="string">'515.123.5555'</span>,<span class="string">'MK_MAN'</span>,<span class="number">13000.00</span>,<span class="literal">NULL</span>,<span class="number">100</span>,<span class="number">20</span>,<span class="string">'2016-03-03 00:00:00'</span>),(<span class="number">202</span>,<span class="string">'Pat'</span>,<span class="string">'Fay'</span>,<span class="string">'PFAY'</span>,<span class="string">'603.123.6666'</span>,<span class="string">'MK_REP'</span>,<span class="number">6000.00</span>,<span class="literal">NULL</span>,<span class="number">201</span>,<span class="number">20</span>,<span class="string">'2016-03-03 00:00:00'</span>),(<span class="number">203</span>,<span class="string">'Susan'</span>,<span class="string">'Mavris'</span>,<span class="string">'SMAVRIS'</span>,<span class="string">'515.123.7777'</span>,<span class="string">'HR_REP'</span>,<span class="number">6500.00</span>,<span class="literal">NULL</span>,<span class="number">101</span>,<span class="number">40</span>,<span class="string">'2016-03-03 00:00:00'</span>),(<span class="number">204</span>,<span class="string">'Hermann'</span>,<span class="string">'Baer'</span>,<span class="string">'HBAER'</span>,<span class="string">'515.123.8888'</span>,<span class="string">'PR_REP'</span>,<span class="number">10000.00</span>,<span class="literal">NULL</span>,<span class="number">101</span>,<span class="number">70</span>,<span class="string">'2016-03-03 00:00:00'</span>),(<span class="number">205</span>,<span class="string">'Shelley'</span>,<span class="string">'Higgins'</span>,<span class="string">'SHIGGINS'</span>,<span class="string">'515.123.8080'</span>,<span class="string">'AC_MGR'</span>,<span class="number">12000.00</span>,<span class="literal">NULL</span>,<span class="number">101</span>,<span class="number">110</span>,<span class="string">'2016-03-03 00:00:00'</span>),(<span class="number">206</span>,<span class="string">'William'</span>,<span class="string">'Gietz'</span>,<span class="string">'WGIETZ'</span>,<span class="string">'515.123.8181'</span>,<span class="string">'AC_ACCOUNT'</span>,<span class="number">8300.00</span>,<span class="literal">NULL</span>,<span class="number">205</span>,<span class="number">110</span>,<span class="string">'2016-03-03 00:00:00'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `jobs` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`jobs`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`jobs`</span> (</span><br><span class="line">  <span class="string">`job_id`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`job_title`</span> <span class="built_in">varchar</span>(<span class="number">35</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`min_salary`</span> <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`max_salary`</span> <span class="built_in">int</span>(<span class="number">6</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`job_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=gb2312;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `jobs` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`jobs`</span>(<span class="string">`job_id`</span>,<span class="string">`job_title`</span>,<span class="string">`min_salary`</span>,<span class="string">`max_salary`</span>) <span class="keyword">values</span> (<span class="string">'AC_ACCOUNT'</span>,<span class="string">'Public Accountant'</span>,<span class="number">4200</span>,<span class="number">9000</span>),(<span class="string">'AC_MGR'</span>,<span class="string">'Accounting Manager'</span>,<span class="number">8200</span>,<span class="number">16000</span>),(<span class="string">'AD_ASST'</span>,<span class="string">'Administration Assistant'</span>,<span class="number">3000</span>,<span class="number">6000</span>),(<span class="string">'AD_PRES'</span>,<span class="string">'President'</span>,<span class="number">20000</span>,<span class="number">40000</span>),(<span class="string">'AD_VP'</span>,<span class="string">'Administration Vice President'</span>,<span class="number">15000</span>,<span class="number">30000</span>),(<span class="string">'FI_ACCOUNT'</span>,<span class="string">'Accountant'</span>,<span class="number">4200</span>,<span class="number">9000</span>),(<span class="string">'FI_MGR'</span>,<span class="string">'Finance Manager'</span>,<span class="number">8200</span>,<span class="number">16000</span>),(<span class="string">'HR_REP'</span>,<span class="string">'Human Resources Representative'</span>,<span class="number">4000</span>,<span class="number">9000</span>),(<span class="string">'IT_PROG'</span>,<span class="string">'Programmer'</span>,<span class="number">4000</span>,<span class="number">10000</span>),(<span class="string">'MK_MAN'</span>,<span class="string">'Marketing Manager'</span>,<span class="number">9000</span>,<span class="number">15000</span>),(<span class="string">'MK_REP'</span>,<span class="string">'Marketing Representative'</span>,<span class="number">4000</span>,<span class="number">9000</span>),(<span class="string">'PR_REP'</span>,<span class="string">'Public Relations Representative'</span>,<span class="number">4500</span>,<span class="number">10500</span>),(<span class="string">'PU_CLERK'</span>,<span class="string">'Purchasing Clerk'</span>,<span class="number">2500</span>,<span class="number">5500</span>),(<span class="string">'PU_MAN'</span>,<span class="string">'Purchasing Manager'</span>,<span class="number">8000</span>,<span class="number">15000</span>),(<span class="string">'SA_MAN'</span>,<span class="string">'Sales Manager'</span>,<span class="number">10000</span>,<span class="number">20000</span>),(<span class="string">'SA_REP'</span>,<span class="string">'Sales Representative'</span>,<span class="number">6000</span>,<span class="number">12000</span>),(<span class="string">'SH_CLERK'</span>,<span class="string">'Shipping Clerk'</span>,<span class="number">2500</span>,<span class="number">5500</span>),(<span class="string">'ST_CLERK'</span>,<span class="string">'Stock Clerk'</span>,<span class="number">2000</span>,<span class="number">5000</span>),(<span class="string">'ST_MAN'</span>,<span class="string">'Stock Manager'</span>,<span class="number">5500</span>,<span class="number">8500</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `locations` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`locations`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`locations`</span> (</span><br><span class="line">  <span class="string">`location_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`street_address`</span> <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`postal_code`</span> <span class="built_in">varchar</span>(<span class="number">12</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`city`</span> <span class="built_in">varchar</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`state_province`</span> <span class="built_in">varchar</span>(<span class="number">25</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`country_id`</span> <span class="built_in">varchar</span>(<span class="number">2</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`location_id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">3201</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=gb2312;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `locations` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`locations`</span>(<span class="string">`location_id`</span>,<span class="string">`street_address`</span>,<span class="string">`postal_code`</span>,<span class="string">`city`</span>,<span class="string">`state_province`</span>,<span class="string">`country_id`</span>) <span class="keyword">values</span> (<span class="number">1000</span>,<span class="string">'1297 Via Cola di Rie'</span>,<span class="string">'00989'</span>,<span class="string">'Roma'</span>,<span class="literal">NULL</span>,<span class="string">'IT'</span>),(<span class="number">1100</span>,<span class="string">'93091 Calle della Testa'</span>,<span class="string">'10934'</span>,<span class="string">'Venice'</span>,<span class="literal">NULL</span>,<span class="string">'IT'</span>),(<span class="number">1200</span>,<span class="string">'2017 Shinjuku-ku'</span>,<span class="string">'1689'</span>,<span class="string">'Tokyo'</span>,<span class="string">'Tokyo Prefecture'</span>,<span class="string">'JP'</span>),(<span class="number">1300</span>,<span class="string">'9450 Kamiya-cho'</span>,<span class="string">'6823'</span>,<span class="string">'Hiroshima'</span>,<span class="literal">NULL</span>,<span class="string">'JP'</span>),(<span class="number">1400</span>,<span class="string">'2014 Jabberwocky Rd'</span>,<span class="string">'26192'</span>,<span class="string">'Southlake'</span>,<span class="string">'Texas'</span>,<span class="string">'US'</span>),(<span class="number">1500</span>,<span class="string">'2011 Interiors Blvd'</span>,<span class="string">'99236'</span>,<span class="string">'South San Francisco'</span>,<span class="string">'California'</span>,<span class="string">'US'</span>),(<span class="number">1600</span>,<span class="string">'2007 Zagora St'</span>,<span class="string">'50090'</span>,<span class="string">'South Brunswick'</span>,<span class="string">'New Jersey'</span>,<span class="string">'US'</span>),(<span class="number">1700</span>,<span class="string">'2004 Charade Rd'</span>,<span class="string">'98199'</span>,<span class="string">'Seattle'</span>,<span class="string">'Washington'</span>,<span class="string">'US'</span>),(<span class="number">1800</span>,<span class="string">'147 Spadina Ave'</span>,<span class="string">'M5V 2L7'</span>,<span class="string">'Toronto'</span>,<span class="string">'Ontario'</span>,<span class="string">'CA'</span>),(<span class="number">1900</span>,<span class="string">'6092 Boxwood St'</span>,<span class="string">'YSW 9T2'</span>,<span class="string">'Whitehorse'</span>,<span class="string">'Yukon'</span>,<span class="string">'CA'</span>),(<span class="number">2000</span>,<span class="string">'40-5-12 Laogianggen'</span>,<span class="string">'190518'</span>,<span class="string">'Beijing'</span>,<span class="literal">NULL</span>,<span class="string">'CN'</span>),(<span class="number">2100</span>,<span class="string">'1298 Vileparle (E)'</span>,<span class="string">'490231'</span>,<span class="string">'Bombay'</span>,<span class="string">'Maharashtra'</span>,<span class="string">'IN'</span>),(<span class="number">2200</span>,<span class="string">'12-98 Victoria Street'</span>,<span class="string">'2901'</span>,<span class="string">'Sydney'</span>,<span class="string">'New South Wales'</span>,<span class="string">'AU'</span>),(<span class="number">2300</span>,<span class="string">'198 Clementi North'</span>,<span class="string">'540198'</span>,<span class="string">'Singapore'</span>,<span class="literal">NULL</span>,<span class="string">'SG'</span>),(<span class="number">2400</span>,<span class="string">'8204 Arthur St'</span>,<span class="literal">NULL</span>,<span class="string">'London'</span>,<span class="literal">NULL</span>,<span class="string">'UK'</span>),(<span class="number">2500</span>,<span class="string">'Magdalen Centre, The Oxford Science Park'</span>,<span class="string">'OX9 9ZB'</span>,<span class="string">'Oxford'</span>,<span class="string">'Oxford'</span>,<span class="string">'UK'</span>),(<span class="number">2600</span>,<span class="string">'9702 Chester Road'</span>,<span class="string">'09629850293'</span>,<span class="string">'Stretford'</span>,<span class="string">'Manchester'</span>,<span class="string">'UK'</span>),(<span class="number">2700</span>,<span class="string">'Schwanthalerstr. 7031'</span>,<span class="string">'80925'</span>,<span class="string">'Munich'</span>,<span class="string">'Bavaria'</span>,<span class="string">'DE'</span>),(<span class="number">2800</span>,<span class="string">'Rua Frei Caneca 1360 '</span>,<span class="string">'01307-002'</span>,<span class="string">'Sao Paulo'</span>,<span class="string">'Sao Paulo'</span>,<span class="string">'BR'</span>),(<span class="number">2900</span>,<span class="string">'20 Rue des Corps-Saints'</span>,<span class="string">'1730'</span>,<span class="string">'Geneva'</span>,<span class="string">'Geneve'</span>,<span class="string">'CH'</span>),(<span class="number">3000</span>,<span class="string">'Murtenstrasse 921'</span>,<span class="string">'3095'</span>,<span class="string">'Bern'</span>,<span class="string">'BE'</span>,<span class="string">'CH'</span>),(<span class="number">3100</span>,<span class="string">'Pieter Breughelstraat 837'</span>,<span class="string">'3029SK'</span>,<span class="string">'Utrecht'</span>,<span class="string">'Utrecht'</span>,<span class="string">'NL'</span>),(<span class="number">3200</span>,<span class="string">'Mariano Escobedo 9991'</span>,<span class="string">'11932'</span>,<span class="string">'Mexico City'</span>,<span class="string">'Distrito Federal,'</span>,<span class="string">'MX'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */</span>;</span><br></pre></td></tr></table></figure>



<h2 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h2><p><strong>语法：</strong></p>
<p>select 查询列表</p>
<p>from 表名</p>
<p><strong>特点：</strong></p>
<ol>
<li>查询列表可以是：表中的字段、常量值、表达式、函数</li>
<li>查询的结果是一个虚拟的表格</li>
</ol>
<p><strong>测试：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 查询表中的字段</span></span><br><span class="line"><span class="keyword">select</span> last_name</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 2. 查询表中的多个字段</span></span><br><span class="line"><span class="keyword">select</span> last_name, salary, email</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 3. 查询表中的所有字段</span></span><br><span class="line"><span class="keyword">select</span> employee_id,</span><br><span class="line">       first_name,</span><br><span class="line">       last_name,</span><br><span class="line">       email,</span><br><span class="line">       phone_number,</span><br><span class="line">       job_id,</span><br><span class="line">       salary,</span><br><span class="line">       commission_pct,</span><br><span class="line">       manager_id,</span><br><span class="line">       department_id,</span><br><span class="line">       hiredate</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 查询常量值</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="string">'john'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. 查询表达式</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span> % <span class="number">98</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. 查询函数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">VERSION</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. 起别名</span></span><br><span class="line"><span class="comment"># 方式1 使用as</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">100</span> % <span class="number">98</span> <span class="keyword">AS</span> 结果;</span><br><span class="line"><span class="keyword">select</span> last_name <span class="keyword">AS</span> 姓, first_name <span class="keyword">AS</span> 名</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 方式2 使用空格</span></span><br><span class="line"><span class="keyword">select</span> last_name 姓, first_name 名</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 案例：查询salary，显示结果为out put</span></span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">as</span> <span class="string">"out put"</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 8. 去重</span></span><br><span class="line"><span class="comment"># 案例：查询员工表中涉及到的所有部门编号</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> department_id</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 9. 加号（+）的作用</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> java中的+号：</span></span><br><span class="line"><span class="comment"> ①：运算符，两个操作数都为数值型</span></span><br><span class="line"><span class="comment"> ②：连接符，只要有一个操作数为字符串</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> mysql中的+号</span></span><br><span class="line"><span class="comment"> 仅仅有一个功能，就是运算符</span></span><br><span class="line"><span class="comment"> select 100+90; 两个操作数为数值型，则做加法运算</span></span><br><span class="line"><span class="comment"> select '123'+90; 其中一方为字符型，试图将字符型数值转换成数值型，如果转换成功，则继续做加法运算</span></span><br><span class="line"><span class="comment"> select 'john'+90; 如果转换失败，则将字符型转换为0</span></span><br><span class="line"><span class="comment"> select null+10; 只要其中一方为null，则结果肯定为null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment"># 案例：查询员工名和姓连接成一个字段，并显示为姓名</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>) <span class="keyword">AS</span> 结果;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(last_name, first_name) <span class="keyword">as</span> 姓名</span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>

<h2 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h2><p><strong>语法：</strong></p>
<p>select 查询列表</p>
<p>from 表名</p>
<p>where 筛选条件;</p>
<p><strong>分类：</strong></p>
<ol>
<li><p>按条件表达式筛选</p>
<p>条件运算符：&gt; &lt; = != &lt;&gt; &gt;= &lt;=</p>
</li>
<li><p>按逻辑表达式筛选</p>
<p>逻辑运算符：&amp;&amp; || ! and or not</p>
<p>作用：用于连接条件表达式</p>
</li>
<li><p>模糊查询</p>
<p>like</p>
<p>between and </p>
<p>in </p>
<p>is null</p>
</li>
<li><p>安全等于：&lt;=&gt;可以判断null值也可以判断普通数值</p>
</li>
</ol>
<p><strong>测试：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 条件查询</span></span><br><span class="line"><span class="comment"># 一、按条件表达式筛选</span></span><br><span class="line"><span class="comment"># 案例1：查询工资&gt;12000的员工信息</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary &gt; <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询部门编号不等于90号的员工名和部门编号 可以用&lt;&gt;或者!=</span></span><br><span class="line"><span class="keyword">select</span> last_name, department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id &lt;&gt; <span class="number">90</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 二、按逻辑表达式筛选</span></span><br><span class="line"><span class="comment"># 案例1：查询工资在10000到20000之间的员工名、工资及奖金</span></span><br><span class="line"><span class="keyword">select</span> last_name, salary, commission_pct</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary &gt;= <span class="number">10000</span></span><br><span class="line">  <span class="keyword">and</span> salary &lt;= <span class="number">20000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询部门编号不是在90到110之间，或者工资高于15000的员工信息</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id &lt; <span class="number">90</span></span><br><span class="line">   <span class="keyword">OR</span> department_id &gt; <span class="number">110</span></span><br><span class="line">   <span class="keyword">OR</span> salary &gt; <span class="number">15000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">NOT</span> (department_id &gt;= <span class="number">90</span> <span class="keyword">AND</span> department_id &lt;= <span class="number">110</span>)</span><br><span class="line">   <span class="keyword">OR</span> salary &gt; <span class="number">15000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 三、模糊查询</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    like:</span></span><br><span class="line"><span class="comment">    通配符：</span></span><br><span class="line"><span class="comment">        %：任意多个字符</span></span><br><span class="line"><span class="comment">        _：任意单个字符</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment"># 案例1：查询员工名中包含字符a的员工信息</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'%a%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询员工名中第三个字符为n，第五个字符为l的员工名和工资</span></span><br><span class="line"><span class="keyword">select</span> last_name, salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'__n_l%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例3：查询员工名中第二个字符为_的员工名（转义字符）</span></span><br><span class="line"><span class="comment"># 方式1：默认\转义</span></span><br><span class="line"><span class="keyword">select</span> last_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'_\_%'</span>;</span><br><span class="line"><span class="comment"># 方式2：指定转义字符$</span></span><br><span class="line"><span class="keyword">select</span> last_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> last_name <span class="keyword">like</span> <span class="string">'_$_%'</span> escape <span class="string">'$'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">     between and</span></span><br><span class="line"><span class="comment">     ①：使用between and 可以提高语句的简洁度</span></span><br><span class="line"><span class="comment">     ②：包含临界值</span></span><br><span class="line"><span class="comment">     ③：两个临界值不要调换顺序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment"># 案例1：查询员工编号在100到120之间的员工信息</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> employee_id &gt;= <span class="number">100</span></span><br><span class="line">  <span class="keyword">AND</span> employee_id &lt;= <span class="number">120</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> employee_id <span class="keyword">between</span> <span class="number">100</span> <span class="keyword">AND</span> <span class="number">120</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    in</span></span><br><span class="line"><span class="comment">    用于判断某字段的值是否属于in列表中的某一项</span></span><br><span class="line"><span class="comment">    ①：使用in提高语句简洁度</span></span><br><span class="line"><span class="comment">    ②：in列表的值类型必须统一或兼容</span></span><br><span class="line"><span class="comment">    ③：</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment"># 案例：查询员工的工种编号是 IT_PROG、AD_VP、AD_PRES中的一个的员工名和工种编号</span></span><br><span class="line"><span class="keyword">select</span> last_name, job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> job_id <span class="keyword">in</span> (<span class="string">'IT_PROG'</span>, <span class="string">'AD_VP'</span>, <span class="string">'AD_PRES'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    is null / is not null</span></span><br><span class="line"><span class="comment">    = 或者 &lt;&gt; 不能用于判断null值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment"># 案例1：查询没有奖金的员工名和奖金率</span></span><br><span class="line"><span class="keyword">select</span> last_name, commission_pct</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    安全等于    &lt;=&gt; 可以判断null值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment"># 案例1：查询没有奖金的员工名和奖金率</span></span><br><span class="line"><span class="keyword">select</span> last_name, commission_pct</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct &lt;=&gt; <span class="literal">null</span>;</span><br><span class="line"><span class="comment"># 案例2：查询工资为12000的员工信息</span></span><br><span class="line"><span class="keyword">select</span> last_name, salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary &lt;=&gt; <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 综合案例：</span></span><br><span class="line"><span class="comment"># 1. 查询工资大于12000的员工姓名和工资</span></span><br><span class="line"><span class="keyword">select</span> last_name, salary</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.salary &gt; <span class="number">12000</span>;</span><br><span class="line"><span class="comment"># 2. 查询员工号为176的员工的姓名和部门号以及年薪</span></span><br><span class="line"><span class="keyword">select</span> last_name, department_id, salary * <span class="number">12</span> * (<span class="number">1</span> + <span class="keyword">IFNULL</span>(commission_pct, <span class="number">0</span>)) 年薪</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.employee_id = <span class="number">176</span>;</span><br><span class="line"><span class="comment"># 3. 选择工资不在5000到12000的员工的姓名和工资</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name, emp.salary</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.salary <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">5000</span> <span class="keyword">and</span> <span class="number">12000</span>;</span><br><span class="line"><span class="comment"># 4. 选择在20或50号部门工作的员工姓名和部门号</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name, emp.department_id</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.employee_id <span class="keyword">between</span> <span class="number">20</span> <span class="keyword">and</span> <span class="number">50</span>;</span><br><span class="line"><span class="comment"># 5. 选择公司中没有管理者的员工姓名及job_id</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name, emp.job_id</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.manager_id <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment"># 6. 选择公司中有奖金的员工姓名、工资和奖金级别</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name, emp.salary, emp.commission_pct</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment"># 7. 选择员工姓名的第三个字母是a的员工姓名</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.last_name <span class="keyword">like</span> <span class="string">'__a%'</span>;</span><br><span class="line"><span class="comment"># 8. 选择姓名中有字母a和e的员工姓名</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.last_name <span class="keyword">like</span> <span class="string">'%a%'</span></span><br><span class="line">   <span class="keyword">OR</span> emp.last_name <span class="keyword">like</span> <span class="string">'%e%'</span>;</span><br><span class="line"><span class="comment"># 9. 显示出表employee中first_name以'e'结尾的员工信息</span></span><br><span class="line"><span class="keyword">select</span> first_name, last_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> first_name <span class="keyword">like</span> <span class="string">'%e'</span>;</span><br><span class="line"><span class="comment"># 10. 显示出employee中部门编号在80-100之间的姓名和职位</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name, emp.job_id</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.department_id <span class="keyword">between</span> <span class="number">80</span> <span class="keyword">and</span> <span class="number">100</span>;</span><br><span class="line"><span class="comment"># 11. 显示出employee的manager_id是100,101,110的员工姓名、职位</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name, emp.job_id</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.manager_id <span class="keyword">in</span> (<span class="number">100</span>, <span class="number">101</span>, <span class="number">110</span>);</span><br></pre></td></tr></table></figure>



<h3 id="测试题"><a href="#测试题" class="headerlink" title="测试题"></a>测试题</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一、查询没有奖金，工资小于18000的salary、last_name</span></span><br><span class="line"><span class="keyword">select</span> emp.salary, emp.last_name</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.commission_pct <span class="keyword">is</span> <span class="literal">null</span></span><br><span class="line">  <span class="keyword">AND</span> emp.salary &lt; <span class="number">1800</span>;</span><br><span class="line"><span class="comment"># 二、 查询employees表中，job_id不为“IT”或者工资为12000的员工信息</span></span><br><span class="line"><span class="keyword">select</span> emp.last_name,emp.job_id,emp.salary</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.job_id != <span class="string">'IT'</span> <span class="keyword">OR</span> emp.salary = <span class="number">12000</span>;</span><br><span class="line"><span class="comment"># 三、 查看部门departments表的结构</span></span><br><span class="line">desc departments;</span><br><span class="line"><span class="comment"># 四、查询部门departments表中涉及到了哪些位置编号</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> location_id</span><br><span class="line"><span class="keyword">from</span> departments;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 五、 经典面试题：</span></span><br><span class="line"><span class="comment"> 试问： select * from employees</span></span><br><span class="line"><span class="comment">        和  select * from employees where commission_pct like '%%" and last_name like '%%';</span></span><br><span class="line"><span class="comment">        结果是否一样？说明原因</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees <span class="keyword">where</span> commission_pct <span class="keyword">like</span> <span class="string">'%%'</span> <span class="keyword">and</span> last_name <span class="keyword">like</span> <span class="string">'%%'</span>;</span><br><span class="line"><span class="comment"># 答案是不一样，如果判断的值里有null值，则会不一样，如果都是or关键字就一样；</span></span><br></pre></td></tr></table></figure>



<h2 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h2><p> <strong>语法：</strong></p>
<p>select 查询列表</p>
<p>from 表</p>
<p>【where 筛选条件】</p>
<p>order by 排序列表 asc(升序<strong>默认</strong>)|desc(降序)</p>
<p><strong>支持按表达式排序、按别名排序、按函数排序、多个字段排序</strong></p>
<p><strong>测试：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 排序查询</span></span><br><span class="line"><span class="keyword">use</span> myemployees;</span><br><span class="line"><span class="comment"># 案例1：查询员工信息，要求工资从高到低排序</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> emp.salary <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询部门编号&gt;=90的员工信息，按入职时间的先后进行排序【添加了筛选条件】</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">where</span> emp.department_id &gt;= <span class="number">90</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> hiredate <span class="keyword">asc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例3：按年薪的高低显示员工的信息和年薪【按表达式排序】</span></span><br><span class="line"><span class="keyword">select</span> emp.*, emp.salary * <span class="number">12</span> * (<span class="number">1</span> + <span class="keyword">ifnull</span>(emp.commission_pct, <span class="number">0</span>)) year_salary</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> emp.salary * <span class="number">12</span> * (<span class="number">1</span> + <span class="keyword">ifnull</span>(emp.commission_pct, <span class="number">0</span>)) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例4：按年薪的高低显示员工的信息和年薪【按别名排序】</span></span><br><span class="line"><span class="keyword">select</span> emp.*, emp.salary * <span class="number">12</span> * (<span class="number">1</span> + <span class="keyword">ifnull</span>(emp.commission_pct, <span class="number">0</span>)) year_salary</span><br><span class="line"><span class="keyword">from</span> employees emp</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> year_salary <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例5：按姓名的长度显示员工的姓名和工资【按函数排序】</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(last_name) 字节长度, last_name, salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 字节长度 <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例6：查询员工信息，要求先按工资排序[升序]，再按员工编号排序[降序]【按多个字段排序】</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary, employee_id <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>



<h3 id="测试题-1"><a href="#测试题-1" class="headerlink" title="测试题"></a>测试题</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="comment"># 1. 查询员工的姓名和部门号以及年薪，按年薪降序、姓名升序</span></span><br><span class="line"><span class="keyword">select</span> last_name, department_id, salary * <span class="number">12</span> * (<span class="number">1</span> + <span class="keyword">ifnull</span>(commission_pct, <span class="number">0</span>)) 年薪</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 年薪 <span class="keyword">desc</span>, last_name <span class="keyword">asc</span>;</span><br><span class="line"><span class="comment"># 2. 选择工资不再8000到17000的员工的姓名和工资，按工资降序</span></span><br><span class="line"><span class="keyword">select</span> last_name, salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.salary <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">8000</span> <span class="keyword">and</span> <span class="number">17000</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment"># 3. 查询邮箱中包含e的员工信息，并先按邮箱的字节数降序，再按部门号升序</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.email <span class="keyword">like</span> <span class="string">'%e%'</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">length</span>(e.email) <span class="keyword">desc</span>, e.department_id;</span><br></pre></td></tr></table></figure>



<h2 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h2><p><strong>概念</strong>：类似于java中的方法，将一组逻辑语句封装在方法体中，对外暴露方法名</p>
<p><strong>好处：</strong></p>
<ol>
<li>隐藏了实现细节</li>
<li>提高代码的重用性</li>
</ol>
<p><strong>调用：</strong>select 函数名(实参列表)【from表】;</p>
<p><strong>特点：</strong></p>
<ol>
<li>叫什么（函数名）</li>
<li>干什么（函数功能）</li>
</ol>
<p><strong>分类：</strong></p>
<ol>
<li><p>单行函数</p>
<p>concat、length、ifnull等</p>
</li>
<li><p>分组函数</p>
<p>主要用于统计使用，又称为统计函数、聚合函数、组函数</p>
</li>
</ol>
<h3 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h3><h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. length()：获取参数值的字节个数，utf-8一个中文3个字节</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(<span class="string">'john'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(<span class="string">'张三丰hahaha'</span>);</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">variables</span> <span class="keyword">like</span> <span class="string">'%char%'</span>;</span><br></pre></td></tr></table></figure>



<h4 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. concat 拼接字符串</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(last_name, <span class="string">'_'</span>, first_name) 姓名</span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h4 id="upper、lower"><a href="#upper、lower" class="headerlink" title="upper、lower"></a>upper、lower</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. upper、lower 大小写转换</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">upper</span>(<span class="string">'john'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">lower</span>(<span class="string">'JoHn'</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(<span class="keyword">upper</span>(last_name), <span class="keyword">lower</span>(first_name)) 姓名</span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h4 id="substr、substring"><a href="#substr、substring" class="headerlink" title="substr、substring"></a>substr、substring</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4. substr、substring 截取字符 4个重载，字符长度</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'李莫愁爱上了陆展元'</span>, <span class="number">7</span>) out_put;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(<span class="string">'李莫愁爱上了陆展元'</span>, <span class="number">1</span>, <span class="number">3</span>) out_put;</span><br><span class="line"><span class="comment"># 案例：姓名中首字符大写，其他字符小写，然后用下划线_拼接显示出来</span></span><br><span class="line"><span class="keyword">select</span> last_name, <span class="keyword">concat</span>(<span class="keyword">upper</span>(<span class="keyword">substr</span>(last_name, <span class="number">1</span>, <span class="number">1</span>)), <span class="string">'_'</span>, <span class="keyword">lower</span>(<span class="keyword">substr</span>(last_name, <span class="number">2</span>))) 结果</span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h4 id="instr"><a href="#instr" class="headerlink" title="instr"></a>instr</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5. instr：返回子串第一次出现的位置，如果找不到就返回0</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">instr</span>(<span class="string">'杨不悔爱上了殷六侠'</span>, <span class="string">'殷六侠'</span>);</span><br></pre></td></tr></table></figure>



<h4 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 6. trim：去前后空格</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(<span class="keyword">trim</span>(<span class="string">'       张翠山     '</span>)), <span class="keyword">trim</span>(<span class="string">'       张翠山     '</span>) <span class="keyword">as</span> out_put;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">trim</span>(<span class="string">'a'</span> <span class="keyword">from</span> <span class="string">'aaaaaaaaaaaa张aaaaaaa翠山aaaaa'</span>) <span class="keyword">as</span> out_put;</span><br></pre></td></tr></table></figure>



<h4 id="lpad、rpad"><a href="#lpad、rpad" class="headerlink" title="lpad、rpad"></a>lpad、rpad</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 7. lpad：用指定的字符实现左填充指定长度，超过则截断</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">lpad</span>(<span class="string">'殷素素'</span>,<span class="number">10</span>,<span class="string">'*'</span>) <span class="keyword">as</span> out_put;</span><br><span class="line"><span class="comment"># 8. rpad：用指定的字符实现左填充指定长度，超过则截断</span></span><br><span class="line"><span class="keyword">select</span> rpad(<span class="string">'殷素素'</span>,<span class="number">12</span>,<span class="string">'ab'</span>) <span class="keyword">as</span> out_put;</span><br></pre></td></tr></table></figure>



<h4 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 9. replace 所有都会替换</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">replace</span>(<span class="string">'周芷若-张无忌爱上了周芷若'</span>,<span class="string">'周芷若'</span>,<span class="string">'赵敏'</span>) <span class="keyword">as</span> out_put;</span><br></pre></td></tr></table></figure>



<h3 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h3><h4 id="round"><a href="#round" class="headerlink" title="round"></a>round</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. round 四舍五入</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">-1.65</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">round</span>(<span class="number">1.567</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>



<h4 id="ceil"><a href="#ceil" class="headerlink" title="ceil"></a>ceil</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. ceil 向上取整，返回&gt;=该参数的最小整数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ceil</span>(<span class="number">1.002</span>); <span class="comment"># 2</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">ceil</span>(<span class="number">-1.002</span>);<span class="comment"># -1</span></span><br></pre></td></tr></table></figure>



<h4 id="floor"><a href="#floor" class="headerlink" title="floor"></a>floor</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. floor 向下取整，返回&lt;=该参数的最大整数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">floor</span>(<span class="number">9.99</span>); <span class="comment">#9</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">floor</span>(<span class="number">-9.99</span>);<span class="comment"># 10</span></span><br></pre></td></tr></table></figure>



<h4 id="truncate"><a href="#truncate" class="headerlink" title="truncate"></a>truncate</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4. truncate 截断    保留几位小数，直接截断</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">truncate</span>(<span class="number">1.65</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure>



<h4 id="mod"><a href="#mod" class="headerlink" title="mod"></a>mod</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5. mod取余  a%b a-a/b*b</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">MOD</span>(<span class="number">10</span>,<span class="number">3</span>);<span class="comment"># 1</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">mod</span> (<span class="number">-10</span>,<span class="number">3</span>);<span class="comment"># -1</span></span><br></pre></td></tr></table></figure>



<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><table>
<thead>
<tr>
<th>序号</th>
<th>格式符</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>%Y</td>
<td>四位的年份</td>
</tr>
<tr>
<td>2</td>
<td>%y</td>
<td>两位的年份</td>
</tr>
<tr>
<td>3</td>
<td>%m</td>
<td>月份（01,02,03……11,12）</td>
</tr>
<tr>
<td>4</td>
<td>%c</td>
<td>月份（1,2,3……11,12）</td>
</tr>
<tr>
<td>5</td>
<td>%d</td>
<td>日（01,02,03……）</td>
</tr>
<tr>
<td>6</td>
<td>%H</td>
<td>小时（24小时制）</td>
</tr>
<tr>
<td>7</td>
<td>%h</td>
<td>小时（12小时制）</td>
</tr>
<tr>
<td>8</td>
<td>%i</td>
<td>分钟（00,01……59）</td>
</tr>
<tr>
<td>9</td>
<td>%s</td>
<td>秒（00,01……59）</td>
</tr>
</tbody></table>
<h4 id="now"><a href="#now" class="headerlink" title="now"></a>now</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. now 返回当前系统日期+时间</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>();</span><br></pre></td></tr></table></figure>



<h4 id="curdate-current-date"><a href="#curdate-current-date" class="headerlink" title="curdate/current_date"></a>curdate/current_date</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. curdate/current_date 返回当前系统日期，不包含时间</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">curdate</span>();</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">current_date</span>();</span><br></pre></td></tr></table></figure>



<h4 id="curtime-current-time"><a href="#curtime-current-time" class="headerlink" title="curtime/current_time"></a>curtime/current_time</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. curtime/current_time 返回当前系统时间，不包含日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">curtime</span>();</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">current_time</span>();</span><br></pre></td></tr></table></figure>



<h4 id="year-month-day-hour-minute-second"><a href="#year-month-day-hour-minute-second" class="headerlink" title="year/month/day/hour/minute/second"></a>year/month/day/hour/minute/second</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 4. year/month/day/hour/minute/second获取指定部分——年月日、时分秒</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(<span class="keyword">now</span>()) 年;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(<span class="string">'1998-1-1'</span>) 年;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(hiredate) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(hiredate) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> MONTHNAME(hiredate) <span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h4 id="str-to-date"><a href="#str-to-date" class="headerlink" title="str_to_date"></a>str_to_date</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5. str_to_date：将日期格式的字符转换成指定格式的日期</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">str_to_date</span>(<span class="string">'1998-3-2 1'</span>,<span class="string">'%Y-%c-%d %h'</span>);</span><br><span class="line"><span class="comment"># 案例：查询入职日期为1992-4-3的员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> hiredate=<span class="string">'1992-4-3'</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> employees <span class="keyword">where</span> hiredate=<span class="keyword">str_to_date</span>(<span class="string">'4-3 1992'</span>,<span class="string">'%c-%d %Y'</span>);</span><br></pre></td></tr></table></figure>



<h4 id="date-format"><a href="#date-format" class="headerlink" title="date_format"></a>date_format</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 6. date_format：将日期转换成字符</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_format</span>(<span class="keyword">now</span>(),<span class="string">'%Y年%m月%d日'</span>);</span><br><span class="line"><span class="comment"># 案例：查询有奖金的员工名和入职日期（xx月/xx日 xx年）</span></span><br><span class="line"><span class="keyword">select</span> last_name,<span class="keyword">DATE_FORMAT</span>(hiredate,<span class="string">'%m月/%d日 %y年'</span>)</span><br><span class="line"><span class="keyword">from</span> employees <span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>



<h3 id="其他函数【补充】"><a href="#其他函数【补充】" class="headerlink" title="其他函数【补充】"></a>其他函数【补充】</h3><h4 id="version"><a href="#version" class="headerlink" title="version"></a>version</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 查看当前数据库版本</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">version</span>();</span><br></pre></td></tr></table></figure>



<h4 id="database"><a href="#database" class="headerlink" title="database"></a>database</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 查看当前所在数据库</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">database</span>();</span><br></pre></td></tr></table></figure>



<h4 id="user"><a href="#user" class="headerlink" title="user"></a>user</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 当面用户</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>();</span><br></pre></td></tr></table></figure>



<h3 id="流程控制函数【补充】"><a href="#流程控制函数【补充】" class="headerlink" title="流程控制函数【补充】"></a>流程控制函数【补充】</h3><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. if函数：类似三目运算符   表达式1结果为true则返回表达式2的值，false则返回表达式3的值</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">if</span>(<span class="number">10</span>&lt;<span class="number">5</span>,<span class="string">'真'</span>,<span class="string">'假'</span>);</span><br><span class="line"><span class="comment"># 案例：有奖金则返回有，否则返回无</span></span><br><span class="line"><span class="keyword">select</span> last_name,commission_pct,<span class="keyword">if</span>(commission_pct <span class="keyword">is</span> <span class="literal">null</span>,<span class="string">'无奖金'</span>,<span class="string">'有奖金'</span>)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h4 id="case"><a href="#case" class="headerlink" title="case"></a>case</h4><p><strong>语法一：</strong></p>
<p>case 要判断的字段或表达式</p>
<p>when 常量1 then 要显示的值1或语句1;</p>
<p>when 常量2 then 要显示的值2或语句2;</p>
<p>…</p>
<p>else 要显示的值n或语句n;</p>
<p>end</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. case函数的使用一：switch case的效果</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    案例：查询员工的工资，要求</span></span><br><span class="line"><span class="comment">    部门号=30，显示的工资为1.1倍</span></span><br><span class="line"><span class="comment">    部门号=40，显示的工资为1.2倍</span></span><br><span class="line"><span class="comment">    部门号=50，显示的工资为1.3倍</span></span><br><span class="line"><span class="comment">    其他部门，显示的工资为原工资</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">select</span> salary,</span><br><span class="line">       department_id,</span><br><span class="line">       <span class="keyword">case</span> department_id <span class="keyword">when</span> <span class="number">30</span> <span class="keyword">then</span> salary * <span class="number">1.1</span> <span class="keyword">when</span> <span class="number">40</span> <span class="keyword">then</span> salary * <span class="number">1.2</span> <span class="keyword">when</span> <span class="number">50</span> <span class="keyword">then</span> salary * <span class="number">1.3</span> <span class="keyword">else</span> salary <span class="keyword">end</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<p><strong>语法二：</strong></p>
<p>case</p>
<p>when 条件1 then 要显示的值1或语句1;</p>
<p>when 条件2 then 要显示的值2或语句2;</p>
<p>…</p>
<p>else 要显示的值n或语句n;</p>
<p>end</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. case函数的使用二：类似于 if-else if-else</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    案例：查询员工的工资情况</span></span><br><span class="line"><span class="comment">    如果工资&gt;20000，显示A级别</span></span><br><span class="line"><span class="comment">    如果工资&gt;15000，显示B级别</span></span><br><span class="line"><span class="comment">    如果工资&gt;10000，显示C级别</span></span><br><span class="line"><span class="comment">    否则，显示D级别</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">select</span> salary,</span><br><span class="line">       <span class="keyword">case</span> <span class="keyword">when</span> salary &gt; <span class="number">20000</span> <span class="keyword">then</span> <span class="string">'A'</span> <span class="keyword">when</span> salary &gt; <span class="number">15000</span> <span class="keyword">then</span> <span class="string">'B'</span> <span class="keyword">when</span> salary &gt; <span class="number">10000</span> <span class="keyword">then</span> <span class="string">'C'</span> <span class="keyword">else</span> <span class="string">'D'</span> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h3 id="综合测试"><a href="#综合测试" class="headerlink" title="综合测试"></a>综合测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 综合测试</span></span><br><span class="line"><span class="comment"># 1. 显示系统时间（注：日期+时间）</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>();</span><br><span class="line"><span class="comment"># 2. 查询员工号、姓名、工资、工资提高百分之20%之后的结果</span></span><br><span class="line"><span class="keyword">select</span> employee_id, last_name, salary, salary * <span class="number">1.2</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 3. 将员工的姓名按首字母排序，并写出姓名的长度</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">substr</span>(last_name, <span class="number">1</span>, <span class="number">1</span>) 首字符, last_name, <span class="keyword">length</span>(last_name)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 首字符;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  4. 做一个查询，产生下面的结果：</span></span><br><span class="line"><span class="comment">  &lt;last_name&gt;earns&lt;salary&gt;monthly but wants&lt;salary*3&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">CONCAT</span>(last_name, <span class="string">' earns '</span>, salary, <span class="string">' monthly but wants '</span>, salary * <span class="number">3</span>)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  5. 使用case-when，按照下面条件</span></span><br><span class="line"><span class="comment">    job_id      grade</span></span><br><span class="line"><span class="comment">    AD_PRES     A</span></span><br><span class="line"><span class="comment">    ST_MAN      B</span></span><br><span class="line"><span class="comment">    IT_PROG     C</span></span><br><span class="line"><span class="comment">    SA_REP      D</span></span><br><span class="line"><span class="comment">    ST_CLERK    E</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">select</span> last_name,</span><br><span class="line">       job_id,</span><br><span class="line">       <span class="keyword">case</span></span><br><span class="line">           <span class="keyword">when</span> job_id = <span class="string">'AD_PRES'</span> <span class="keyword">then</span> <span class="string">'A'</span></span><br><span class="line">           <span class="keyword">when</span> job_id = <span class="string">'ST_MAN'</span> <span class="keyword">then</span> <span class="string">'B'</span></span><br><span class="line">           <span class="keyword">when</span> job_id = <span class="string">'IT_PROG'</span> <span class="keyword">then</span> <span class="string">'C'</span></span><br><span class="line">           <span class="keyword">when</span> job_id = <span class="string">'SA_REP'</span> <span class="keyword">then</span> <span class="string">'D'</span></span><br><span class="line">           <span class="keyword">when</span> job_id = <span class="string">'ST_CLERK'</span> <span class="keyword">then</span> <span class="string">'E'</span></span><br><span class="line">           <span class="keyword">end</span> <span class="keyword">AS</span> grade</span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h2 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h2><p><strong>功能：</strong>用于统计使用，又称为聚合函数、统计函数、组函数</p>
<p><strong>分类：</strong></p>
<ul>
<li>sum：求和</li>
<li>avg：平均值</li>
<li>max：最大值</li>
<li>min：最小值</li>
<li>count：计算个数</li>
</ul>
<p><strong>特点：</strong></p>
<ol>
<li><strong>sum、avg</strong>一般用于处理<strong>数值型</strong></li>
<li><strong>max、min、count</strong>可以处理<strong>任何类型</strong></li>
<li>以上函数都会<strong>自动忽略null值</strong></li>
<li>可以和distinct搭配使用</li>
<li>count函数单独介绍<ul>
<li>count(字段)：可以统计单个字段行数（非null才会统计）</li>
<li>count(*)：统计行数，只要有一行的一个字段不为空就会被统计，所以就是所有记录数</li>
<li>count(1)：相当于临时加上一列，所有的值都为1，也用于统计行数；</li>
<li>效率：<ul>
<li>MYISAM存储引擎下：count(*)效率最高</li>
<li>INNODB存储引擎下：count(*)和count(1)效率差不多，但是比count(字段)高一些；</li>
</ul>
</li>
</ul>
</li>
<li>和分组函数一同查询的字段有限制，一般要求是group by之后的字段</li>
</ol>
<h3 id="sum-avg-max-min-count使用"><a href="#sum-avg-max-min-count使用" class="headerlink" title="sum/avg/max/min/count使用"></a>sum/avg/max/min/count使用</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分组函数</span></span><br><span class="line"><span class="keyword">use</span> myemployees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 简单使用</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> employees e;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(salary), <span class="keyword">avg</span>(salary), <span class="keyword">max</span>(salary), <span class="keyword">min</span>(salary), <span class="keyword">count</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(salary), <span class="keyword">round</span>(<span class="keyword">avg</span>(salary), <span class="number">2</span>), <span class="keyword">max</span>(salary), <span class="keyword">min</span>(salary), <span class="keyword">count</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 参数支持哪些类型</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(last_name), <span class="keyword">avg</span>(last_name)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(hiredate), <span class="keyword">avg</span>(hiredate)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(last_name), <span class="keyword">min</span>(last_name)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(hiredate), <span class="keyword">min</span>(hiredate)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(commission_pct)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(last_name)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 是否忽略null值</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(commission_pct), <span class="keyword">avg</span>(commission_pct), <span class="keyword">sum</span>(commission_pct) / <span class="number">35</span>, <span class="keyword">sum</span>(commission_pct) / <span class="number">107</span></span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(commission_pct), <span class="keyword">min</span>(commission_pct)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(commission_pct)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. 和distinct搭配使用</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(<span class="keyword">distinct</span> salary), <span class="keyword">sum</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(<span class="keyword">distinct</span> salary), <span class="keyword">count</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h3 id="综合测试-1"><a href="#综合测试-1" class="headerlink" title="综合测试"></a>综合测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 综合测试</span></span><br><span class="line"><span class="comment"># 1. 查询公司员工工资的最大值、最小值、平均值、总和</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(salary), <span class="keyword">min</span>(salary), <span class="keyword">avg</span>(salary), <span class="keyword">sum</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 2. 查询员工表中的最大入职时间和最小入职时间的相差天数（DATEDIFF）</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(hiredate),<span class="keyword">min</span>(hiredate),<span class="keyword">DATEDIFF</span>(<span class="keyword">max</span>(hiredate),<span class="keyword">min</span>(hiredate))</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 3. 查询部门编号为90的员工个数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id=<span class="number">90</span>;</span><br></pre></td></tr></table></figure>



<h2 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h2><p>比如查询每个部门的平均工资等操作，需要对部门进行分组；</p>
<p><strong>语法：</strong></p>
<p>select column,group_function(column)</p>
<p>from table</p>
<p>[where condition]</p>
<p>[group by group_by_expression]</p>
<p>[having condition]</p>
<p>[order by column]</p>
<p><strong>明确：WHERE条件一定要放在FROM后面</strong>；</p>
<p><strong>注意：</strong></p>
<p>查询列表比较特殊，要求是分组函数或者group by后面出现的字段</p>
<p><strong>特点：</strong></p>
<ol>
<li>分组查询中的筛选条件分为两类（数据源不同）<ul>
<li>分组前筛选（原始表）where，在from后面，group by前面</li>
<li>分组后筛选（分组后的结果集）having，在group by后面</li>
</ul>
</li>
<li>分组函数做条件肯定是放在having子句中；</li>
<li>能用分组前筛选的，优先考虑使用分组前筛选，性能更好</li>
<li>group by 子句支持单个字段分组、多个字段分组（多个字段之间用逗号隔开，没有顺序要求），表达式跟函数也支持（用的比较少）；</li>
<li>也可以添加排序，放在整个分组查询的最后；</li>
</ol>
<h3 id="简单的分组查询"><a href="#简单的分组查询" class="headerlink" title="简单的分组查询"></a>简单的分组查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例1：查询每个工种的最高工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(salary), job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_id;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询每个位置上的部门个数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*), location_id</span><br><span class="line"><span class="keyword">from</span> departments</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> location_id;</span><br></pre></td></tr></table></figure>


<h3 id="添加分组前的筛选条件"><a href="#添加分组前的筛选条件" class="headerlink" title="添加分组前的筛选条件"></a>添加分组前的筛选条件</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例1：查询邮箱中包含a字符的，每个部门的平均工资</span></span><br><span class="line"><span class="keyword">select</span> department_id, <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> email <span class="keyword">like</span> <span class="string">'%a'</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询有奖金的每个领导手下员工的最高工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(salary), manager_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> manager_id;</span><br></pre></td></tr></table></figure>

<h3 id="添加分组后的筛选条件"><a href="#添加分组后的筛选条件" class="headerlink" title="添加分组后的筛选条件"></a>添加分组后的筛选条件</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例1：查询哪个部门的员工个数&gt;2</span></span><br><span class="line"><span class="comment"># ①：查询每个部门的员工个数</span></span><br><span class="line"><span class="keyword">select</span> department_id, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br><span class="line"><span class="comment"># ②：根据①得到的结果进行筛选，查询哪些部门的员工个数&gt;2</span></span><br><span class="line"><span class="keyword">select</span> department_id, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询每个工种有奖金的员工，且最高工资&gt;12000的工种编号和最高工资</span></span><br><span class="line"><span class="keyword">select</span> job_id, <span class="keyword">max</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">max</span>(salary) &gt; <span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例3：领导编号&gt;102的每个领导手下的最低工资&gt;5000的领导编号是哪个，以及其最低工资</span></span><br><span class="line"><span class="keyword">select</span> manager_id, <span class="keyword">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> manager_id &gt; <span class="number">102</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> manager_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">min</span>(salary) &gt; <span class="number">5000</span>;</span><br></pre></td></tr></table></figure>

<h3 id="按表达式或函数分组"><a href="#按表达式或函数分组" class="headerlink" title="按表达式或函数分组"></a>按表达式或函数分组</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数&gt;5的有哪些</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">length</span>(last_name), <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="keyword">length</span>(last_name)</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<h3 id="按多个字段分组"><a href="#按多个字段分组" class="headerlink" title="按多个字段分组"></a>按多个字段分组</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 案例：查询每个部门每个工种的员工的平均工资</span></span><br><span class="line"><span class="keyword">select</span> department_id, job_id, <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id, job_id;</span><br></pre></td></tr></table></figure>

<h3 id="添加排序"><a href="#添加排序" class="headerlink" title="添加排序"></a>添加排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 案例：查询每个部门每个工种的员工的平均工资，部门不为null且平均工资高于10000，并且按平均工资的降序排序</span></span><br><span class="line"><span class="keyword">select</span> department_id, job_id, <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id, job_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(salary) &gt; <span class="number">10000</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(salary) <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h3 id="综合测试-2"><a href="#综合测试-2" class="headerlink" title="综合测试"></a>综合测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 综合测试</span></span><br><span class="line"><span class="comment"># 1. 查询各个job_id的员工工资的最大值、最小值、平均值、总和，并按job_id排序</span></span><br><span class="line"><span class="keyword">select</span> job_id, <span class="keyword">max</span>(salary), <span class="keyword">min</span>(salary), <span class="keyword">avg</span>(salary), <span class="keyword">sum</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> job_id;</span><br><span class="line"><span class="comment"># 2. 查询员工最高工资和最低工资的差距</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(salary) - <span class="keyword">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 3. 查询各个管理者手下员工的最低工资，其中最低工资不能低于6000，没有管理者的员工不计算在内</span></span><br><span class="line"><span class="keyword">select</span> manager_id, <span class="keyword">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> manager_id <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> manager_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">min</span>(salary) &gt;= <span class="number">6000</span>;</span><br><span class="line"><span class="comment"># 4. 查询所有部门的编号，员工数量和工资平均值，并按平均工资降序排序</span></span><br><span class="line"><span class="keyword">select</span> department_id, <span class="keyword">count</span>(*), <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br><span class="line"><span class="comment"># 5. 选择各个job_id的员工人数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*),job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_id;</span><br></pre></td></tr></table></figure>



<h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><p>多表连接，当查询的字段来自多个表自然就要用到连接查询；</p>
<p>先导入表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">SQLyog Ultimate v10.00 Beta1</span></span><br><span class="line"><span class="comment">MySQL - 5.7.18-log : Database - girls</span></span><br><span class="line"><span class="comment">*********************************************************************</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET NAMES utf8 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=''*/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */</span>;</span><br><span class="line"><span class="comment">/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="comment">/*!32312 IF NOT EXISTS*/</span><span class="string">`girls`</span> <span class="comment">/*!40100 DEFAULT CHARACTER SET utf8 */</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">USE</span> <span class="string">`girls`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `admin` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`admin`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`admin`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">3</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `admin` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`admin`</span>(<span class="string">`id`</span>,<span class="string">`username`</span>,<span class="string">`password`</span>) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">'john'</span>,<span class="string">'8888'</span>),(<span class="number">2</span>,<span class="string">'lyt'</span>,<span class="string">'6666'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `beauty` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`beauty`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`beauty`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`sex`</span> <span class="built_in">char</span>(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="string">'女'</span>,</span><br><span class="line">  <span class="string">`borndate`</span> datetime <span class="keyword">DEFAULT</span> <span class="string">'1987-01-01 00:00:00'</span>,</span><br><span class="line">  <span class="string">`phone`</span> <span class="built_in">varchar</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`photo`</span> <span class="built_in">blob</span>,</span><br><span class="line">  <span class="string">`boyfriend_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">13</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `beauty` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`beauty`</span>(<span class="string">`id`</span>,<span class="string">`name`</span>,<span class="string">`sex`</span>,<span class="string">`borndate`</span>,<span class="string">`phone`</span>,<span class="string">`photo`</span>,<span class="string">`boyfriend_id`</span>) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">'柳岩'</span>,<span class="string">'女'</span>,<span class="string">'1988-02-03 00:00:00'</span>,<span class="string">'18209876577'</span>,<span class="literal">NULL</span>,<span class="number">8</span>),(<span class="number">2</span>,<span class="string">'苍老师'</span>,<span class="string">'女'</span>,<span class="string">'1987-12-30 00:00:00'</span>,<span class="string">'18219876577'</span>,<span class="literal">NULL</span>,<span class="number">9</span>),(<span class="number">3</span>,<span class="string">'Angelababy'</span>,<span class="string">'女'</span>,<span class="string">'1989-02-03 00:00:00'</span>,<span class="string">'18209876567'</span>,<span class="literal">NULL</span>,<span class="number">3</span>),(<span class="number">4</span>,<span class="string">'热巴'</span>,<span class="string">'女'</span>,<span class="string">'1993-02-03 00:00:00'</span>,<span class="string">'18209876579'</span>,<span class="literal">NULL</span>,<span class="number">2</span>),(<span class="number">5</span>,<span class="string">'周冬雨'</span>,<span class="string">'女'</span>,<span class="string">'1992-02-03 00:00:00'</span>,<span class="string">'18209179577'</span>,<span class="literal">NULL</span>,<span class="number">9</span>),(<span class="number">6</span>,<span class="string">'周芷若'</span>,<span class="string">'女'</span>,<span class="string">'1988-02-03 00:00:00'</span>,<span class="string">'18209876577'</span>,<span class="literal">NULL</span>,<span class="number">1</span>),(<span class="number">7</span>,<span class="string">'岳灵珊'</span>,<span class="string">'女'</span>,<span class="string">'1987-12-30 00:00:00'</span>,<span class="string">'18219876577'</span>,<span class="literal">NULL</span>,<span class="number">9</span>),(<span class="number">8</span>,<span class="string">'小昭'</span>,<span class="string">'女'</span>,<span class="string">'1989-02-03 00:00:00'</span>,<span class="string">'18209876567'</span>,<span class="literal">NULL</span>,<span class="number">1</span>),(<span class="number">9</span>,<span class="string">'双儿'</span>,<span class="string">'女'</span>,<span class="string">'1993-02-03 00:00:00'</span>,<span class="string">'18209876579'</span>,<span class="literal">NULL</span>,<span class="number">9</span>),(<span class="number">10</span>,<span class="string">'王语嫣'</span>,<span class="string">'女'</span>,<span class="string">'1992-02-03 00:00:00'</span>,<span class="string">'18209179577'</span>,<span class="literal">NULL</span>,<span class="number">4</span>),(<span class="number">11</span>,<span class="string">'夏雪'</span>,<span class="string">'女'</span>,<span class="string">'1993-02-03 00:00:00'</span>,<span class="string">'18209876579'</span>,<span class="literal">NULL</span>,<span class="number">9</span>),(<span class="number">12</span>,<span class="string">'赵敏'</span>,<span class="string">'女'</span>,<span class="string">'1992-02-03 00:00:00'</span>,<span class="string">'18209179577'</span>,<span class="literal">NULL</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Table structure for table `boys` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> <span class="string">`boys`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`boys`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`boyName`</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`userCP`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">5</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Data for the table `boys` */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span>  <span class="keyword">into</span> <span class="string">`boys`</span>(<span class="string">`id`</span>,<span class="string">`boyName`</span>,<span class="string">`userCP`</span>) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">'张无忌'</span>,<span class="number">100</span>),(<span class="number">2</span>,<span class="string">'鹿晗'</span>,<span class="number">800</span>),(<span class="number">3</span>,<span class="string">'黄晓明'</span>,<span class="number">50</span>),(<span class="number">4</span>,<span class="string">'段誉'</span>,<span class="number">300</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*!40101 SET SQL_MODE=@OLD_SQL_MODE */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */</span>;</span><br><span class="line"><span class="comment">/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */</span>;</span><br></pre></td></tr></table></figure>

<p><strong>分类：</strong></p>
<ul>
<li>按年代分类：<ul>
<li>sql92标准：mysql中仅支持内连接</li>
<li>sql99标准【推荐】：mysql中支持内连接+外连接（左外和右外【Oracle支持全外连接】）+交叉连接</li>
</ul>
</li>
<li>按功能分类：<ul>
<li>内连接<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接<ul>
<li>左外连接</li>
<li>右外连接</li>
<li>全外连接</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
</li>
</ul>
<h3 id="sql92标准"><a href="#sql92标准" class="headerlink" title="sql92标准"></a>sql92标准</h3><p><strong>注意：92语法只支持内连接，所以在连接条件为null的时候，可能会得不到想要的结果</strong></p>
<ol>
<li>多表等值连接的结果为多表的交集部分</li>
<li>n表连接，至少需要n-1个连接条件</li>
<li>多表的顺序没有要求</li>
<li>一般需要为表起别名</li>
<li>可以搭配前面介绍的所有子句使用，如排序、分组、筛选</li>
</ol>
<h4 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 等值连接</span></span><br><span class="line"><span class="comment"># 案例1：查询女神名和对应的男神名</span></span><br><span class="line"><span class="keyword">select</span> beauty.name, boys.boyName</span><br><span class="line"><span class="keyword">from</span> boys,</span><br><span class="line">     beauty</span><br><span class="line"><span class="keyword">where</span> boys.id = beauty.boyfriend_id;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例2：查询员工名和对应的部门名</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, d.department_name</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例3：查询员工名、工种编号、工种名</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.job_id, j.job_title</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     jobs j</span><br><span class="line"><span class="keyword">where</span> e.job_id = j.job_id;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例4：查询有奖金的员工名、部门名【加筛选条件】</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, d.department_name</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">  <span class="keyword">and</span> e.commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例5：查询城市中第二个字符为o的部门名和城市名【加筛选条件】</span></span><br><span class="line"><span class="keyword">select</span> d.department_name, l.city</span><br><span class="line"><span class="keyword">from</span> locations l,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> d.location_id = l.location_id</span><br><span class="line">  <span class="keyword">and</span> l.city <span class="keyword">like</span> <span class="string">'_o%'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例6：查询每个城市的部门个数【加分组】</span></span><br><span class="line"><span class="keyword">select</span> city, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> locations l,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> l.location_id = d.location_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> l.city;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例7：查询有奖金的每个部门的部门名以及部门的领导编号,以及该部门的最低工资【加分组】</span></span><br><span class="line"><span class="keyword">select</span> d.department_name, d.manager_id, <span class="keyword">min</span>(e.salary)</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">  <span class="keyword">and</span> e.commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> d.department_name, d.manager_id;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例8：查询每个工种的工种名和员工的个数，并且按员工的个数降序【加排序】</span></span><br><span class="line"><span class="keyword">select</span> j.job_title, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> jobs j,</span><br><span class="line">     employees e</span><br><span class="line"><span class="keyword">where</span> e.job_id = j.job_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> j.job_title</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">count</span>(*) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 案例9：查询员工名，部门名，所在城市【三表查询】</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, d.department_name, l.city</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d,</span><br><span class="line">     locations l</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">  <span class="keyword">and</span> d.location_id = l.location_id;</span><br></pre></td></tr></table></figure>

<h4 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h4><p>先建立一张工资等级表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> job_grades</span><br><span class="line">(</span><br><span class="line">    grade_level <span class="built_in">varchar</span>(<span class="number">3</span>),</span><br><span class="line">    lowest_sal  <span class="built_in">int</span>,</span><br><span class="line">    highest_sal <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> job_grades</span><br><span class="line"><span class="keyword">values</span> (<span class="string">'A'</span>, <span class="number">1000</span>, <span class="number">2999</span>),</span><br><span class="line">       (<span class="string">'B'</span>, <span class="number">3000</span>, <span class="number">5999</span>),</span><br><span class="line">       (<span class="string">'C'</span>, <span class="number">6000</span>, <span class="number">9999</span>),</span><br><span class="line">       (<span class="string">'D'</span>, <span class="number">10000</span>, <span class="number">14999</span>),</span><br><span class="line">       (<span class="string">'E'</span>, <span class="number">15000</span>, <span class="number">24999</span>),</span><br><span class="line">       (<span class="string">'F'</span>, <span class="number">25000</span>, <span class="number">40000</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 非等值连接</span></span><br><span class="line"><span class="comment"># 案例1：查询员工的工资和工资级别</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.salary, j.grade_level</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     job_grades j</span><br><span class="line"><span class="keyword">where</span> e.salary <span class="keyword">between</span> j.lowest_sal <span class="keyword">and</span> j.highest_sal;</span><br></pre></td></tr></table></figure>

<h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 自连接</span></span><br><span class="line"><span class="comment"># 案例：查询员工名以及其上级的名字</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, m.last_name</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     employees m</span><br><span class="line"><span class="keyword">where</span> e.manager_id = m.employee_id;</span><br></pre></td></tr></table></figure>

<h4 id="综合测试-3"><a href="#综合测试-3" class="headerlink" title="综合测试"></a>综合测试</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 综合测试 1</span></span><br><span class="line"><span class="comment"># 1. 显示员工表中的最大工资、工资平均值</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(salary), <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"><span class="comment"># 2. 查询员工表的employee_id，job_id，last_name，按department_id降序，salary升序</span></span><br><span class="line"><span class="keyword">select</span> employee_id, job_id, last_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> department_id <span class="keyword">desc</span>, salary <span class="keyword">asc</span>;</span><br><span class="line"><span class="comment"># 3. 查询员工表的job_id包含a和e的，并且a在e前面</span></span><br><span class="line"><span class="keyword">select</span> job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> job_id <span class="keyword">like</span> <span class="string">'%a%e%'</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  4. 已知表student，有id（学号），name，gradeId（年级编号）</span></span><br><span class="line"><span class="comment">         表grade，有id（年级编号），name（年级名）</span></span><br><span class="line"><span class="comment">         表result，有id，score，studentNo（学号）</span></span><br><span class="line"><span class="comment">     要求查询姓名、年级名、成绩</span></span><br><span class="line"><span class="comment">    select s.name,g.name,r.score</span></span><br><span class="line"><span class="comment">    from student s,</span></span><br><span class="line"><span class="comment">         grade g,</span></span><br><span class="line"><span class="comment">         result r</span></span><br><span class="line"><span class="comment">    where s.gradeId = g.id and s.id = r.studentNo;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment"># 5. 显示当前日期，以及去前后空格，截取子字符串的函数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>(), <span class="keyword">trim</span>(<span class="string">'   123  '</span>), <span class="keyword">substr</span>(<span class="string">'123456'</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 综合测试 2</span></span><br><span class="line"><span class="comment"># 1. 显示所有员工的姓名，部门号和部门名称</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.department_id, d.department_name</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id;</span><br><span class="line"><span class="comment"># 2. 查询90号部门员工的job_id和90号部门location_id</span></span><br><span class="line"><span class="keyword">select</span> e.job_id, d.location_id</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">  <span class="keyword">and</span> e.department_id = <span class="number">90</span>;</span><br><span class="line"><span class="comment"># 3. 选择所有有奖金的员工的 last_name,department_name,location_id,city</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, d.department_name, d.location_id, l.city</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d,</span><br><span class="line">     locations l</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">  <span class="keyword">and</span> d.location_id = l.location_id</span><br><span class="line">  <span class="keyword">and</span> e.commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment"># 4. 选择city在Toronto工作的员工的last_name,job_id,department_id,department_name</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.job_id, d.department_id, d.department_name</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d,</span><br><span class="line">     locations l</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">  <span class="keyword">and</span> d.location_id = l.location_id</span><br><span class="line">  <span class="keyword">and</span> l.city = <span class="string">'Toronto'</span>;</span><br><span class="line"><span class="comment"># 5. 查询每个工种、每个部门的部门名、工种名和最低工资</span></span><br><span class="line"><span class="keyword">select</span> d.department_name, j.job_title, <span class="keyword">min</span>(e.salary)</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     departments d,</span><br><span class="line">     jobs j</span><br><span class="line"><span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">  <span class="keyword">and</span> e.job_id = j.job_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> j.job_id, d.department_name;</span><br><span class="line"><span class="comment"># 6. 查询每个国家下的部门个数大于2的国家编号</span></span><br><span class="line"><span class="keyword">select</span> l.country_id, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> locations l,</span><br><span class="line">     departments d</span><br><span class="line"><span class="keyword">where</span> d.location_id = l.location_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> l.country_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">2</span>;</span><br><span class="line"><span class="comment"># 7. 选择指定员工的姓名、员工号、管理者的姓名和员工号</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.employee_id, m.last_name, m.employee_id</span><br><span class="line"><span class="keyword">from</span> employees e,</span><br><span class="line">     employees m</span><br><span class="line"><span class="keyword">where</span> e.manager_id = m.employee_id;</span><br></pre></td></tr></table></figure>



<h3 id="sql99标准"><a href="#sql99标准" class="headerlink" title="sql99标准"></a>sql99标准</h3><p><strong>语法：</strong></p>
<p>select 查询列表</p>
<p>from 表1 别名</p>
<p>【连接类型】join 表2</p>
<p>on 连接条件</p>
<p>【where 筛选条件】</p>
<p>【group by 分组】</p>
<p>【having 筛选条件】</p>
<p>【order by 排序列表】</p>
<p><strong>分类：</strong></p>
<p>内连接：inner</p>
<p>外连接：</p>
<ul>
<li>左外：left 【outer】</li>
<li>右外：right 【outer】</li>
<li>全外：MySQL不支持，Oracle支持，full【outer】</li>
</ul>
<p>交叉连接：cross</p>
<h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><p><strong>特点：</strong></p>
<ol>
<li>添加排序、分组、筛选</li>
<li>inner可以省略</li>
<li>筛选条件可以放在where后面，连接条件放在on后面，提高分离性，便于阅读</li>
<li>inner join连接和sql92语法中的等值连接效果是一样的，都是查询<strong>交集</strong>；</li>
</ol>
<h5 id="等值连接-1"><a href="#等值连接-1" class="headerlink" title="等值连接"></a>等值连接</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二、sql99标准</span></span><br><span class="line"><span class="comment"># 1. 内连接</span></span><br><span class="line"><span class="comment"># 【内连接】 等值连接</span></span><br><span class="line"><span class="comment"># 案例1：查询员工名、部门名</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> departments d <span class="keyword">on</span> e.department_id = d.department_id;</span><br><span class="line"><span class="comment"># 案例2：查询名字中包含e的员工名和工种名（筛选）</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, j.job_title</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> jobs j <span class="keyword">on</span> e.job_id = j.job_id</span><br><span class="line"><span class="keyword">where</span> e.last_name <span class="keyword">like</span> <span class="string">'%e%'</span>;</span><br><span class="line"><span class="comment"># 案例3：查询部门个数&gt;3的城市名和部门个数（分组+筛选）</span></span><br><span class="line"><span class="keyword">select</span> l.city, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> locations l <span class="keyword">on</span> d.location_id = l.location_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> l.city</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">3</span>;</span><br><span class="line"><span class="comment"># 案例4：查询哪个部门的部门员工个数&gt;3的部门名和员工个数，并按个数降序（排序）</span></span><br><span class="line"><span class="keyword">select</span> d.department_name, <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> departments d <span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> e.department_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">3</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">count</span>(*) <span class="keyword">desc</span>;</span><br><span class="line"><span class="comment"># 案例5：查询员工名、部门名、工种名，并按部门名降序</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, d.department_name, j.job_title</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> departments d <span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> jobs j <span class="keyword">on</span> e.job_id = j.job_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> d.department_name <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h5 id="非等值连接-1"><a href="#非等值连接-1" class="headerlink" title="非等值连接"></a>非等值连接</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 【内连接】非等值连接</span></span><br><span class="line"><span class="comment"># 案例1：查询员工的工资级别</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.salary, jg.grade_level</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> job_grades jg</span><br><span class="line">                    <span class="keyword">on</span> e.salary <span class="keyword">between</span> jg.lowest_sal <span class="keyword">and</span> jg.highest_sal;</span><br><span class="line"><span class="comment"># 案例2：查询每个工资级别的个数&gt;20，并且按工资级别的降序</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*), jg.grade_level</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> job_grades jg</span><br><span class="line">                    <span class="keyword">on</span> e.salary <span class="keyword">between</span> jg.lowest_sal <span class="keyword">and</span> jg.highest_sal</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> jg.grade_level</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(*) &gt; <span class="number">20</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> jg.grade_level <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h5 id="自连接-1"><a href="#自连接-1" class="headerlink" title="自连接"></a>自连接</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 【内连接】自连接</span></span><br><span class="line"><span class="comment"># 案例1：查询员工的姓名、上级的名字</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, m.last_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> employees m <span class="keyword">on</span> e.manager_id = m.employee_id;</span><br><span class="line"><span class="comment"># 案例2：查询姓名包含k的员工、上级的名字</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, m.last_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> employees m <span class="keyword">on</span> e.manager_id = m.employee_id</span><br><span class="line"><span class="keyword">where</span> e.last_name <span class="keyword">like</span> <span class="string">'%k%'</span>;</span><br></pre></td></tr></table></figure>



<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><p><strong>应用场景：</strong>用于查询一个表中有，另一个表中没有的记录</p>
<p><strong>特点：</strong></p>
<ol>
<li><p>外连接的查询结果为主表中的所有记录，</p>
<p>如果从表中有和它匹配的，则显示匹配的值；</p>
<p>如果从表中没有匹配的，则显示null；</p>
<p>外连接查询结果 = 内连接结果 + 主表中有而从表中没有的记录</p>
</li>
<li><p>左外连接：left join，左边的是主表</p>
</li>
<li><p>右外连接：right join，右边的是主表</p>
</li>
<li><p>左外和右外交换两个表的顺序，可以实现同样的效果</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 外连接</span></span><br><span class="line"><span class="comment"># 引入：查询男朋友不在男神表的女神名</span></span><br><span class="line"><span class="keyword">use</span> girls;</span><br><span class="line"><span class="comment">#           左外连接实现</span></span><br><span class="line"><span class="keyword">select</span> g.name</span><br><span class="line"><span class="keyword">from</span> beauty g</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> boys b <span class="keyword">on</span> g.boyfriend_id = b.id</span><br><span class="line"><span class="keyword">where</span> b.id <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"><span class="comment">#           右外连接实现</span></span><br><span class="line"><span class="keyword">select</span> g.name</span><br><span class="line"><span class="keyword">from</span> boys b</span><br><span class="line">         <span class="keyword">right</span> <span class="keyword">outer</span> <span class="keyword">join</span> beauty g <span class="keyword">on</span> b.id = g.boyfriend_id</span><br><span class="line"><span class="keyword">where</span> b.id <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> myemployees;</span><br><span class="line"><span class="comment"># 案例1：查询哪个部门没有员工</span></span><br><span class="line"><span class="keyword">select</span> d.department_name, e.employee_id</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> employees e <span class="keyword">on</span> d.department_id = e.department_id</span><br><span class="line"><span class="keyword">where</span> e.employee_id <span class="keyword">is</span> <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>



<h4 id="全外连接"><a href="#全外连接" class="headerlink" title="全外连接"></a>全外连接</h4><p>内连接的结果+表1中有但表2中没有的+表2中有但表1中没有的</p>
<h4 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h4><p>笛卡尔乘积</p>
<h3 id="92语法与99语法的总结"><a href="#92语法与99语法的总结" class="headerlink" title="92语法与99语法的总结"></a>92语法与99语法的总结</h3><p><strong>功能：</strong>sql99支持的多</p>
<p><strong>可读性：</strong>sql99实现连接条件和筛选条件的分离，可读性较高</p>
<h3 id="Join连接总结"><a href="#Join连接总结" class="headerlink" title="Join连接总结"></a>Join连接总结</h3><ol>
<li><p>内连接【inner join】</p>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/MySQL/02innerJoin.png" alt="innerJoin"></p>
</li>
<li><p>左外连接【left outer join】</p>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/MySQL/02leftOuterJoin.png" alt="leftOuterJoin"></p>
</li>
<li><p>右外连接【right outer join】</p>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/MySQL/02rightOuterJoin.png" alt="rightOuterJoin"></p>
</li>
<li><p>全外连接【full outer join】（MySQL不支持，Oracle支持）</p>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/MySQL/02fullOuterJoin.png" alt="fullOuterJoin"></p>
</li>
<li><p>左外连接去除交集部分【left outer join+B.key为null】</p>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/MySQL/02%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5%E5%8E%BB%E9%99%A4%E4%BA%A4%E9%9B%86%E9%83%A8%E5%88%86.png" alt="左外连接去除交集部分"></p>
</li>
<li><p>右外连接去除交集部分【right outer join+A.key为null】</p>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/MySQL/02%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5%E5%8E%BB%E9%99%A4%E4%BA%A4%E9%9B%86%E9%83%A8%E5%88%86.png" alt="右外连接去除交集部分"></p>
</li>
<li><p>去除关联表交集部分</p>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/MySQL/02%E5%8E%BB%E9%99%A4%E5%85%B3%E8%81%94%E8%A1%A8%E4%BA%A4%E9%9B%86%E9%83%A8%E5%88%86.png" alt="去除关联表交集部分"></p>
</li>
</ol>
<h3 id="多表连接综合案例"><a href="#多表连接综合案例" class="headerlink" title="多表连接综合案例"></a>多表连接综合案例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 综合案例</span></span><br><span class="line"><span class="comment"># 1. 查询编号&gt;3的女神的男朋友信息，如果有则列出详细，如果没有则null填充</span></span><br><span class="line"><span class="keyword">select</span> g.*, b.*</span><br><span class="line"><span class="keyword">from</span> beauty g</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> boys b</span><br><span class="line">                         <span class="keyword">on</span> g.boyfriend_id = b.id</span><br><span class="line"><span class="keyword">where</span> g.id &gt; <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 查询哪个城市没有部门</span></span><br><span class="line"><span class="keyword">use</span> myemployees;</span><br><span class="line"><span class="keyword">select</span> l.city</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> locations l <span class="keyword">on</span> l.location_id = d.location_id</span><br><span class="line"><span class="keyword">where</span> d.department_id <span class="keyword">is</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. 查询部门名为SAL或IT的员工信息</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, d.department_id, d.department_name</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">join</span> employees e <span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line"><span class="keyword">where</span> d.department_name = <span class="string">'SAL'</span></span><br><span class="line">   <span class="keyword">OR</span> d.department_name = <span class="string">'IT'</span>;</span><br></pre></td></tr></table></figure>



<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><p><strong>含义：</strong></p>
<ul>
<li>出现在其他语句中的select语句，称之为子查询或内查询；</li>
<li>外部的查询语句，称之为主查询或外查询</li>
</ul>
<p><strong>分类：</strong></p>
<p>按子查询出现的位置</p>
<ul>
<li>select后面<ul>
<li>仅仅标量子查询</li>
</ul>
</li>
<li>from后面<ul>
<li>表子查询</li>
</ul>
</li>
<li>where或having后面<ul>
<li>标量子查询（单行）</li>
<li>列子查询（多行）</li>
<li>行子查询（多列多行）</li>
</ul>
</li>
<li>exist后面（相关子查询）<ul>
<li>表子查询</li>
</ul>
</li>
</ul>
<p>按结果集的行列数不同：</p>
<ul>
<li>标量子查询（结果集只有一行一列）</li>
<li>列子查询（结果集只有一列多行）</li>
<li>行子查询（结果集只有一行多列）</li>
<li>表子查询（结果集一般为多行多列）</li>
</ul>
<h3 id="where或having后面"><a href="#where或having后面" class="headerlink" title="where或having后面"></a>where或having后面</h3><p><strong>特点：</strong></p>
<ol>
<li>子查询放在小括号内</li>
<li>子查询一般放在条件的右侧</li>
<li>标量子查询，一般搭配着单行操作符使用（&gt; &lt; &gt;= &lt;= = &lt;&gt;）</li>
<li>列子查询，一般搭配多行操作符使用（in any some all）</li>
<li>子查询的执行优先于主查询查询，主查询的条件用到了子查询的结果</li>
</ol>
<h4 id="标量子查询-单行单列"><a href="#标量子查询-单行单列" class="headerlink" title="标量子查询(单行单列)"></a>标量子查询(单行单列)</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. 标量子查询（单行子查询）</span></span><br><span class="line"><span class="comment"># 案例1：谁的工资比Abel高？</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> salary &gt; (<span class="keyword">select</span> e.salary</span><br><span class="line">                <span class="keyword">from</span> employees e</span><br><span class="line">                <span class="keyword">where</span> e.last_name = <span class="string">'Abel'</span>);</span><br><span class="line"><span class="comment"># 案例2：返回job_id与141号员工相同，salary比143号员工多的员工姓名，job_id和工资</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.job_id, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.job_id = (<span class="keyword">select</span> e.job_id <span class="keyword">from</span> employees e <span class="keyword">where</span> e.employee_id = <span class="number">141</span>)</span><br><span class="line">  <span class="keyword">and</span> e.salary &gt; (<span class="keyword">select</span> e.salary <span class="keyword">from</span> employees e <span class="keyword">where</span> e.employee_id = <span class="number">143</span>);</span><br><span class="line"><span class="comment"># 案例3：返回公司工资最少的员工的last_name,job_id和salary</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.job_id, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.salary = (<span class="keyword">select</span> <span class="keyword">min</span>(e.salary)</span><br><span class="line">                  <span class="keyword">from</span> employees e);</span><br><span class="line"><span class="comment"># 案例4：查询最低工资&gt;50号部门最低工资的部门id和其最低工资</span></span><br><span class="line"><span class="keyword">select</span> e.department_id, <span class="keyword">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> e.department_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">min</span>(e.salary) &gt; (<span class="keyword">select</span> <span class="keyword">min</span>(salary)</span><br><span class="line">                        <span class="keyword">from</span> employees</span><br><span class="line">                        <span class="keyword">where</span> department_id = <span class="number">50</span>);</span><br></pre></td></tr></table></figure>



<h4 id="列子查询（多行单列）"><a href="#列子查询（多行单列）" class="headerlink" title="列子查询（多行单列）"></a>列子查询（多行单列）</h4><ul>
<li>返回多行</li>
<li>使用多行比较操作符</li>
</ul>
<table>
<thead>
<tr>
<th>操作符</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>IN / NOT IN</td>
<td>等于列表中的<strong>任意一个</strong>，若不在列表中的<strong>任意一个</strong></td>
</tr>
<tr>
<td>ANY / SOME</td>
<td>和子查询返回的<strong>某一个</strong>值比较</td>
</tr>
<tr>
<td>ALL</td>
<td>和子查询返回的<strong>所有</strong>值比较</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2. 列子查询（多行）</span></span><br><span class="line"><span class="comment"># 案例1：返回location_id是1400或1700的部门中所有员工的姓名</span></span><br><span class="line"><span class="keyword">select</span> e.last_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.department_id <span class="keyword">in</span> (<span class="keyword">select</span> d.department_id</span><br><span class="line">                          <span class="keyword">from</span> departments d</span><br><span class="line">                          <span class="keyword">where</span> d.location_id <span class="keyword">in</span> (<span class="number">1400</span>, <span class="number">1700</span>));</span><br><span class="line"><span class="comment"># 案例2：返回其他工种中比job_id为“IT_PROG”工种任一工资低的员工的员工号、姓名、job_id以及salary</span></span><br><span class="line"><span class="keyword">select</span> e.employee_id, e.last_name, e.job_id, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.job_id != <span class="string">'IT_PROG'</span></span><br><span class="line">  <span class="keyword">AND</span> e.salary &lt; <span class="keyword">any</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> salary</span><br><span class="line">                      <span class="keyword">from</span> employees e</span><br><span class="line">                      <span class="keyword">where</span> e.job_id = <span class="string">'IT_PROG'</span>);</span><br><span class="line"><span class="keyword">select</span> e.employee_id, e.last_name, e.job_id, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.job_id != <span class="string">'IT_PROG'</span></span><br><span class="line">  <span class="keyword">AND</span> e.salary &lt; (<span class="keyword">select</span> <span class="keyword">max</span>(e.salary)</span><br><span class="line">                  <span class="keyword">from</span> employees e</span><br><span class="line">                  <span class="keyword">where</span> e.job_id = <span class="string">'IT_PROG'</span>);</span><br><span class="line"><span class="comment"># 案例3：返回其他工种中比job_id为“IT_PROG"部门所有工资都低的员工的员工号、姓名、job_id以及salary</span></span><br><span class="line"><span class="keyword">select</span> e.employee_id, e.last_name, e.job_id, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.job_id != <span class="string">'IT_PROG'</span></span><br><span class="line">  <span class="keyword">AND</span> e.salary &lt; <span class="keyword">all</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">distinct</span> e.salary</span><br><span class="line">    <span class="keyword">from</span> employees e</span><br><span class="line">    <span class="keyword">where</span> e.job_id = <span class="string">'IT_PROG'</span>);</span><br><span class="line"><span class="keyword">select</span> e.employee_id, e.last_name, e.job_id, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.job_id != <span class="string">'IT_PROG'</span></span><br><span class="line">  <span class="keyword">AND</span> e.salary &lt; (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">min</span>(e.salary)</span><br><span class="line">    <span class="keyword">from</span> employees e</span><br><span class="line">    <span class="keyword">where</span> e.job_id = <span class="string">'IT_PROG'</span>);</span><br></pre></td></tr></table></figure>



<h4 id="行子查询（结果集一行多列或多行多列）"><a href="#行子查询（结果集一行多列或多行多列）" class="headerlink" title="行子查询（结果集一行多列或多行多列）"></a>行子查询（结果集一行多列或多行多列）</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3. 行子查询（一行多列或多列多行）</span></span><br><span class="line"><span class="comment"># 案例1：查询员工编号最小并且工资最高的员工信息</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> employee_id = (<span class="keyword">select</span> <span class="keyword">min</span>(e.employee_id)</span><br><span class="line">                     <span class="keyword">from</span> employees e)</span><br><span class="line">  <span class="keyword">AND</span> salary = (<span class="keyword">select</span> <span class="keyword">max</span>(salary)</span><br><span class="line">                <span class="keyword">from</span> employees e);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> (e.employee_id, e.salary) = (<span class="keyword">select</span> <span class="keyword">min</span>(employee_id), <span class="keyword">max</span>(salary) <span class="keyword">from</span> employees e);</span><br></pre></td></tr></table></figure>



<h3 id="select后面"><a href="#select后面" class="headerlink" title="select后面"></a>select后面</h3><p>只支持标量子查询（一行一列）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二、select后面</span></span><br><span class="line"><span class="comment"># 案例1：查询每个部门的员工个数</span></span><br><span class="line"><span class="keyword">select</span> d.*,</span><br><span class="line">       (</span><br><span class="line">           <span class="keyword">select</span> <span class="keyword">count</span>(*)</span><br><span class="line">           <span class="keyword">from</span> employees e</span><br><span class="line">           <span class="keyword">where</span> e.department_id = d.department_id</span><br><span class="line">       )</span><br><span class="line"><span class="keyword">from</span> departments d;</span><br><span class="line"><span class="comment"># 案例2：查询员工号为102的部门名</span></span><br><span class="line"><span class="keyword">select</span> e.employee_id, (<span class="keyword">select</span> d.department_name <span class="keyword">from</span> departments d <span class="keyword">where</span> e.department_id = d.department_id)</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.employee_id = <span class="string">'102'</span>;</span><br></pre></td></tr></table></figure>



<h3 id="from后面"><a href="#from后面" class="headerlink" title="from后面"></a>from后面</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 三、from后面</span></span><br><span class="line"><span class="comment"># 案例1：查询每个部门的平均工资的工资等级</span></span><br><span class="line"><span class="keyword">select</span> e.*, jg.grade_level</span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> <span class="keyword">avg</span>(e.salary) salary, department_id</span><br><span class="line">      <span class="keyword">from</span> employees e</span><br><span class="line">      <span class="keyword">group</span> <span class="keyword">by</span> e.department_id) e</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">join</span> job_grades jg</span><br><span class="line">                   <span class="keyword">on</span> e.salary <span class="keyword">between</span> jg.lowest_sal <span class="keyword">and</span> jg.highest_sal;</span><br></pre></td></tr></table></figure>



<h3 id="exists后面（相关子查询）"><a href="#exists后面（相关子查询）" class="headerlink" title="exists后面（相关子查询）"></a>exists后面（相关子查询）</h3><p><strong>语法：</strong></p>
<p>exists (完整的查询语句)</p>
<p><strong>结果：</strong>0或1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 四、exists后面（相关子查询）</span></span><br><span class="line"><span class="comment"># 案例1：查询有员工名的部门名</span></span><br><span class="line"><span class="comment"># exists</span></span><br><span class="line"><span class="keyword">select</span> d.department_name</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span>(<span class="keyword">select</span> * <span class="keyword">from</span> employees e <span class="keyword">where</span> e.department_id = d.department_id)</span><br><span class="line"><span class="comment"># in</span></span><br><span class="line"><span class="keyword">select</span> d.department_name</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">where</span> d.department_id <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span> e.department_id</span><br><span class="line">    <span class="keyword">from</span> employees e);</span><br></pre></td></tr></table></figure>



<h3 id="综合测试-4"><a href="#综合测试-4" class="headerlink" title="综合测试"></a>综合测试</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 综合测试</span></span><br><span class="line"><span class="comment"># 1. 查询和Zlotkey相同部门的员工姓名和工资</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.department_id = (<span class="keyword">select</span> e.department_id <span class="keyword">from</span> employees e <span class="keyword">where</span> e.last_name = <span class="string">'Zlotkey'</span>);</span><br><span class="line"><span class="comment"># 2. 查询工资比公司平均工资高的员工的员工号，姓名和工资</span></span><br><span class="line"><span class="keyword">select</span> e.employee_id, e.last_name, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.salary &gt; (<span class="keyword">select</span> <span class="keyword">avg</span>(salary)</span><br><span class="line">                  <span class="keyword">from</span> employees);</span><br><span class="line"><span class="comment"># 3. 查询各部门中工资比本部门平均工资高的员工的员工号、姓名和工资</span></span><br><span class="line"><span class="keyword">select</span> e.employee_id, e.last_name, e.salary, d.avg_salary, e.department_id</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">join</span> (<span class="keyword">select</span> e.department_id, <span class="keyword">avg</span>(e.salary) avg_salary</span><br><span class="line">                    <span class="keyword">from</span> employees e</span><br><span class="line">                    <span class="keyword">group</span> <span class="keyword">by</span> e.department_id) d</span><br><span class="line">                   <span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line"><span class="keyword">where</span> e.salary &gt; d.avg_salary;</span><br><span class="line"><span class="comment"># 4. 查询和姓名中包含字母u的员工在相同部门的员工的员工号和姓名</span></span><br><span class="line"><span class="keyword">select</span> e.employee_id, e.last_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.department_id <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">distinct</span> e.department_id</span><br><span class="line">    <span class="keyword">from</span> employees e</span><br><span class="line">    <span class="keyword">where</span> e.last_name <span class="keyword">like</span> <span class="string">'%u%'</span>)</span><br><span class="line">  <span class="keyword">and</span> e.last_name <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">'%u%'</span>;</span><br><span class="line"><span class="comment"># 5. 查询在部门的location_id为1700的部门工作的员工的员工号</span></span><br><span class="line"><span class="keyword">select</span> e.employee_id</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.department_id <span class="keyword">in</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">distinct</span> d.department_id</span><br><span class="line">    <span class="keyword">from</span> departments d</span><br><span class="line">    <span class="keyword">where</span> d.location_id = <span class="number">1700</span>);</span><br><span class="line"><span class="comment"># 6. 查询管理者是K_ing的员工姓名和工资</span></span><br><span class="line"><span class="keyword">select</span> e.last_name, e.salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.manager_id <span class="keyword">in</span> (<span class="keyword">select</span> e.employee_id <span class="keyword">from</span> employees e <span class="keyword">where</span> e.last_name = <span class="string">'K_ing'</span>);</span><br><span class="line"><span class="comment"># 7. 查询工资最高的员工的姓名，要求first_name和last_name显示为一列，列名为姓.名</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">concat</span>(e.first_name, <span class="string">'.'</span>, e.last_name)</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.salary = (<span class="keyword">select</span> <span class="keyword">max</span>(e.salary) max_salary <span class="keyword">from</span> employees e);</span><br></pre></td></tr></table></figure>



<h3 id="子查询经典案例"><a href="#子查询经典案例" class="headerlink" title="子查询经典案例"></a>子查询经典案例</h3><ol>
<li>查询工资最低的员工信息：last_name,salary</li>
<li>查询平均工资最低的部门信息</li>
<li>查询平均工资最低的部门信息和该部门的平均工资</li>
<li>查询平均工资最高的job信息</li>
<li>查询平均工资高于公司平均工资的部门有哪些？</li>
<li>查询出公司中所有manager的详细信息</li>
<li>各个部门中最高工资和最低工资的那个部门，最低工资是多少</li>
<li>查询平均工资最高的部门的manager的详细信息：last_name,department_id,email,salary</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 子查询经典案例</span></span><br><span class="line"><span class="comment"># 1. 查询工资最低的员工信息：last_name,salary</span></span><br><span class="line"><span class="keyword">select</span> last_name, salary</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.salary = (<span class="keyword">select</span> <span class="keyword">min</span>(salary) <span class="keyword">from</span> employees);</span><br><span class="line"><span class="comment"># 2. 查询平均工资最低的部门信息</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">where</span> d.department_id = (<span class="keyword">select</span> e.department_id</span><br><span class="line">                         <span class="keyword">from</span> employees e</span><br><span class="line">                         <span class="keyword">group</span> <span class="keyword">by</span> e.department_id</span><br><span class="line">                         <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(e.salary)</span><br><span class="line">                         <span class="keyword">limit</span> <span class="number">1</span>);</span><br><span class="line"><span class="comment"># 3. 查询平均工资最低的部门信息和该部门的平均工资</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> (<span class="keyword">select</span> e.department_id, <span class="keyword">avg</span>(e.salary)</span><br><span class="line">                     <span class="keyword">from</span> employees e</span><br><span class="line">                     <span class="keyword">group</span> <span class="keyword">by</span> e.department_id</span><br><span class="line">                     <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(e.salary)</span><br><span class="line">                     <span class="keyword">limit</span> <span class="number">1</span>) a</span><br><span class="line">                    <span class="keyword">on</span> d.department_id = a.department_id;</span><br><span class="line"><span class="comment"># 4. 查询平均工资最高的job信息</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> jobs j</span><br><span class="line"><span class="keyword">where</span> j.job_id = (<span class="keyword">select</span> e.job_id</span><br><span class="line">                  <span class="keyword">from</span> employees e</span><br><span class="line">                  <span class="keyword">group</span> <span class="keyword">by</span> e.job_id</span><br><span class="line">                  <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(e.salary) <span class="keyword">desc</span></span><br><span class="line">                  <span class="keyword">limit</span> <span class="number">1</span>);</span><br><span class="line"><span class="comment"># 5. 查询平均工资高于公司平均工资的部门有哪些？</span></span><br><span class="line"><span class="keyword">select</span> department_id, <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> e.department_id</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">avg</span>(salary) &gt; (<span class="keyword">select</span> <span class="keyword">avg</span>(salary) <span class="keyword">from</span> employees);</span><br><span class="line"><span class="comment"># 6. 查询出公司中所有manager的详细信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> m.*</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line">         <span class="keyword">inner</span> <span class="keyword">join</span> employees m</span><br><span class="line">                    <span class="keyword">on</span> e.manager_id = m.employee_id;</span><br><span class="line"><span class="comment"># 7. 各个部门中最高工资中最低的那个部门，最低工资是多少</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(e.salary),e.department_id</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> e.department_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">max</span>(e.salary) <span class="keyword">limit</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment"># 8. 查询平均工资最高的部门的manager的详细信息：last_name,department_id,email,salary</span></span><br><span class="line"><span class="keyword">select</span> e.*</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line">         <span class="keyword">right</span> <span class="keyword">join</span> (<span class="keyword">select</span> e.department_id, <span class="keyword">avg</span>(e.salary)</span><br><span class="line">                     <span class="keyword">from</span> employees e</span><br><span class="line">                     <span class="keyword">group</span> <span class="keyword">by</span> e.department_id</span><br><span class="line">                     <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">avg</span>(e.salary) <span class="keyword">desc</span></span><br><span class="line">                     <span class="keyword">limit</span> <span class="number">1</span>) s</span><br><span class="line">                    <span class="keyword">on</span> d.department_id = s.department_id</span><br><span class="line">         <span class="keyword">left</span> <span class="keyword">join</span> employees e <span class="keyword">on</span> e.employee_id = d.manager_id;</span><br></pre></td></tr></table></figure>



<h2 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h2><p><strong>语法：</strong></p>
<p>select 查询列表</p>
<p>from 表</p>
<p>【join typejoin 表2</p>
<p>on 连接条件</p>
<p>where 筛选条件</p>
<p>group by 分组字段</p>
<p>having 分组后的筛选</p>
<p>order by 排序的字段】</p>
<p>limit offset,size；</p>
<ul>
<li>offset：要显示条目的起始索引（从0开始）</li>
<li>size：要显示的条目个数</li>
</ul>
<p><strong>特点：</strong></p>
<ul>
<li><p>limit语句放在查询语句的最后，执行顺序也是最后</p>
</li>
<li><p>公式：</p>
<p>要显示的页数page，每页的条目数size</p>
<p>select 查询列表</p>
<p>from 表</p>
<p>limit (page-1)*size,size；</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 分页查询</span></span><br><span class="line"><span class="comment"># 案例1：查询前五条员工信息</span></span><br><span class="line"><span class="keyword">use</span> myemployees;</span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">limit</span> <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">limit</span> <span class="number">5</span>;</span><br><span class="line"><span class="comment"># 案例2：查询11-25条</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">limit</span> <span class="number">10</span>,<span class="number">15</span>;</span><br><span class="line"><span class="comment"># 案例3：有奖金的员工信息，工资降序，前10名</span></span><br><span class="line"><span class="keyword">select</span> *</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">where</span> e.commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> e.salary <span class="keyword">desc</span></span><br><span class="line"><span class="keyword">limit</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>



<h2 id="union联合查询"><a href="#union联合查询" class="headerlink" title="union联合查询"></a>union联合查询</h2><p>union：联合、合并，将多条查询语句的结果合并成一个结果；</p>
<p><strong>语法：</strong></p>
<p>查询语句1</p>
<p>union【all】</p>
<p>查询语句2</p>
<p>union【all】</p>
<p>……</p>
<p><strong>应用场景：</strong></p>
<p>要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致的时候；</p>
<p><strong>特点：</strong></p>
<ol>
<li>要求多条查询语句的查询列数是一致的；</li>
<li>要求多条查询语句的查询的每一列的类型和顺序最好一致；</li>
<li>使用union会去重，使用union all会保留；</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/12/28/MySQL/01_MySQL_%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/12/28/MySQL/01_MySQL_%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">01_MySQL_简介</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-28 22:10:25" itemprop="dateCreated datePublished" datetime="2019-12-28T22:10:25+08:00">2019-12-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-01-05 11:51:00" itemprop="dateModified" datetime="2020-01-05T11:51:00+08:00">2020-01-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySQL/" itemprop="url" rel="index">
                    <span itemprop="name">MySQL</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="01-MySQL-简介"><a href="#01-MySQL-简介" class="headerlink" title="01_MySQL_简介"></a>01_MySQL_简介</h1><blockquote>
<p><a href="https://github.com/tomxwd/MySQL-Basic" target="_blank" rel="noopener">相关代码GitHub仓库</a></p>
<p><a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:tomxwd/MySQL-Basic.git</p>
<p><a href="https://github.com/tomxwd/MySQL-Basic.git" target="_blank" rel="noopener">https://github.com/tomxwd/MySQL-Basic.git</a></p>
</blockquote>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>DB：数据库（Database），存储数据的仓库，保存一系列有组织的数据；</p>
<p>DBMS：数据库管理系统（Database Management System），数据库是通过DBMS创建和操作的容器</p>
<ul>
<li>常见的数据库管理系统：MySQL、Oracle、DB2、SQLServer等；</li>
</ul>
<p>SQL：结构化查询语言（Structure Query Language），专门用来与数据库通信的语言；</p>
<h2 id="MySQL卸载"><a href="#MySQL卸载" class="headerlink" title="MySQL卸载"></a>MySQL卸载</h2><ol>
<li>程序卸载</li>
<li>安装所在目录卸载</li>
<li>系统盘ProgramData/MySQL删除</li>
<li>若没清理干净，则清理注册表：<ul>
<li>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\Eventlog\Application\MySQL目录</li>
<li>HKEY_LOCAL_MACHINE\SYSTEM\ControlSet002\Services\Eventlog\Application\MySQL目录</li>
<li>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\MySQL目录</li>
<li>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControl001\Services\MySQL目录</li>
<li>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControl002\Services\MySQL目录</li>
<li>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\MySQL目录</li>
</ul>
</li>
<li>删除C:\Documents and Settings\All Users\Application Data\MySQL目录</li>
</ol>
<h2 id="MySQL安装与使用"><a href="#MySQL安装与使用" class="headerlink" title="MySQL安装与使用"></a>MySQL安装与使用</h2><blockquote>
<p><a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener">下载地址</a></p>
<p><a href="https://www.bilibili.com/video/av21400736?p=7" target="_blank" rel="noopener">视频解说</a></p>
</blockquote>
<p>这里下载5.5版本；</p>
<p>主要配置utf-8字符集以及把mysql/bin添加到path环境变量；</p>
<h2 id="MySQL配置文件介绍"><a href="#MySQL配置文件介绍" class="headerlink" title="MySQL配置文件介绍"></a>MySQL配置文件介绍</h2><h3 id="my-ini文件介绍"><a href="#my-ini文件介绍" class="headerlink" title="my.ini文件介绍"></a>my.ini文件介绍</h3><p>[mysql]代表客户端配置</p>
<p>[mysqld]代表服务端配置</p>
<ul>
<li>port：端口号</li>
<li>basedir：安装目录</li>
<li>datadir：数据文件目录</li>
<li>character-set-server：服务端字符集</li>
<li>default-storage-engine：默认存储引擎</li>
<li>sql-mode：语法格式</li>
<li>max_connections：最大连接数</li>
</ul>
<h2 id="MySQL服务启动与停止"><a href="#MySQL服务启动与停止" class="headerlink" title="MySQL服务启动与停止"></a>MySQL服务启动与停止</h2><ol>
<li>可以通过【服务】页面手动开启/停止/设置启动模式等；</li>
<li>通过命令行窗口【管理员权限运行】，net stop MySQL停止服务，net start MySQL启动服务；</li>
</ol>
<h2 id="MySQL服务端的登录和退出"><a href="#MySQL服务端的登录和退出" class="headerlink" title="MySQL服务端的登录和退出"></a>MySQL服务端的登录和退出</h2><p>登录：</p>
<p>命令：<code>mysql -h localhost -P 3306 -u root -proot</code></p>
<ul>
<li>-h：host</li>
<li>-P：端口号</li>
<li>-u：用户名</li>
<li>-p：密码，最好不显示输入，而是最后-p不带参数直接回车，再输入密码，保证密码隐藏起来；<strong>且密码需要紧接着-p，不可以有空格；</strong></li>
</ul>
<p>如果是连接本机3306的服务，只需要-u -p两个参数即可；</p>
<p>退出：</p>
<p><code>exit</code>或者Ctrl+C；</p>
<h2 id="MySQL环境变量配置"><a href="#MySQL环境变量配置" class="headerlink" title="MySQL环境变量配置"></a>MySQL环境变量配置</h2><p>windows端：</p>
<p>如果安装的时候忘了勾选，或者其他因素，可能会导致在命令行窗口显示mysql不是合法的命令，这时候就需要自己手动配置环境变量，把MySQL下的bin目录配置到Path环境变量中即可；</p>
<h2 id="MySQL的常见命令"><a href="#MySQL的常见命令" class="headerlink" title="MySQL的常见命令"></a>MySQL的常见命令</h2><ol>
<li><p>查看数据库列表</p>
<p><code>show databases;</code></p>
<ul>
<li>mysql数据库：用于保存用户信息</li>
<li>information_schema：保存元数据信息</li>
<li>performance_schema：搜集性能信息，性能参数</li>
<li>test：测试数据库，默认是空的</li>
</ul>
</li>
<li><p>打开指定database数据库</p>
<p><code>use database;</code></p>
</li>
<li><p>查看当前数据库的表列表</p>
<p><code>show tables;</code></p>
</li>
<li><p>查看来自database数据库的表列表</p>
<p><code>show tables from database;</code></p>
</li>
<li><p>查看当前所在数据库</p>
<p><code>select database();</code></p>
</li>
<li><p>创建stuinfo表</p>
<p><code>create table stuinfo(id int,name varchar(20));</code></p>
</li>
<li><p>查看表结构</p>
<p><code>desc stuinfo;</code></p>
</li>
<li><p>查看MySQL版本</p>
<p><code>select version();</code></p>
<p>或者执行bin目录下的mysql，<code>mysql --version</code>或者<code>mysql -V</code>；</p>
</li>
<li><p>配置时区：</p>
<ul>
<li><code>show variables like&#39;%time_zone&#39;;</code>查看系统时间信息，如果是SYSTEM则是没设置，有时候会导致图形客户端连接不上；</li>
<li><code>set global time_zone = &#39;+8:00&#39;;</code>设置为东八区时间即可；</li>
</ul>
</li>
<li></li>
</ol>
<h3 id="MySQL语法规范"><a href="#MySQL语法规范" class="headerlink" title="MySQL语法规范"></a>MySQL语法规范</h3><ol>
<li>不区分大小写，建议关键字大写，表名列名小写；</li>
<li>每条命令用分号结尾；\g也可以，但麻烦；</li>
<li>每条命令根据需要，可以进行缩进或换行；</li>
<li>注释<ul>
<li>单行注释<ul>
<li>#</li>
<li>–空格</li>
</ul>
</li>
<li>多行注释<ul>
<li>/* 注释文字 */</li>
</ul>
</li>
</ul>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/44/">44</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="tomxwd"
      src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">tomxwd</p>
  <div class="site-description" itemprop="description">tomxwd</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">435</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tomxwd" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tomxwd" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备18158552号-1 </a>
      <img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=18158552" rel="noopener" target="_blank">1213123 </a>
  </div>

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-bug"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tomxwd</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
