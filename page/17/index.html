<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-128x128.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-32x32.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-16x16.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="tomxwd" />










<meta name="description" content="tomxwd">
<meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="tomxwd.blog">
<meta property="og:url" content="http:&#x2F;&#x2F;www.blog.tomxwd.com&#x2F;page&#x2F;17&#x2F;index.html">
<meta property="og:site_name" content="tomxwd.blog">
<meta property="og:description" content="tomxwd">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.blog.tomxwd.com/page/17/"/>





  <title>tomxwd.blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">tomxwd.blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/26/tomcat/01_tomcat_%E7%AE%80%E4%BB%8B_%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/26/tomcat/01_tomcat_%E7%AE%80%E4%BB%8B_%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" itemprop="url">01_tomcat_简介_环境搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-26T17:25:02+08:00">
                2019-10-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/tomcat/" itemprop="url" rel="index">
                    <span itemprop="name">tomcat</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="01-tomcat-简介-环境搭建"><a href="#01-tomcat-简介-环境搭建" class="headerlink" title="01_tomcat_简介_环境搭建"></a>01_tomcat_简介_环境搭建</h1><blockquote>
<p><a href="https://tomcat.apache.org/" target="_blank" rel="noopener">apache tomcat官网</a></p>
<p><a href="https://archive.apache.org/dist/tomcat/" target="_blank" rel="noopener">各个版本下载地址</a></p>
</blockquote>
<p>Web服务器主要用来接收客户端发送的请求和响应客户端发送的请求。</p>
<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>先要有JAVA_HOME，然后在tomcat的bin下有启动文件。</p>
<h2 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h2><table>
<thead>
<tr>
<th>目录名</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>bin</td>
<td>包含tomcat启动命令、停止tomcat命令等批处理文件，可执行文件</td>
</tr>
<tr>
<td>conf</td>
<td>配置文件</td>
</tr>
<tr>
<td>lib</td>
<td>tomcat运行依赖的jar包</td>
</tr>
<tr>
<td>logs</td>
<td>tomcat的运行日志文件</td>
</tr>
<tr>
<td>temp</td>
<td>tomcat的临时文件夹</td>
</tr>
<tr>
<td>webapps</td>
<td>里面集合了所有的web项目每一个文件夹就代表一个web项目（默认访问ROOT目录）</td>
</tr>
<tr>
<td>work</td>
<td>work保存的tomcat运行时编译好的一些文件</td>
</tr>
</tbody></table>
<h2 id="修改端口号"><a href="#修改端口号" class="headerlink" title="修改端口号"></a>修改端口号</h2><p>conf目录下：</p>
<p>server.xml配置文件，上限是65535</p>
<h2 id="对应版本关系"><a href="#对应版本关系" class="headerlink" title="对应版本关系"></a>对应版本关系</h2><table>
<thead>
<tr>
<th>tomcat版本</th>
<th>servlet版本</th>
<th>jsp版本</th>
<th>el版本</th>
<th>websocket版本</th>
</tr>
</thead>
<tbody><tr>
<td>tomcat6</td>
<td>servlet2.5</td>
<td>jsp2.1</td>
<td>el</td>
<td></td>
</tr>
<tr>
<td>tomcat7</td>
<td>servlet3.0</td>
<td>jsp2.2</td>
<td>el2.2</td>
<td>websocket1.1</td>
</tr>
<tr>
<td>tomcat8</td>
<td>servlet3.1</td>
<td>jsp2.3</td>
<td>el3.0</td>
<td>websocket1.1</td>
</tr>
<tr>
<td>tomcat9</td>
<td>servlet4.0</td>
<td>jsp2.3</td>
<td>el3.0</td>
<td>websocket1.1</td>
</tr>
</tbody></table>
<p>tomcat6是需要些配置文件的版本，tomcat7之后都是基于注解的，所以tomcat6可以体会一下配置文件来编写web应用。</p>
<h2 id="eclipse集成tomcat"><a href="#eclipse集成tomcat" class="headerlink" title="eclipse集成tomcat"></a>eclipse集成tomcat</h2><p>集成使用的是tomcat的镜像，所以webapps目录下是空的，而且该其配置文件并不会对本机下载的tomcat产生影响。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/26/XML/01_XML_%E8%AE%A4%E8%AF%86XML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/26/XML/01_XML_%E8%AE%A4%E8%AF%86XML/" itemprop="url">01_XML_认识XML</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-26T12:57:43+08:00">
                2019-10-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/XML/" itemprop="url" rel="index">
                    <span itemprop="name">XML</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="01-XML-认识XML"><a href="#01-XML-认识XML" class="headerlink" title="01_XML_认识XML"></a>01_XML_认识XML</h1><h2 id="xml简介"><a href="#xml简介" class="headerlink" title="xml简介"></a>xml简介</h2><ul>
<li><p>xml，eXtensible Markup Language，可扩展标记语言，是一种标记语言。</p>
</li>
<li><p>xml是一种非常灵活的语言，没有固定的标签，所有的标签都可以自定义；</p>
</li>
<li><p>通常，xml被用于信息的记录和传递，因此xml经常被用于充当配置文件；</p>
</li>
</ul>
<h2 id="格式良好的xml格式"><a href="#格式良好的xml格式" class="headerlink" title="格式良好的xml格式"></a>格式良好的xml格式</h2><ul>
<li>XML编辑器<ul>
<li>记事本</li>
<li>Dreamweaver</li>
<li>XMLSpy</li>
</ul>
</li>
</ul>
<ul>
<li>格式良好的XML文档：遵循XML文档的基本规则<ul>
<li>必须有XML声明语句</li>
<li>必须<strong>有且仅有一个根元素</strong></li>
<li>标签大小写敏感</li>
<li>属性值用双引号</li>
<li>标签成对</li>
<li>元素正确嵌套</li>
</ul>
</li>
<li>有效的XML文档<ul>
<li>首先必须是格式良好的</li>
<li>使用DTD和XSD（XML Schema）定义语义约束</li>
</ul>
</li>
</ul>
<ul>
<li><p>声明信息，用于描述xml的版本和编码方式：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>xml有且仅有一个根元素；</p>
</li>
<li><p>xml是大小写敏感的；</p>
</li>
<li><p>标签是成对的，而且要正确嵌套；</p>
</li>
<li><p>属性值要使用双引号；</p>
</li>
<li><p>注释的写法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注释--&gt;</span></span><br></pre></td></tr></table></figure>




</li>
</ul>
<h2 id="XML解析"><a href="#XML解析" class="headerlink" title="XML解析"></a>XML解析</h2><ul>
<li>dom：（Document Object Model，文档对象模型）是W3C组织推荐的处理XML的一种方式，下面有两个分支：jDom和dom4j，可以对XML文件进行增删改查的操作；<ul>
<li>Dom4j：dom下的一个分支。我们常用dom4j替换原生dom解析。</li>
</ul>
</li>
<li>sax：（Simple API for XML）不是官方标准，但是XML社区事实上的标准，几乎所有的XML解析器都支持它，只能进行解析（查询）；<ul>
<li>pull：Pull解析和Sax解析很相似，都是轻量级的解析，它是一个第三方开源的Java项目，但是在Android的内核中已经嵌入了Pull，只能进行解析（查询）；</li>
</ul>
</li>
</ul>
<p><img src="01_XML_%E8%AE%A4%E8%AF%86XML/1572066727188.png" alt="1572066727188"></p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dom4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>导入dom解析包dom4j</li>
<li>创建有个车SAXReader（一个xml文档阅读器）</li>
<li>使用reader读取文件，返回一个document对象</li>
<li>获取到document以后就可以执行增删改查</li>
<li>先要获取根节点</li>
<li>使用根节点继续往下找</li>
</ol>
<ul>
<li>getName()：获取元素名</li>
<li>getText()：获取元素里面的文本值</li>
<li>attributeValue(“属性名”)：获取元素的属性值</li>
<li>elementText(“标签名”)：获取ele子元素为标签名的文本值</li>
<li>element()：找到第一个子元素(可带参数)</li>
<li>elements()：找到所有子元素</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    SAXReader saxReader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">    Document document = saxReader.read(<span class="keyword">new</span> File(<span class="string">"classpath:student.xml"</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> DocumentException </span>&#123;</span><br><span class="line">    SAXReader saxReader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">    Document document = saxReader.read(<span class="keyword">new</span> File(<span class="string">"E:\\IDEA_PROJECT\\JAVA_WEB\\xml-test\\src\\main\\resources\\student.xml"</span>));</span><br><span class="line">    Element rootElement = document.getRootElement();</span><br><span class="line">    System.out.println(<span class="string">"rootElement.getName() = "</span> + rootElement.getName());</span><br><span class="line">    <span class="comment">// 获取当前结点下的所有子节点</span></span><br><span class="line">    List&lt;Element&gt; elements = rootElement.elements();</span><br><span class="line"></span><br><span class="line">    elements.stream().forEach(e-&gt; &#123;</span><br><span class="line">        System.out.println(<span class="string">"e.getName() = "</span> + e.getName());</span><br><span class="line">        System.out.println(<span class="string">"e.attributeValue(\"id\") = "</span> + e.attributeValue(<span class="string">"id"</span>));</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * xml转对象</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    SAXReader saxReader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">    Document read = saxReader.read(<span class="keyword">new</span> File(<span class="string">"E:\\IDEA_PROJECT\\JAVA_WEB\\xml-test\\src\\main\\resources\\student.xml"</span>));</span><br><span class="line">    Element rootElement = read.getRootElement();</span><br><span class="line">    <span class="comment">// 遍历--&gt;封装</span></span><br><span class="line">    ArrayList&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    ((List&lt;Element&gt;)rootElement.elements()).stream().forEach(e-&gt;&#123;</span><br><span class="line">        Student student = <span class="keyword">new</span> Student();</span><br><span class="line">        student.setId(e.attributeValue(<span class="string">"id"</span>));</span><br><span class="line">        student.setName(e.elementText(<span class="string">"name"</span>));</span><br><span class="line">        student.setAge(e.elementText(<span class="string">"age"</span>));</span><br><span class="line">        students.add(student);</span><br><span class="line">    &#125;);</span><br><span class="line">    students.forEach(e-&gt; System.out.println(<span class="string">"student = "</span> + e));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    SAXReader saxReader = <span class="keyword">new</span> SAXReader();</span><br><span class="line">    Document document = saxReader.read(<span class="keyword">new</span> File(<span class="string">"E:\\IDEA_PROJECT\\JAVA_WEB\\xml-test\\src\\main\\resources\\student.xml"</span>));</span><br><span class="line">    Element rootElement = document.getRootElement();</span><br><span class="line">    <span class="comment">// 获取到的是第一个student</span></span><br><span class="line">    Element student = rootElement.element(<span class="string">"student"</span>);</span><br><span class="line">    <span class="comment">// 改student的name为张三三</span></span><br><span class="line">    Element name = student.element(<span class="string">"name"</span>);</span><br><span class="line">    System.out.println(<span class="string">"name.getText() = "</span> + name.getText());</span><br><span class="line">    name.setText(<span class="string">"张三三"</span>);</span><br><span class="line">    name.addAttribute(<span class="string">"name"</span>,<span class="string">"zhangzhang"</span>);</span><br><span class="line">    <span class="comment">// 保存修改</span></span><br><span class="line">    <span class="comment">// OutputFormat输出格式化</span></span><br><span class="line">    OutputFormat prettyPrint = OutputFormat.createPrettyPrint();</span><br><span class="line">    XMLWriter writer = <span class="keyword">new</span> XMLWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"E:\\IDEA_PROJECT\\JAVA_WEB\\xml-test\\src\\main\\resources\\student.xml"</span>),prettyPrint);</span><br><span class="line">    writer.write(document);</span><br><span class="line">    writer.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="xPath"><a href="#xPath" class="headerlink" title="xPath"></a>xPath</h2><p>xPath是在XML文档中查找信息的语言。</p>
<p>xPath是通过元素和属性进行查找。</p>
<p>xPath简化了Dom4j查找节点的过程。</p>
<p>使用xPath必须导入jaxen-1.1-beta-6.jar</p>
<p>否则出现NoClassDefFoundError：org/jaxen/JaxenException</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jaxen<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>语法：</p>
<table>
<thead>
<tr>
<th>使用</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>/student/student</td>
<td>从根元素开始逐层找，以”/“开头</td>
</tr>
<tr>
<td>开头//name</td>
<td>直接获取所有name元素对象，以”//“开头</td>
</tr>
<tr>
<td>//student/*</td>
<td>获取所有student元素的所有子元素对象</td>
</tr>
<tr>
<td>//student[1] 或者 //student[last()]</td>
<td>获取所有student元素的第一个或最后一个元素</td>
</tr>
<tr>
<td>//student[@id]</td>
<td>获取所有带id属性的student元素对象</td>
</tr>
<tr>
<td>//student[@id=’002’]</td>
<td>获取id等于002的student元素对象</td>
</tr>
<tr>
<td>//student[not(@*)]</td>
<td>获取所有student元素下不包含属性的元素对象</td>
</tr>
</tbody></table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/01_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/01_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/" itemprop="url">01_计算机网络概述</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-20T19:30:12+08:00">
                2019-10-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="01-计算机网络概述"><a href="#01-计算机网络概述" class="headerlink" title="01_计算机网络概述"></a>01_计算机网络概述</h1><h2 id="计算机网络在信息时代的作用"><a href="#计算机网络在信息时代的作用" class="headerlink" title="计算机网络在信息时代的作用"></a>计算机网络在信息时代的作用</h2><ul>
<li>网络：许多计算机连接在一起</li>
<li>互联网：internet，许多网络连接在一起</li>
<li>因特网：Internet，全球最大的一个互联网</li>
</ul>
<p>作用范围：</p>
<p>新的理解：不单单从网络覆盖范围区分局域网和广域网，应用了广域网技术就是广域网，应用了局域网技术就是局域网。</p>
<ul>
<li><p>局域网：自己购买设备，自己维护，带宽固定100M，1000M，距离100米内。</p>
</li>
<li><p>广域网：花钱买服务，花钱买带宽</p>
</li>
</ul>
<p>OSI 7层</p>
<ul>
<li>应用层：能够产生网络流量，能够和用户交互的应用程序。</li>
<li>表示层：加密、压缩，开发人员需要考虑的问题。</li>
<li>会话层：服务和客户端建立的会话（查木马netstat -nb）</li>
<li>传输层：可靠传输（需要建立会话）、不可靠传输（不需要建立会话）、流量控制</li>
<li>网络层：IP地址编址，选择最佳路径</li>
<li>数据链路层：数据如何封装，添加物理层地址MAC地址</li>
<li>物理层：电压、接口标准</li>
</ul>
<p>网络排错：</p>
<p>从底层到高层；</p>
<p>网络安全和OSI参考模型</p>
<ul>
<li><p>物理层安全</p>
</li>
<li><p>数据链路安全，ADSL，AP密码</p>
</li>
<li><p>网络层安全</p>
</li>
<li><p>应用层安全（SQL注入漏洞，上传漏洞</p>
</li>
</ul>
<p><img src="01_%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0/1571667146060.png" alt="1571667146060"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/20/Spring/Spring%E6%BA%90%E7%A0%81/02_Spring_IOC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/20/Spring/Spring%E6%BA%90%E7%A0%81/02_Spring_IOC/" itemprop="url">02_Spring_IOC</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-20T16:51:29+08:00">
                2019-10-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring%E6%BA%90%E7%A0%81/" itemprop="url" rel="index">
                    <span itemprop="name">spring源码</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="02-Spring-IOC"><a href="#02-Spring-IOC" class="headerlink" title="02_Spring_IOC"></a>02_Spring_IOC</h1><ol>
<li><p>为什么我们要使用Spring呢？</p>
<ul>
<li><p>为什么用IOC？</p>
<p>在没有IOC之前，使用的是内部创建的方式来管理对象，这样会导致创建出来的对象很多，每次依赖到对象都要去new，而且依赖关系复杂。</p>
</li>
<li><p>如何设计IOC容器？</p>
<p>对于上面的<strong>依赖对象多次创建问题</strong>，可以用单例，工厂模式等设计模式来解决（beanFactory）</p>
<p>容器要去统一对象的构建方式，通过反射、单例、工厂模式</p>
<p>对于上面的<strong>依赖关系复杂问题</strong>，可以用外部传入对象方式解决依赖问题（构造器、方法传参、属性、反射）    </p>
</li>
<li><p>SpringIOC如何做的？</p>
<p><strong>统一负责对象的创建，管理生命周期，自动维护对象之间的依赖关系。</strong></p>
</li>
<li><p>依赖注入：</p>
<ul>
<li>构造器传参</li>
<li>方法传参</li>
<li>属性反射 field.set(x)</li>
</ul>
</li>
<li><p>依赖查找：</p>
<ul>
<li>byType</li>
<li>byName</li>
</ul>
</li>
<li><p>spring使用：</p>
<ul>
<li>bean的装配方式：<ul>
<li>xml</li>
<li>注解：<ul>
<li>@Component、@ComponentScan、@Service、@Controller…</li>
<li>@Bean、@Configuration…</li>
</ul>
</li>
<li>FactoryBean<ul>
<li>接口：FactoryBean</li>
</ul>
</li>
<li>@Import<ul>
<li>等同于xml中的import</li>
<li>实现接口ImportBeanDefinitionRegistry、ImportSelector</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>BeanFactory和FactoryBean有什么区别？</p>
<ul>
<li>FactoryBean是一个接口，实现里面的三个方法，可以往容器里添加bean，用byName的方式来取，如”myFactoryBean”，则会拿到其getObject方法返回的bean对象(User)，而如果用”&amp;myFactoryBean”来取，则会取到真实的factoryBean对象。</li>
<li></li>
</ul>
</li>
<li><p>Spring提供了几种方式管理bean的生命周期？有什么区别？</p>
</li>
</ol>
<h2 id="IOC介绍"><a href="#IOC介绍" class="headerlink" title="IOC介绍"></a>IOC介绍</h2><p>什么是IOC？</p>
<p>IOC也称为依赖注入（DI），它是一个对象定义依赖关系的过程，也就是说，对象只通过构造函数参数、工厂方法的参数或对象实例构造方法或从工厂返回在对象实例上设置的属性来定义他们所使用的其他对象。然后容器在创建bean时注入这些依赖项。这个过程本质上是bean本身的逆过程，因此称为控制反转（IOC），通过直接构造来控制其依赖项的实例化。</p>
<p>什么是bean？</p>
<p>在Spring中，构成应用程序主干并由Spring IOC容器管理的对象称为bean，bean是由SpringIOC容器实例化、组装和管理的对象。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/20/Spring/Spring%E6%BA%90%E7%A0%81/01_Spring_AOP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/20/Spring/Spring%E6%BA%90%E7%A0%81/01_Spring_AOP/" itemprop="url">01_Spring_AOP</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-20T13:44:53+08:00">
                2019-10-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/spring%E6%BA%90%E7%A0%81/" itemprop="url" rel="index">
                    <span itemprop="name">spring源码</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="01-Spring-AOP"><a href="#01-Spring-AOP" class="headerlink" title="01_Spring_AOP"></a>01_Spring_AOP</h1><p>与OOP（Object Oriented Programming面向对象）相比，传统的OOP开发中的代码逻辑是自上向下的，而在这些自上而下的过程中产生横切性的问题，而这些横切性的问题又与我们的业务逻辑关系不大，会散落在代码的各个地方，造成难以维护。</p>
<p>AOP的编程思想是把这些横切性的问题和主业务逻辑进行分离，从而起到解耦的目的。</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>首先导入织入包：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>用<code>@EnableAspectJAutoProxy</code>或者<code>&lt;aop:aspectj-autoproxy/&gt;</code>开启。</p>
<p><img src="01_Spring_AOP/1571550660947.png" alt="1571550660947"></p>
<p>编写一个切面组件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> xieweidu</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@createDate</span> 2019-10-20 13:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* top.tomxwd.controller.*.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">pointcut</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around</span>(<span class="string">"top.tomxwd.config.aop.MyAspect.pointcut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint pjp)</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        Object proceed = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            proceed = pjp.proceed();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable throwable) &#123;</span><br><span class="line">            throwable.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        log.info(<span class="string">"执行时间为&#123;&#125;"</span>,end-start);</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"top.tomxwd.config.aop.MyAspect.pointcut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"-------------------before-------------------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"top.tomxwd.config.aop.MyAspect.pointcut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"-------------------after--------------------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>debug源码发现是在后置处理器的时候进行aop动态代理的。</p>
<p>为什么jdk动态代理必须是接口？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">byte</span>[] proxyClassFile = ProxyGenerator.generateProxyClass(<span class="string">"$Proxy"</span>, <span class="keyword">new</span> Class[]&#123;UserService<span class="class">.<span class="keyword">class</span>&#125;)</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(<span class="string">"MyProxy.class"</span>);</span><br><span class="line">            fileOutputStream.write(proxyClassFile);</span><br><span class="line">            fileOutputStream.flush();</span><br><span class="line">            fileOutputStream.close();</span><br><span class="line">            System.out.println(<span class="string">"writer完毕"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查看输出的MyProxy.class反编译后的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> $<span class="title">Proxy</span> <span class="keyword">extends</span> <span class="title">Proxy</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m1;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m4;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m2;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m3;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Method m0;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $Proxy(InvocationHandler var1) <span class="keyword">throws</span>  &#123;</span><br><span class="line">        <span class="keyword">super</span>(var1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object var1)</span> <span class="keyword">throws</span>  </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (Boolean)<span class="keyword">super</span>.h.invoke(<span class="keyword">this</span>, m1, <span class="keyword">new</span> Object[]&#123;var1&#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error var3) &#123;</span><br><span class="line">            <span class="keyword">throw</span> var3;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable var4) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(var4);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> List <span class="title">userList</span><span class="params">()</span> <span class="keyword">throws</span>  </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (List)<span class="keyword">super</span>.h.invoke(<span class="keyword">this</span>, m4, (Object[])<span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error var2) &#123;</span><br><span class="line">            <span class="keyword">throw</span> var2;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable var3) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(var3);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> String <span class="title">toString</span><span class="params">()</span> <span class="keyword">throws</span>  </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (String)<span class="keyword">super</span>.h.invoke(<span class="keyword">this</span>, m2, (Object[])<span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error var2) &#123;</span><br><span class="line">            <span class="keyword">throw</span> var2;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable var3) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(var3);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> Integer <span class="title">saveUser</span><span class="params">(User var1)</span> <span class="keyword">throws</span>  </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (Integer)<span class="keyword">super</span>.h.invoke(<span class="keyword">this</span>, m3, <span class="keyword">new</span> Object[]&#123;var1&#125;);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error var3) &#123;</span><br><span class="line">            <span class="keyword">throw</span> var3;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable var4) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(var4);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> <span class="keyword">throws</span>  </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> (Integer)<span class="keyword">super</span>.h.invoke(<span class="keyword">this</span>, m0, (Object[])<span class="keyword">null</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error var2) &#123;</span><br><span class="line">            <span class="keyword">throw</span> var2;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable var3) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UndeclaredThrowableException(var3);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            m1 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"equals"</span>, Class.forName(<span class="string">"java.lang.Object"</span>));</span><br><span class="line">            m4 = Class.forName(<span class="string">"top.tomxwd.service.UserService"</span>).getMethod(<span class="string">"userList"</span>);</span><br><span class="line">            m2 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"toString"</span>);</span><br><span class="line">            m3 = Class.forName(<span class="string">"top.tomxwd.service.UserService"</span>).getMethod(<span class="string">"saveUser"</span>, Class.forName(<span class="string">"top.tomxwd.entity.User"</span>));</span><br><span class="line">            m0 = Class.forName(<span class="string">"java.lang.Object"</span>).getMethod(<span class="string">"hashCode"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException var2) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoSuchMethodError(var2.getMessage());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException var3) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NoClassDefFoundError(var3.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到JDK动态代理是继承自Proxy类，然后实现接口来达到代理的。底层是先通过字节码来实现。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/16/Hadoop/07_Hadoop_%E7%BC%96%E8%AF%91%E6%BA%90%E7%A0%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/16/Hadoop/07_Hadoop_%E7%BC%96%E8%AF%91%E6%BA%90%E7%A0%81/" itemprop="url">07_Hadoop_编译源码</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-16T22:34:39+08:00">
                2019-10-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop/" itemprop="url" rel="index">
                    <span itemprop="name">Hadoop</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="07-Hadoop-编译源码"><a href="#07-Hadoop-编译源码" class="headerlink" title="07_Hadoop_编译源码"></a>07_Hadoop_编译源码</h1><h2 id="前期准备工作"><a href="#前期准备工作" class="headerlink" title="前期准备工作"></a>前期准备工作</h2><p><strong>切换到root用户进行操作，减少文件夹权限出现问题</strong></p>
<ol>
<li><p>CentOS联网</p>
<p>配置CentOS能连接外网。</p>
</li>
<li><p>jar包准备（hadoop源码、JDK1.8、maven、ant、protobuf）</p>
<ul>
<li>hadoop-2.9.2-src.tar.gz</li>
<li>jdk-8u221-linux-x64.tar.gz</li>
<li><a href="https://archive.apache.org/dist/ant/" target="_blank" rel="noopener"></a>（build工具，打包用的，网站中binaries、source中下载）</li>
<li><a href="https://archive.apache.org/dist/maven/" target="_blank" rel="noopener"></a>（maven，网站中找maven3下载）</li>
<li><a href="https://github.com/protocolbuffers/protobuf/releases" target="_blank" rel="noopener">protobuf</a>（序列化的框架）</li>
</ul>
</li>
</ol>
<h2 id="tar包安装"><a href="#tar包安装" class="headerlink" title="tar包安装"></a>tar包安装</h2><p><strong>注意切换到root用户操作</strong></p>
<ol>
<li>JDK解压、配置环境变量JAVA_HOME和PATH，验证java-version<ul>
<li>编辑/etc/profile文件</li>
</ul>
</li>
<li>MAVEN解压、配置MAVEN_HOME和PATH</li>
<li>ant解压、配置ANT_HOME和PATH</li>
<li>安装glibc-headers和g++命令</li>
<li>安装make和cmake</li>
<li>解压protobuf，进入到解压后protobuf主目录，/opt/module/protobuf-2.5.0,然后执行以下命令</li>
<li>安装OpenSSL库</li>
<li>安装ncurses-devel库</li>
</ol>
<h2 id="编译源码"><a href="#编译源码" class="headerlink" title="编译源码"></a>编译源码</h2><ol>
<li><p>解压源码到/opt/目录</p>
</li>
<li><p>进入到hadoop源码主目录</p>
</li>
<li><p>通过maven执行编译命令</p>
</li>
<li><p>成功的64位hadoop包在/opt/hadoop/hadoop-dist/target下</p>
</li>
<li><p>编译源码过程中常见的问题及解决方案</p>
<ul>
<li><p>maven install的时候发现JVM内存溢出</p>
<p>在环境配置文件和maven的执行文件均可调整MAVEN_OPT的heap的大小。</p>
</li>
<li><p>编译期间maven报错。可能网络阻塞问题导致依赖库下载不完整导致，多次执行命令（一次通过比较难）</p>
</li>
<li><p>报ant、protobuf等错误，插件下载未完整或者插件版本问题，最开始链接有较多特殊情况</p>
</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/07/Hadoop/06_Hadoop_%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/07/Hadoop/06_Hadoop_%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F/" itemprop="url">06_Hadoop_运行模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-07T18:13:48+08:00">
                2019-10-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop/" itemprop="url" rel="index">
                    <span itemprop="name">Hadoop</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="06-Hadoop-运行模式"><a href="#06-Hadoop-运行模式" class="headerlink" title="06_Hadoop_运行模式"></a>06_Hadoop_运行模式</h1><p>Hadoop运行模式包括：本地模式、伪分布式模式以及完全分布式模式。</p>
<p><a href="http://hadoop.apache.org/" target="_blank" rel="noopener">Hadoop官方网站</a></p>
<p><a href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html" target="_blank" rel="noopener">getting start</a></p>
<h2 id="本地运行模式"><a href="#本地运行模式" class="headerlink" title="本地运行模式"></a>本地运行模式</h2><h3 id="官方Grep案例"><a href="#官方Grep案例" class="headerlink" title="官方Grep案例"></a>官方Grep案例</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir input</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cp etc/hadoop/*.xml input</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.2.1.jar grep input output <span class="string">'dfs[a-z.]+'</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat output/*</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>cd到hadoop目录下</p>
</li>
<li><p>mkdir input</p>
</li>
<li><p>复制etc下的配置文件到input</p>
<ul>
<li>cp etc/haddop/*.xml input</li>
</ul>
</li>
<li><p>运行share目录下的案例jar，且指定为grep案例，指定input以及output，这里output不可以先创建，否则报错，然后正则一下</p>
<ul>
<li>hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.9.2.jar grep input output ‘dfs[a-z.]+’</li>
</ul>
</li>
<li><p>查看output目录</p>
<ul>
<li><p>两个文件，一个是_SUCCESS，这个只是标记，标记成功完成。</p>
</li>
<li><p>另一个文件是结果，这里cat一下看看</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1	dfsadmin</span><br></pre></td></tr></table></figure>

<p>只有一个结果。</p>
</li>
<li><p>可以改一下正则表达式的内容查看输出。</p>
</li>
</ul>
</li>
</ol>
<h3 id="官方WordCount案例"><a href="#官方WordCount案例" class="headerlink" title="官方WordCount案例"></a>官方WordCount案例</h3><p>目的：统计单词的个数</p>
<ol>
<li><p>cd到hadoop目录下</p>
</li>
<li><p>创建wcinput目录</p>
<ul>
<li>mkdir wcinput</li>
</ul>
</li>
<li><p>在wcinput目录下创建wc.input文件</p>
<ul>
<li>touch wc.input</li>
</ul>
</li>
<li><p>编辑wc.input文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hadoop yarn</span><br><span class="line">hadoop mapreduce</span><br><span class="line">tomxwd</span><br><span class="line">tomxwd</span><br></pre></td></tr></table></figure>
</li>
<li><p>回到hadoop目录</p>
</li>
<li><p>运行share目录下的案例jar，指定wordcount案例，指定wcinput和wcoutput</p>
<ul>
<li>hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.9.2.jar wordcount wcinput wcoutput</li>
</ul>
</li>
<li><p>查看执行结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hadoop yarn</span><br><span class="line">hadoop mapreduce</span><br><span class="line">tomxwd</span><br><span class="line">tomxwd</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h2 id="伪分布式模式"><a href="#伪分布式模式" class="headerlink" title="伪分布式模式"></a>伪分布式模式</h2><h3 id="启动HDFS并运行MapReduce程序"><a href="#启动HDFS并运行MapReduce程序" class="headerlink" title="启动HDFS并运行MapReduce程序"></a>启动HDFS并运行MapReduce程序</h3><blockquote>
<p><a href="https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-common/SingleCluster.html#Pseudo-Distributed_Operation" target="_blank" rel="noopener">官网文档</a></p>
<p>在官网右侧，可以找到Configuration，是关于xml配置文件的详细解释</p>
</blockquote>
<p>伪分布式模式的配置信息与完全分布式模式的一样，只是说伪分布式模式只用一台服务器来完成，适合学习的时候用。</p>
<ol>
<li><p>修改etc/hadoop/core-site.xml配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定HDFS中NameNode的地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定Hadoop运行时产生文件的存储目录，默认是在/tmp/hadoop-$&#123;user.name&#125; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/open/environment/hadoop-2.9.2/data/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改etc/hadoop/hdfs-site.xml配置文件</p>
<p>默认值是3</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定HDFS副本的数量 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改etc/hadoop/hadoop-env.sh文件的jdk</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Set Hadoop-specific environment variables here.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The only required environment variable is JAVA_HOME.  All others are</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> optional.  When running a distributed configuration it is best to</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> JAVA_HOME <span class="keyword">in</span> this file, so that it is correctly defined on</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> remote nodes.</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> The java implementation to use.</span></span><br><span class="line">JAVA_HOME=/opt/open/environment/jdk1.8.0_221</span><br><span class="line">export JAVA_HOME=$&#123;JAVA_HOME&#125;</span><br></pre></td></tr></table></figure>

<p>上面的说明写了，指定JAVA_HOME，其他的不用</p>
</li>
<li><p>启动集群</p>
<ul>
<li><p>格式化NameNode（第一次启动时格式化，以后就不要总格式化）</p>
<p>bin/hdfs namenode -format</p>
<p>如果格式化遇到任何问题，可能是data文件没有删除，日志文件没有删除</p>
</li>
<li><p>启动NameNode</p>
<p>sbin/hadoop-daemon.sh start namenode</p>
<ul>
<li>出现提示：starting namenode, logging to /opt/open/environment/hadoop-2.9.2/logs/hadoop-tomxwd-namenode-hadoop101.out</li>
</ul>
</li>
<li><p>启动DataNode</p>
<p>sbin/hadoop-daemon.sh start datanode</p>
<ul>
<li>出现提示：starting datanode, logging to /opt/open/environment/hadoop-2.9.2/logs/hadoop-tomxwd-datanode-hadoop101.out</li>
</ul>
</li>
</ul>
</li>
<li><p>查看集群</p>
<ul>
<li>查看是否启动成功<ul>
<li>可以用jps命令来查看进程，是java ps的意思，有NameNode进程，以及DataNode进程</li>
<li><a href="http://192.168.5.101:50070是访问地址，主要关注最后的Utilities&gt;&gt;Browse" target="_blank" rel="noopener">http://192.168.5.101:50070是访问地址，主要关注最后的Utilities&gt;&gt;Browse</a> Directory</li>
</ul>
</li>
</ul>
</li>
<li><p>添加目录：</p>
<ul>
<li>bin/hdfs dfs -mkdir -p /user/tomxwd/input</li>
</ul>
</li>
<li><p>查看新添加的目录：</p>
<ul>
<li>bin/hdfs dfs -ls -R /</li>
</ul>
</li>
<li><p>把本地wcinput上传到HDFS上：</p>
<ul>
<li>bin/hdfs dfs -put wcinput/wc.input /user/tomxwd/input</li>
</ul>
</li>
<li><p>执行一下wordcount案例：</p>
<ul>
<li>bin/hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.9.2.jar wordcount /user/tomxwd/input /user/tomxwd/output</li>
</ul>
</li>
<li><p>到页面上看是否有output，然后下载下来看结果，或者用bin/hdfs dfs -cat /user/tomxwd/output/p*看结果即可。</p>
</li>
</ol>
<h4 id="NameNode格式化注意事项"><a href="#NameNode格式化注意事项" class="headerlink" title="NameNode格式化注意事项"></a>NameNode格式化注意事项</h4><p>格式化前的工作：</p>
<ol>
<li><p>在格式化前，先用jps看看是否已经启动了NameNode，如果启动了要结束进程。</p>
</li>
<li><p>然后再看data和log文件，如果有，则删掉。</p>
</li>
<li><p>最后进行NameNode格式化。</p>
</li>
</ol>
<p>为什么不能一直格式化NameNode？</p>
<ul>
<li><p>cd到data/tmp/dfs/name/current，查看VERSION文件的内容，以及到data/tmp/dfs/data/current，查看VERSION的内容。</p>
<ul>
<li>关注clusterID的值</li>
</ul>
</li>
<li><p>因为格式化NameNode，会产生新的集群id，导致NameNode和DataNode的集群id不一致，集群找不到以往的数据，所以在格式化NameNode的时候，一定要删除data数据和log日志，然后再格式化NameNode</p>
</li>
</ul>
<p><img src="06_Hadoop_%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F/1570547884705.png" alt="1570547884705"></p>
<h4 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h4><p>出现问题的时候看datanode.log文件，也可以看看namenode.log的信息。</p>
<h3 id="启动YARN并运行MapReduce程序"><a href="#启动YARN并运行MapReduce程序" class="headerlink" title="启动YARN并运行MapReduce程序"></a>启动YARN并运行MapReduce程序</h3><p>分析</p>
<ul>
<li>配置集群在YARN上运行MR</li>
<li>启动、测试集群<strong>增删查</strong></li>
<li>在YARN上执行WordCount案例</li>
</ul>
<p>执行步骤</p>
<ol>
<li><p>配置集群</p>
<ul>
<li><p>配置yarn-env.sh</p>
<p>配置一下JAVA_HOME</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> some Java parameters</span></span><br><span class="line">export JAVA_HOME=/opt/open/environment/jdk1.8.0_221</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置yarn-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Reducer获取数据的方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定YARN的ResourceManager的地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop101<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>配置mapred-env.sh</p>
<p>配置一下JAVAHOME</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> some Java parameters</span></span><br><span class="line">export JAVA_HOME=/opt/open/environment/jdk1.8.0_221</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置mapred-site.xml（把mapred-site.xml.template重命名）</p>
<p><code>mv mapred-site.xml.template mapred-site.xml</code></p>
<p><code>vim mapred-site.xml</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定MR运行在YARN上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>启动集群</p>
<ul>
<li><p>启动前确保NameNode和DataNode已经启动</p>
</li>
<li><p>启动ResourceManager</p>
<p><code>sbin/yarn-daemon.sh start resourcemanager</code></p>
</li>
<li><p>启动NodeManager</p>
<p><code>sbin/yarn-daemon.sh start nodemanager</code></p>
</li>
</ul>
</li>
<li><p>集群操作</p>
<ul>
<li><p>YARN的浏览器页面查看</p>
<p><a href="http://192.168.5.101:8088/cluster" target="_blank" rel="noopener">http://192.168.5.101:8088/cluster</a></p>
</li>
</ul>
</li>
<li><p>删掉之前的output，然后试着再次运行wordcount案例</p>
<p><code>hdfs dfs -rm -r /user/tomxwd/output</code></p>
<p><code>hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.9.2.jar wordcount /user/tomxwd/input /user/tomxwd/output</code></p>
</li>
<li><p>在运行的时候查看浏览器页面</p>
</li>
</ol>
<h4 id="配置历史服务器"><a href="#配置历史服务器" class="headerlink" title="配置历史服务器"></a>配置历史服务器</h4><p>为了查看程序的历史运行情况，需要配置一下历史服务器。具体步骤：</p>
<ol>
<li><p>配置mapred-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 历史服务器端地址  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop101:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 历史服务器web端地址  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop101:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>启动历史服务器</p>
<p><code>sbin/mr-jobhistory-daemon.sh start historyserver</code></p>
</li>
<li><p>用jps查看历史服务器是否启动</p>
</li>
<li><p>查看JobHistory</p>
<p><a href="http://192.168.5.101:19888/jobhistory" target="_blank" rel="noopener">http://192.168.5.101:19888/jobhistory</a></p>
</li>
</ol>
<h4 id="配置日志的聚集"><a href="#配置日志的聚集" class="headerlink" title="配置日志的聚集"></a>配置日志的聚集</h4><p>日志聚集概念：应用运行完成后，将程序的运行日志信息上传到HDFS系统上；</p>
<p>日志聚集的好处：可以方便查看到程序运行的详情，方便开发调试；</p>
<p>注意：<strong>开启日志聚集功能，需要重新启动NodeManager、ResourceManager和HistoryManager。</strong></p>
<p>​    用jps看开启了哪些，用原来启动的指令，改为stop即可。</p>
<p>步骤：</p>
<ol>
<li><p>配置yarn-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 日志聚集功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 日志保留时间为7天 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭NodeManager、ResourceManager和HistoryServer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn-daemon.sh stop nodemanager</span><br><span class="line">yarn-daemon.sh stop resourcemanager</span><br><span class="line">mr-jobhistory-daemon.sh stop historyserver</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动NodeManager、ResourceManager和HistoryServer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn-daemon.sh start nodemanager</span><br><span class="line">yarn-daemon.sh start resourcemanager</span><br><span class="line">mr-jobhistory-daemon.sh start historyserver</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除HDFS上存在的输出文件output</p>
<p><code>hdfs dfs -rm -rf /user/tomxwd/output</code></p>
</li>
<li><p>执行WordCount程序</p>
<p><code>hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.9.2.jar wordcount /user/tomxwd/input /user/tomxwd/output</code></p>
</li>
<li><p>查看日志</p>
<ul>
<li>可以在本地日志文件目录看</li>
<li>可以在网页直接点程序的日志看</li>
<li><a href="http://hadoop101:19888/jobhistory" target="_blank" rel="noopener">http://hadoop101:19888/jobhistory</a> 然后点击job后面的logs</li>
</ul>
</li>
</ol>
<h4 id="配置文件说明"><a href="#配置文件说明" class="headerlink" title="配置文件说明"></a>配置文件说明</h4><p>Hadoop配置文件分为两类：默认配置文件和自定义配置文件，只有用户想修改某一默认配置值时，才需要修改自定义配置文件，更改相应的属性值。</p>
<p>默认配置文件：</p>
<p>在官网，快速开始，左边最底下有Configuration，下面都是默认配置文件的信息。</p>
<table>
<thead>
<tr>
<th>要获取的默认文件</th>
<th>文件存放在Hadoop的jar包中的位置</th>
</tr>
</thead>
<tbody><tr>
<td>core-default.xml</td>
<td>hadoop-common-x.x.x.jar/core-default.xml</td>
</tr>
<tr>
<td>hdfs-default.xml</td>
<td>hadoop-hdfs-x.x.x.jar/hdfs-default.xml</td>
</tr>
<tr>
<td>yarn-default.xml</td>
<td>hadoop-yarn-common-x.x.x.jar/yarn-default.xml</td>
</tr>
<tr>
<td>mapred-default.xml</td>
<td>hadoop-mapreduce-client-core-x.x.x.jar/mapred-default.xml</td>
</tr>
</tbody></table>
<p>自定义配置文件：</p>
<p>core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml四个配置文件存放在%HADOOP_HOME/etc/hadoop这个路径，用户可以根据项目需求重新进行修改配置。</p>
<h2 id="完全分布式"><a href="#完全分布式" class="headerlink" title="完全分布式"></a>完全分布式</h2><p>分析：</p>
<ol>
<li>准备3台客户机（关闭防火墙、静态ip、主机名称）</li>
<li>安装JDK</li>
<li>配置环境变量</li>
<li>安装hadoop</li>
<li>配置环境变量</li>
<li>配置集群</li>
<li>单点启动</li>
<li>配置ssh</li>
<li>群起并测试</li>
</ol>
<h3 id="虚拟机准备"><a href="#虚拟机准备" class="headerlink" title="虚拟机准备"></a>虚拟机准备</h3><p>创建hadoop102，hadoop103，hadoop104三部虚拟机。</p>
<h3 id="编写集群分发脚本xsync"><a href="#编写集群分发脚本xsync" class="headerlink" title="编写集群分发脚本xsync"></a>编写集群分发脚本xsync</h3><ol>
<li><p>scp（secure copy）安全拷贝</p>
<ul>
<li>scp定义：<ul>
<li>scp可以实现服务器与服务器之间的数据拷贝（from server1 to server2）</li>
</ul>
</li>
<li>基本语法<ul>
<li>scp         -r         $pdir/$fname                        $user@$host:$pdir/$fname</li>
<li>命令       递归     要拷贝的文件路径/名称        目标用户@主机:目标路径/名称</li>
</ul>
</li>
<li>案例实操<ul>
<li>在hadoop101上，将hadoop101中/opt/open目录下的软件拷贝到hadoop102上。<ul>
<li>scp -r /opt/open root@hadoop102:/opt/open</li>
</ul>
</li>
<li>在hadoop103上，将hadoop101服务器上的/opt/open 目录下的软件拷贝到hadoop103上。<ul>
<li>sudo scp -r tomxwd@hadoop101:/opt/open root@hadoop103:/opt/open</li>
<li>sudo scp -r tomxwd@hadoop101:/opt/open ./</li>
</ul>
</li>
<li>在hadoop103上，将hadoop101服务器上的/opt/open 目录下的软件拷贝到hadoop104上。<ul>
<li>sudo scp -r tomxwd@hadoop101:/opt/open root@hadoop104:/opt/open</li>
</ul>
</li>
<li>注意要把拷贝过去的文件该权限。/etc/profile同样操作，以及最后需要source /etc/profile即可。</li>
</ul>
</li>
</ul>
</li>
<li><p>rsync远程同步工具</p>
<p>rsync主要用于备份和镜像，具有速度快、避免复制相同内容和支持符号链接的优点。</p>
<p><strong>rsync和scp的区别：</strong>用rsync做文件的复制要比scp的速度快，rsync只对差异文件做更新，而scp是把所有文件复制过去。</p>
<ul>
<li><p>基本语法</p>
<ul>
<li><p>rsync            -rvl            $pdir/$fname                    $user@host:$pdir/$fname</p>
</li>
<li><p>命令              选项参数  要拷贝的文件路径/名称     目标用户@主机:目标路径/名称</p>
</li>
<li><p>选项参数说明：</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>-r</td>
<td>递归</td>
</tr>
<tr>
<td>-v</td>
<td>显示复制过程</td>
</tr>
<tr>
<td>-l</td>
<td>拷贝符号链接</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>案例实操</p>
<ul>
<li>把hadoop101服务器上的/opt/open目录同步到hadoop102服务器的root用户的/opt/open目录：<ul>
<li>rsync -rvl /opt/open/ root@hadoop102:/opt/open</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>xsync集群分发脚本</p>
<ul>
<li><p>需求：循环复制文件到所有节点的相同目录下</p>
</li>
<li><p>需求分析：</p>
<ul>
<li><p>rsync命令原始拷贝：</p>
<p>rsync -rvl /opt/module    root@hadoop103:/opt</p>
</li>
<li><p>期望脚本：</p>
<p>xsync 要同步的文件名称</p>
</li>
<li><p>说明：</p>
<p>在/home/tomxwd/bin这个目录下存放的脚本，tomxwd用户可以在系统的任何地方直接运行。</p>
</li>
</ul>
</li>
<li><p>脚本实现</p>
<ul>
<li><p>在/home/tomxwd目录下创建bin目录，并在bin目录下创建xsync文件，文件内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. 获取输出参数的个数，如果没有参数，就直接退出</span></span><br><span class="line">pcount=$#</span><br><span class="line">echo $pcount</span><br><span class="line">echo $1</span><br><span class="line">if (($pcount==0))</span><br><span class="line">then</span><br><span class="line">        echo no args;</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 获取文件的名称</span></span><br><span class="line">p1=$1</span><br><span class="line">fname=`basename $p1`</span><br><span class="line">echo fname=$fname</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 获取上级目录的绝对路径 <span class="built_in">cd</span> -P是进入到软链接实际的路径</span></span><br><span class="line">pdir=`cd -P $(dirname $p1); pwd`</span><br><span class="line">echo pdir=$pdir</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. 获取当前用户名称</span></span><br><span class="line">user=`whoami`</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5. 循环</span></span><br><span class="line">for((host=103; host&lt;105; host++));do</span><br><span class="line">        echo --------------hadoop$host-------------------</span><br><span class="line">   rsync -rvl $pdir/$fname $user@hadoop$host:$pdir</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>修改脚本xsync具有执行权限</p>
<p>chmod 777 xsync</p>
<p>u+o也够用了</p>
</li>
<li><p>调用脚本形式：xsync文件名称</p>
<pre><code>xsync /home/tomxwd/bin</code></pre><ul>
<li>注意：如果将xsync放到/home/tomxwd/bin目录下仍然不能实现全局使用，可以将xsync移动到/usr/local/bin目录下。可以用echo $PATH命令看是否包含/home/tomxwd/bin目录即可确定能否使用。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="集群配置"><a href="#集群配置" class="headerlink" title="集群配置"></a>集群配置</h3><ol>
<li>集群部署规划</li>
</ol>
<table>
<thead>
<tr>
<th></th>
<th>hadoop102</th>
<th>hadoop103</th>
<th>hadoop104</th>
</tr>
</thead>
<tbody><tr>
<td>HDFS</td>
<td>NameNode<br />DataNode</td>
<td><br />DataNode</td>
<td>SecondaryNameNode<br />DataNode</td>
</tr>
<tr>
<td>YARN</td>
<td><br />NodeManager</td>
<td>ResourceManager<br />NodeManager</td>
<td><br />NodeManager</td>
</tr>
</tbody></table>
<ol start="2">
<li><p>配置集群</p>
<ul>
<li><p>核心配置文件</p>
<p>core-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定HDFS中NameNode的地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://hadoop102:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定Hadoop运行时产生文件的存储目录，默认是在/tmp/hadoop-$&#123;user.name&#125; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/opt/open/environment/hadoop-2.9.2/data/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>HDFS配置文件</p>
<p>hadoop-env.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/open/environment/jdk1.8.0_221</span><br></pre></td></tr></table></figure>

<p>hdfs-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定HDFS副本的数量 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 指定Hadoop辅助名称节点主机配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop104:50090<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>YARN配置文件</p>
<p>yarn-env.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/open/environment/jdk1.8.0_221</span><br></pre></td></tr></table></figure>

<p>yarn-site.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Reducer获取数据的方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 指定YARN的ResourceManager的地址 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hadoop103<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>MapReduce配置文件</p>
<p>mapred-env.sh</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/opt/open/environment/jdk1.8.0_221</span><br></pre></td></tr></table></figure>

<p>mapred-site.xml（拷贝mapred-site.xml.template得到）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 指定MR运行在YARN上 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>在集群上分发配置好的Hadoop配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xsync /opt/open/environment/hadoop-2.9.2/</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看文件分发情况</p>
<p>用cat指令即可。</p>
</li>
</ol>
<h3 id="集群单点启动"><a href="#集群单点启动" class="headerlink" title="集群单点启动"></a>集群单点启动</h3><ol>
<li><p>如果是第一次启动集群，需要格式化NameNode</p>
<p>前提是，jps看，没有启动任何程序。删除data以及logs文件夹，再格式化！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop namenode -format</span><br></pre></td></tr></table></figure>
</li>
<li><p>在hadoop102上启动NameNode</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop-daemon.sh start namenode</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure>
</li>
<li><p>在hadoop102、hadoop103以及hadoop104上分别启动DataNode</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop-daemon.sh start datanode</span><br></pre></td></tr></table></figure>




</li>
</ol>
<h3 id="配置SSH无密登录配置"><a href="#配置SSH无密登录配置" class="headerlink" title="配置SSH无密登录配置"></a>配置SSH无密登录配置</h3><ol>
<li><p>配置ssh</p>
<ul>
<li><p>基本语法</p>
<p>ssh另一台电脑的ip地址</p>
</li>
<li><p>ssh连接时出现Host key verification failed的解决方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[tomxwd@hadoop102 ~]$ ssh 192.168.5.102</span><br><span class="line">The authenticity of host '192.168.5.102 (192.168.5.102)' can't be established.</span><br><span class="line">RSA key fingerprint is 97:36:de:ba:15:f4:99:4c:e5:0f:0a:22:03:be:72:e9.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added '192.168.5.102' (RSA) to the list of known hosts.</span><br><span class="line">tomxwd@192.168.5.102's password: </span><br><span class="line">Last login: Tue Oct 15 13:24:23 2019 from 192.168.5.1</span><br></pre></td></tr></table></figure>

<p>输入yes并输入密码即可</p>
</li>
</ul>
</li>
<li><p>无密钥配置</p>
<ul>
<li><p>免密登录原理：</p>
<p><img src="06_Hadoop_%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F/1571144054503.png" alt="1571144054503"></p>
</li>
<li><p>生成公钥和私钥</p>
<p>在home目录下的.ssh文件夹（隐藏文件夹）下，使用：</p>
<p>ssh-keygen -t rsa</p>
<p>然后敲三个回车，就会生成两个文件id_rsa（私钥）、id_rsa.pub（公钥）</p>
</li>
<li><p>将公钥拷贝到要免密登录的目标机器上</p>
<p>ssh-copy-id hadoop102</p>
<p>ssh-copy-id hadoop103</p>
<p>ssh-copy-id hadoop104</p>
<p>三个都要copy，包括本身；</p>
<p>在三台机器上都需要生成sshkey，并且三台都要有对方的公钥。</p>
<p><strong>注意：在hadoop102上采用root用户，配置无密登录到hadoop102，hadoop103，hadoop104，然后在hadoop103上采用tomxwd用户，配置无密登录到hadoop102，hadoop103，hadoop104上。</strong></p>
<p>原因主要是namenode以及resourcemanager需要跟各个服务器互通信息。</p>
</li>
<li><p>除了tomxwd用户外，还需要把root用户也配置ssh</p>
<p>su root 切换到root用户，重复上一步即可。(如果root目录下没有.ssh文件,就用ssh localhost来生成一次，其实就是用一次ssh即可）</p>
</li>
</ul>
</li>
<li><p>.ssh文件夹下（~/.ssh）的文件功能解释</p>
<table>
<thead>
<tr>
<th>文件名</th>
<th>功能解释</th>
</tr>
</thead>
<tbody><tr>
<td>known_hosts</td>
<td>记录ssh访问过的计算机的公钥（public key）</td>
</tr>
<tr>
<td>id_rsa</td>
<td>生成的私钥</td>
</tr>
<tr>
<td>id_rsa.pub</td>
<td>生成的公钥</td>
</tr>
<tr>
<td>authorized_keys</td>
<td>存放授权过的无密登录服务器公钥</td>
</tr>
</tbody></table>
</li>
</ol>
<h3 id="群起集群"><a href="#群起集群" class="headerlink" title="群起集群"></a>群起集群</h3><ol>
<li><p>配置slaves</p>
<p>/etc/hadoop/slaves配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hadoop102</span><br><span class="line">hadoop103</span><br><span class="line">hadoop104</span><br></pre></td></tr></table></figure>

<p><strong>注意：该文件中添加的内容结尾不允许有空格，文件中不允许有空行。</strong>里面默认的localhost一定要去掉。</p>
<p>同步所有节点配置文件：</p>
<p><code>xsync slaves</code></p>
</li>
<li><p>启动集群</p>
<ul>
<li><p>hdfs（在hadoop102上启动）</p>
<p><code>start-dfs.sh</code></p>
</li>
<li><p>yarn（在hadoop103上启动，因为resourcemanager在103上）</p>
<p><code>start-yarn.sh</code></p>
<p><strong>注意：NameNode和ResourceManager如果不是同一台机器，不能在NameNode上启动YARN，应该在ResourceManager所在的机器上启动YARN</strong></p>
</li>
</ul>
</li>
<li><p>集群基本测试</p>
<ul>
<li><p>上传文件到集群</p>
<ul>
<li><p>上传小文件</p>
<p><code>hdfs dfs -mkdir -p /user/tomxwd/input</code></p>
<p><code>hdfs dfs -put wcinput/wc.input /user/tomxwd/input</code></p>
</li>
<li><p>上传大文件</p>
<p><code>hadoop fs -put /opt/open/download/hadoop-2.9.2.tar.gz /</code></p>
</li>
</ul>
</li>
<li><p>上传文件后查看文件存放在什么位置</p>
<ul>
<li><p>查看HDFS文件存储路径    </p>
<p>/opt/open/environment/hadoop-2.9.2/data/tmp/dfs/data/current/BP-918887964-192.168.5.102-1571093054040/current/finalized/subdir0/subdir0</p>
</li>
<li><p>可以把几块文件用&gt;&gt;重定向追加到一个文件中，进行解压，发现是刚刚上传的hadoop压缩包。</p>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="集群启动-停止方式总结"><a href="#集群启动-停止方式总结" class="headerlink" title="集群启动/停止方式总结"></a>集群启动/停止方式总结</h3><ol>
<li><p>各个服务组件逐一启动/停止</p>
<ul>
<li><p>分别启动/停止HDFS组件</p>
<p><code>hadoop-daemon.sh start/stop namenode/datanode/secondarynamenode</code></p>
</li>
<li><p>启动/停止YARN</p>
<p><code>yarn-daemon.sh start/stop resourcemanager/nodemanager</code></p>
</li>
</ul>
</li>
<li><p>各个模块分开启动/停止（配置ssh是前提）<strong>常用</strong></p>
<ul>
<li>整体启动/停止HDFS<ul>
<li>start-dfs.sh</li>
<li>stop-dfs.sh</li>
</ul>
</li>
<li>整体启动/停止YARN<ul>
<li>start-yarn.sh</li>
<li>stop-yarn.sh</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="集群时间同步（root用户操作）"><a href="#集群时间同步（root用户操作）" class="headerlink" title="集群时间同步（root用户操作）"></a>集群时间同步（root用户操作）</h3><p>时间同步的方式：找一个机器，作为时间服务器，所有的机器与这台集群时间进行定时的同步，比如每隔十分钟同步一次时间。</p>
<p><strong>时间服务器hadoop102—-hadoop103定时去获取hadoop102时间服务器主机时间——&gt;其他服务器hadoop103</strong></p>
<ul>
<li><p>时间服务器配置：</p>
<ol>
<li><p>检查ntp是否安装</p>
<p><code>rpm -qa | grep ntp</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fontpackages-filesystem-1.41-1.1.el6.noarch</span><br><span class="line">ntp-4.2.6p5-12.el6.centos.2.x86_64</span><br><span class="line">ntpdate-4.2.6p5-12.el6.centos.2.x86_64</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改ntp配置文件</p>
<p><code>vim /etc/ntp.conf</code></p>
<ul>
<li><p>修改1：授权192.168.1.0-192.168.1.255网段上所有机器可以从这台机器上查询和同步时间</p>
<p># restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</p>
<p>改为：</p>
<p># restrict 192.168.1.0 mask 255.255.255.0 nomodify notrap</p>
<p>这里，192.168.1.0需要改成自己的网段，如192.168.5.0</p>
</li>
<li><p>修改2：集群在局域网中，不使用其他互联网上的时间</p>
<p>server 0.centos.pool.ntp.org iburst</p>
<p>server 1.centos.pool.ntp.org iburst</p>
<p>server 2.centos.pool.ntp.org iburst</p>
<p>server 3.centos.pool.ntp.org iburst</p>
<p>改为：</p>
<p># server0 .centos.pool.ntp.org iburst</p>
<p># server1 .centos.pool.ntp.org iburst</p>
<p># server2 .centos.pool.ntp.org iburst</p>
<p># server3 .centos.pool.ntp.org iburst</p>
</li>
<li><p>添加3：当该结点丢失网络连接，依然可以采用本地时间作为时间服务器为集群中的其他结点提供时间同步）</p>
<p>server 127.127.1.0</p>
<p>fudge 127.127.1.0 stratum 10</p>
</li>
</ul>
</li>
<li><p>修改/etc/sysconfig/ntpd文件</p>
<p>让硬件时间与系统时间一起同步</p>
<p><code>vim /etc/sysconfig/ntpd</code></p>
<p>增加内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SYNC_HWCLOCK=yes</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新启动ntpd服务</p>
<p><code>service ntpd status</code></p>
<p>ntpd 已停</p>
<p><code>service ntpd start</code></p>
<p>ntpd 启动</p>
</li>
<li><p>设置ntpd服务开机启动</p>
<p><code>chkconfig ntpd on</code></p>
</li>
</ol>
</li>
<li><p>其他服务器配置：</p>
<ol>
<li><p>在其他服务器上配置10分钟与时间服务器同步一次</p>
<p><code>crontab -e</code></p>
<p>内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/10 * * * * /usr/sbin/ntpdate hadoop102</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改任意机器时间</p>
<p><code>date -s &quot;2019-10-16 21:21:21&quot;</code></p>
</li>
<li><p>十分钟后查看机器是否与时间服务器同步</p>
<p><code>date</code></p>
<p>测试的时候可以调整为1分钟看效果。</p>
</li>
</ol>
</li>
</ul>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>jps发现没进程，但是重启提示已经开启，原因是linux根目录下/tmp目录中存在启动的进程临时文件，将集群相关进程删除，再重新启动集群。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/07/Hadoop/05_Hadoop_%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/07/Hadoop/05_Hadoop_%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/" itemprop="url">05_Hadoop_目录结构</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-07T17:19:02+08:00">
                2019-10-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop/" itemprop="url" rel="index">
                    <span itemprop="name">Hadoop</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="05-Hadoop-目录结构"><a href="#05-Hadoop-目录结构" class="headerlink" title="05_Hadoop_目录结构"></a>05_Hadoop_目录结构</h1><ul>
<li>bin<ul>
<li>存放了hadoop、hdfs、yarn等基本服务</li>
</ul>
</li>
<li>etc<ul>
<li>配置信息</li>
</ul>
</li>
<li>include<ul>
<li>头文件，c相关</li>
</ul>
</li>
<li>lib<ul>
<li>本地库</li>
</ul>
</li>
<li>sbin<ul>
<li>启动停止等命令</li>
</ul>
</li>
<li>share<ul>
<li>分享，里面有说明手册、案例等。</li>
<li>可以删掉</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/06/Linux/04_Linux_Shell/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/06/Linux/04_Linux_Shell/" itemprop="url">04_Linux_Shell</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-06T09:54:05+08:00">
                2019-10-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="04-Linux-Shell"><a href="#04-Linux-Shell" class="headerlink" title="04_Linux_Shell"></a>04_Linux_Shell</h1><ol>
<li>Linux运维工程师在进行服务器集群管理的时候，需要编写shell程序来进行服务器管理。</li>
<li>对于JavaEE和Python程序员来说，工作的需要，要求写一些shell脚本进行程序或服务器的维护，比如编写定时备份数据库的脚本。</li>
<li>对于大数据程序员来说，需要编写shell程序来管理集群。</li>
</ol>
<h2 id="Shell是什么"><a href="#Shell是什么" class="headerlink" title="Shell是什么"></a>Shell是什么</h2><p>Shell是一个命令行解释器，为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用shell来启动、挂起、停止甚至是编写一些程序。</p>
<p><img src="04_Linux_Shell/1570327060979.png" alt="1570327060979"></p>
<h2 id="Shell脚本的执行方式"><a href="#Shell脚本的执行方式" class="headerlink" title="Shell脚本的执行方式"></a>Shell脚本的执行方式</h2><p>脚本格式要求：</p>
<ul>
<li>脚本以#!/bin/bash开头</li>
<li>脚本需要有可执行权限</li>
</ul>
<p>脚本的常用执行方式：</p>
<ol>
<li>输入脚本的绝对路径或相对路径，需要执行权限 </li>
<li>sh+脚本，不需要执行权限</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo "hello,world!"</span><br></pre></td></tr></table></figure>

<h2 id="Shell的变量"><a href="#Shell的变量" class="headerlink" title="Shell的变量"></a>Shell的变量</h2><h3 id="shell变量的介绍"><a href="#shell变量的介绍" class="headerlink" title="shell变量的介绍"></a>shell变量的介绍</h3><ol>
<li>Linux Shell中的变量分为，系统变量和用户自定义变量。</li>
<li>系统变量：$HOME、$PWD、$SHELL、$USER等等，比如echo $HOME；</li>
<li>显示当前shell中所有变量：set</li>
</ol>
<h3 id="shell变量的定义"><a href="#shell变量的定义" class="headerlink" title="shell变量的定义"></a>shell变量的定义</h3><p>基本语法：</p>
<ol>
<li>定义变量：变量=值</li>
<li>撤销变量：unset 变量</li>
<li>声明静态变量：readonly 变量，<strong>注意：不能unset</strong></li>
</ol>
<p>案例：</p>
<ol>
<li><p>定义变量A，撤销变量A</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A=100</span><br><span class="line">echo "A=$A"</span><br><span class="line">unset A</span><br><span class="line">echo "A=$A"</span><br></pre></td></tr></table></figure>
</li>
<li><p>声明静态变量B=2，不能unset</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">readonly B=2</span><br><span class="line">echo "B=$B"</span><br><span class="line">unset B</span><br><span class="line">echo "B=$B"</span><br></pre></td></tr></table></figure>

<p>会报错，不可以unset静态变量，但是可以继续执行。</p>
</li>
<li><p>可把变量提升为全局环境变量，供其他shell程序使用</p>
</li>
</ol>
<p>定义变量的规则：</p>
<ol>
<li>变量名称可以由字母、数字和下划线组成，但是不能以数字开头。</li>
<li>等号两侧不能有空格</li>
<li>变量名称一般习惯为大写</li>
</ol>
<p>将命令的返回值赋给变量</p>
<ol>
<li>A=`ls -la`反引号（键盘左上角），运行里面的命令，并把结果返回给变量A</li>
<li>A=$(ls -la)等价于反引号</li>
</ol>
<h3 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h3><p>基本语法：</p>
<ol>
<li>export 变量名=变量值：将shell变量输出为环境变量</li>
<li>source 配置文件：让修改后的配置信息立即生效</li>
<li>echo $变量名：查询环境变量的值</li>
</ol>
<p>案例：</p>
<ol>
<li>在/etc/profile文件中定义TOMCAT_HOME环境变量</li>
<li>查看环境变量TOMCAT_HOME的值</li>
<li>在另外一个shell程序中使用TOMCAT_HOME</li>
</ol>
<p>注意：在输出TOMCAT_HOME环境变量前，需要让其生效：source /etc/profile</p>
<h3 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h3><p>当我们执行一个shell脚本的时候，如果希望得到命令行的参数信息，就可以用到位置参数变量</p>
<p>比如：./myshell.sh 100 200，这个就是一个执行shell的命令行，可以在myshell脚本中获取到参数信息</p>
<p>基本语法：</p>
<ul>
<li>$n：n为数字，$0表示命令本身，$1-$9表示第一个到第九个参数，十以上的参数需要用大括号包含，如${10}</li>
<li>$*：这个变量代表命令行中所有的参数，<strong>$*把所有的参数看成一个整体</strong></li>
<li>$@：这个变量代表命令行中所有的参数，<strong>$@把每个参数区分对待</strong></li>
<li>$#：这个变量代表命令行中所有参数的个数</li>
</ul>
<p>案例：</p>
<p>编写一个shell脚本positionParam.sh，在脚本中获取到命令行的各个参数信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo $0</span><br><span class="line">echo $1</span><br><span class="line">echo $2</span><br><span class="line">echo $*</span><br><span class="line">echo $@</span><br><span class="line">echo $#</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost shell]# ./positionParam.sh 100 200</span><br><span class="line">./positionParam.sh</span><br><span class="line">100</span><br><span class="line">200</span><br><span class="line">100 200</span><br><span class="line">100 200</span><br><span class="line">2</span><br></pre></td></tr></table></figure>



<h3 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h3><p>就是shell设计者事先定义好的变量，可以直接在shell脚本中使用</p>
<p>基本语法：</p>
<ul>
<li>$$：当前进程的进程号（PID）</li>
<li>$!：后台运行的最后一个进程的进程号（PID）</li>
<li>$?：最后一次执行的命令的返回状态，如果这个变量的值为0，证明上一个命令正确执行，如果这个变量的值部位0（具体是哪个数，由命令自己决定），则证明上一个命令执行不正确。</li>
</ul>
<p>案例：</p>
<p>&amp;以后台的方式执行</p>
<p>shell脚本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo "当前的进程号=$$"</span><br><span class="line">echo "后台运行myShell.sh"</span><br><span class="line">./myShell.sh &amp;</span><br><span class="line">echo "最后的进程号=$!"</span><br><span class="line">echo "执行的值是=$?"</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost shell]# ./parVar.sh </span><br><span class="line">当前的进程号=2661</span><br><span class="line">后台运行myShell.sh</span><br><span class="line">最后的进程号=2662</span><br><span class="line">执行的值是=0</span><br><span class="line">[root@localhost shell]# total 12 -rwxr--r--. 1 root root 223 Oct 5 19:58 myShell.sh -rwxr--r--. 1 root root 141 Oct 5 20:09 parVar.sh -rwxr--r--. 1 root root 60 Oct 5 20:00 positionParam.sh</span><br><span class="line"></span><br><span class="line">Sat Oct 5 20:10:52 PDT 2019</span><br><span class="line"></span><br><span class="line">date=Sat Oct  5 20:10:52 PDT 2019</span><br></pre></td></tr></table></figure>



<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><p>基本语法：</p>
<ol>
<li>$((运算式))或$[运算式]</li>
<li>expr m + n（<strong>注意expr运算符间要有空格</strong>）</li>
<li>expr m - n</li>
<li>expr *,/,%：乘除取余</li>
</ol>
<p>案例：</p>
<ol>
<li><p>算（2+3）*4的值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">RESULT1=$(((2+3)*4))</span><br><span class="line">echo $RESULT1</span><br><span class="line"></span><br><span class="line">RESULT2=$[(2+3)*4]</span><br><span class="line">echo $RESULT2</span><br><span class="line"></span><br><span class="line">TEMP=`expr 2 + 3`</span><br><span class="line">RESULT3=`expr $TEMP \* 4`</span><br><span class="line">echo $RESULT3</span><br></pre></td></tr></table></figure>
</li>
<li><p>求两个参数的和</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SUM=$[$1+$2]</span><br><span class="line">echo $SUM</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><p>基本语法：</p>
<p>[ condition ]（注意condition前后要有空格）</p>
<p>如果非空就返回true，可以用$?验证（0为false，&gt;1为false）</p>
<p>案例：</p>
<p>[ tomxwd ]：true</p>
<p>[]：false</p>
<p>[ condition ]&amp;&amp;echo OK||echo notok</p>
<p>两个整数比较：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>字符串比较</td>
</tr>
<tr>
<td>-lt</td>
<td>小于</td>
</tr>
<tr>
<td>-le</td>
<td>小于等于</td>
</tr>
<tr>
<td>-eq</td>
<td>等于</td>
</tr>
<tr>
<td>-gt</td>
<td>大于</td>
</tr>
<tr>
<td>-ge</td>
<td>大于等于</td>
</tr>
<tr>
<td>ne</td>
<td>不等于</td>
</tr>
</tbody></table>
<p>按照文件权限进行判断</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-r</td>
<td>有读的权限</td>
</tr>
<tr>
<td>-w</td>
<td>有写的权限</td>
</tr>
<tr>
<td>x</td>
<td>有执行的权限</td>
</tr>
</tbody></table>
<p>按照文件类型进行判断</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>-f</td>
<td>文件存在并且是一个常规的文件</td>
</tr>
<tr>
<td>-e</td>
<td>文件存在</td>
</tr>
<tr>
<td>-d</td>
<td>文件存在并且是一个目录</td>
</tr>
</tbody></table>
<p>案例：</p>
<ul>
<li><p>“ok”是否等于“ok“</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">if [ "ok"="ok" ]</span><br><span class="line">then </span><br><span class="line">	echo "equal"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
<li><p>23是否大于等于22</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ 23 -gt 22 ]</span><br><span class="line">then </span><br><span class="line">	echo "&gt;"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
<li><p>/root/install.log目录中的文件是否存在</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if [ -e /root/Desktop/shell/aaa.txt ]</span><br><span class="line">then </span><br><span class="line">	echo "存在"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><h3 id="if判断"><a href="#if判断" class="headerlink" title="if判断"></a>if判断</h3><p>基本语法：</p>
<p>if [ 条件判断式 ];then</p>
<p>​    程序</p>
<p>fi</p>
<p>或者</p>
<p>if [ 条件判断式 ]</p>
<p>​    then</p>
<p>​    程序</p>
<p>​    elif [ 条件判断式 ]</p>
<p>​    then</p>
<p>​    程序</p>
<p>fi</p>
<p>注意事项：</p>
<ol>
<li>[ 条件判断式 ]，中括号和条件判断式之间必须有空格</li>
<li>推荐第二种写法</li>
</ol>
<p>案例：</p>
<p>写一个shell脚本，如果输入的参数大于等于60，就输出及格了，如果小于60则不及格。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">if [ $&#123;1&#125; -ge 60 ]</span><br><span class="line">then</span><br><span class="line">        echo "及格了"</span><br><span class="line">elif [ $&#123;1&#125; -lt 60 ]</span><br><span class="line">then</span><br><span class="line">        echo "不及格"</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



<h3 id="case语句"><a href="#case语句" class="headerlink" title="case语句"></a>case语句</h3><p>基本语法：</p>
<p>case $变量名 in</p>
<p>“值1”)</p>
<p>如果变量的值等于值1，则执行程序1</p>
<p>;;</p>
<p>“值2”)</p>
<p>如果变量的值等于值2，则执行程序2</p>
<p>;;</p>
<p>*）</p>
<p>如果变量的值不等于任意一个，则执行以下</p>
<p>;;</p>
<p>esac</p>
<p>实例：</p>
<p>命令行参数是1的时候，输出”周一”，是2的时候，输出”周二”，其他输出”other”：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">case $1 in</span><br><span class="line">"1")</span><br><span class="line">echo "周一"</span><br><span class="line">;;</span><br><span class="line">"2")</span><br><span class="line">echo "周二"</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">echo "other"</span><br><span class="line">;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>



<h3 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h3><p>基本语法：</p>
<ul>
<li><p>第一种：</p>
<p>for 变量 in 值1 值2 值3…</p>
<p>do</p>
<p>​    程序</p>
<p>done</p>
</li>
<li><p>第二种：</p>
<p>for(( 初始值;循环控制条件;变量变化 ))</p>
<p>do</p>
<p>​    程序</p>
<p>done</p>
</li>
</ul>
<p>实例：</p>
<ul>
<li><p>第一种：</p>
<p>打印命令行输入的参数</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">for i in "$@"</span><br><span class="line">do</span><br><span class="line">	echo "the num is $i"</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二种：</p>
<p>从1加到100的值输出显示，这里可以看出$*和$@的区别</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">SUM=0</span><br><span class="line">for((i=1;i&lt;=100;i++))</span><br><span class="line">do</span><br><span class="line">	SUM=$[ $SUM+$i ]	</span><br><span class="line">done</span><br><span class="line">echo $SUM</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h3><p>基本语法：</p>
<p>while[ 条件判断式 ]</p>
<p>do</p>
<p>​    程序</p>
<p>done</p>
<p>案例：</p>
<p>从命令行输入一个数n，计算1+…+n的值</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">i=1</span><br><span class="line">SUM=0</span><br><span class="line">while [ $i -le $&#123;1&#125; ]</span><br><span class="line">do</span><br><span class="line">	SUM=$[$SUM+$i]</span><br><span class="line">	i=$[$i+1]</span><br><span class="line">done</span><br><span class="line">echo "sum=$SUM"</span><br></pre></td></tr></table></figure>



<h2 id="read读取控制台输入"><a href="#read读取控制台输入" class="headerlink" title="read读取控制台输入"></a>read读取控制台输入</h2><p>基本语法：</p>
<p>read（选项）（参数）</p>
<p>选项：</p>
<ul>
<li>-p：指定读取值时的提示符</li>
<li>-t：指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不等待了</li>
</ul>
<p>参数：</p>
<p>变量：指定读取值的变量名</p>
<p>案例：</p>
<ol>
<li>读取控制台输入一个num值</li>
<li>读取控制台输入一个num值，在10秒内输入</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">read -p "请输入一个数字num1=" NUM1</span><br><span class="line">echo "你输入的值是 num1=$NUM1"</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">read -t 10 -p "请输入一个数字num2=" NUM2</span><br><span class="line">echo "你输入的值是 num2=$NUM2"</span><br></pre></td></tr></table></figure>



<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>shell编程和其他编程语言一样，有系统函数，也可以自定义函数。</p>
<p>系统函数：</p>
<ul>
<li><p>basename基本语法</p>
<ul>
<li><p>功能：返回完整路径最后/的部分，常用于获取文件名</p>
<ul>
<li>basename [pathname] [suffix]</li>
<li>basename [string] [suffix]</li>
<li>basename命令会删掉所有的前缀包括最后一个/字符，然后将字符串显示出来</li>
</ul>
</li>
<li><p>选项：</p>
<ul>
<li>suffix为后缀，如果指定了suffix，basename会将pathname或string中的suffix去掉</li>
</ul>
</li>
<li><p>案例：</p>
<ul>
<li><p>请返回/home/aaa/test.txt的test.txt部分</p>
<p>直接在命令行就可以：basename /home/aaa/test.txt</p>
<p>甚至后缀都不要：basename /home/aaa/test.txt .txt</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>dirname基本语法</p>
<ul>
<li><p>功能：返回完整路径最后/的前面部分，常用于返回路径部分</p>
<ul>
<li>dirname 文件绝对路径</li>
<li>从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）</li>
</ul>
</li>
<li><p>案例：</p>
<ul>
<li><p>请返回/home/aaa/test.txt中的/home/aaa</p>
<p>dirname /home/aaa/test.txt</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>自定义函数：</p>
<ul>
<li><p>基本语法</p>
<p>[ function ] funname[()]</p>
<p>{</p>
<p>​    Action;</p>
<p>​    [return int;]</p>
<p>}</p>
<p>调用直接写函数名：funname [值]</p>
</li>
<li><p>案例：</p>
<ul>
<li>计算输入的两个参数的和</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">function getSum()&#123;</span><br><span class="line">	SUM=$[$n1+$n2]</span><br><span class="line">	echo "和是=$SUM"</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">read -p "请输入第一个数n1" n1</span><br><span class="line">read -p "请输入第二个数n2" n2</span><br><span class="line"></span><br><span class="line">getSum $n1 $n2</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h2><p>需求：</p>
<ol>
<li>每天凌晨2:10备份数据库tomxwdDB到/data/backup/db</li>
<li>备份开始和备份结束能够给出相应的提示信息</li>
<li>备份后的文件要求以备份时间为文件名，并打包成.tar.gz的形式，比如：2019-10-6_230201.tar.gz</li>
<li>在备份的同时，检查是否有10天前备份的数据库文件，如果有就将其删除</li>
</ol>
<p>思路：</p>
<p><img src="04_Linux_Shell/1570352215653.png" alt="1570352215653"></p>
<p>shell脚本内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 完成数据库的定时备份</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 备份的路径</span></span><br><span class="line">BACKUP=/data/backup/db</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">当前的时间作为文件名</span></span><br><span class="line">DATETIME=$(date +%Y_%m_%d_%H%M%S)</span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以输出变量调试</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$DATETIME</span></span></span><br><span class="line"></span><br><span class="line">echo "============开始备份============"</span><br><span class="line">echo "============备份的路径是$BACKUP/$DATETIME.tar.gz"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 主机</span></span><br><span class="line">HOST=localhost</span><br><span class="line"><span class="meta">#</span><span class="bash"> 用户名</span></span><br><span class="line">DB_USER=root</span><br><span class="line"><span class="meta">#</span><span class="bash"> 密码</span></span><br><span class="line">DB_PWD=tomxwd</span><br><span class="line"><span class="meta">#</span><span class="bash"> 需要备份的数据库名</span></span><br><span class="line">DATABASE=tomxwdDB</span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建备份的路径</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果备份的目录不存在，则创建</span></span><br><span class="line">[ ! -d "$BACKUP/$DATETIME" ] &amp;&amp; mkdir -p "$BACKUP/$DATETIME"</span><br><span class="line"><span class="meta">#</span><span class="bash"> 执行mysql的备份数据库指令 这里是临时目录</span></span><br><span class="line">mysqldump -u$&#123;DB_USER&#125; -p$&#123;DB_PWD&#125; --host=$&#123;HOST&#125; $DATABASE | gzip &gt; $BACKUP/$DATETIME/$DATETIME.sql.gz</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 打包备份文件</span></span><br><span class="line">cd $BACKUP</span><br><span class="line">tar -zcvf $DATETIME.tar.gz $DATETIME</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除临时目录</span></span><br><span class="line">rm -rf $BACKUP/$DATETIME</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除十天前的备份文件</span></span><br><span class="line">find $BACKUP -mtime +10 -name "*.tar.gz" -exec rm -rf &#123;&#125; \;</span><br><span class="line"></span><br><span class="line">echo "=============备份文件成功============="</span><br></pre></td></tr></table></figure>

<p>最后需要放到crond中：</p>
<p>crontab -e</p>
<p>内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 2 * * * /usr/sbin/mysql_db_backup.sh</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/10/05/Linux/03_Linux_JavaEE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/05/Linux/03_Linux_JavaEE/" itemprop="url">03_Linux_JavaEE</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-05T20:37:38+08:00">
                2019-10-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="03-Linux-JavaEE"><a href="#03-Linux-JavaEE" class="headerlink" title="03_Linux_JavaEE"></a>03_Linux_JavaEE</h1><h2 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h2><blockquote>
<p><a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">下载地址</a></p>
<p>需要账号密码，百度一下就有</p>
<p>下载-x64.tar.gz版本</p>
</blockquote>
<ol>
<li><p>传jdk到/opt/open/download目录下</p>
</li>
<li><p>解压到/opt/open/environment/jdk/目录下</p>
<ul>
<li><p>注意，如果是解压到指定目录，要加上-C参数</p>
</li>
<li><p>tar -zxvf jdk-8u221-linux-x64.tar.gz -C /opt/open/environment/jdk/</p>
</li>
</ul>
</li>
<li><p>配置环境变量配置文件：vim /etc/profile</p>
</li>
<li><p>JAVA_HOME=/opt/open/environment/jdk/jdk1.8.0_221</p>
</li>
<li><p>PATH=/opt/open/environment/jdk/jdk1.8.0_221/bin:$PATH</p>
</li>
<li><p>export JAVA_HOME PATH</p>
</li>
<li><p>直接生效：source /etc/profile，如果不这样就注销用户再进入</p>
</li>
<li><p>测试是否可用，先用java -version，再编写一个HelloWorld编译后运行试试。</p>
</li>
</ol>
<h2 id="安装tomcat"><a href="#安装tomcat" class="headerlink" title="安装tomcat"></a>安装tomcat</h2><blockquote>
<p><a href="https://tomcat.apache.org/download-80.cgi" target="_blank" rel="noopener">tomcat8下载地址</a></p>
</blockquote>
<ol>
<li><p>放到/opt/open/download目录下</p>
</li>
<li><p>解压到/opt/open/service/tomcat/目录下</p>
<ul>
<li>tar -zxvf apache-tomcat-8.5.46.tar.gz -C /opt/open/service/tomcat/</li>
</ul>
</li>
<li><p>启动tomcat ./startup.sh</p>
</li>
<li><p>开放端口vim /etc/sysconfig/iptables</p>
<ul>
<li><p>复制22端口的形式，改成8080即可</p>
</li>
<li><p>-A INPUT -m state –state NEW -m tcp -p tcp –dport 8080 -j ACCEPT</p>
</li>
</ul>
</li>
<li><p>重启防火墙</p>
<ul>
<li>service iptables restart</li>
</ul>
</li>
<li><p>测试windows是否可以访问到linux上的tomcat服务器</p>
</li>
</ol>
<h2 id="安装eclipse"><a href="#安装eclipse" class="headerlink" title="安装eclipse"></a>安装eclipse</h2><ol>
<li>放到/opt/download目录下</li>
<li>解压到/opt/soft/eclipse目录下</li>
<li>启动eclipse，配置jre和server</li>
<li>编写HelloWorld程序并测试</li>
<li>编写jsp页面并测试</li>
</ol>
<h2 id="安装mysql5-6-44"><a href="#安装mysql5-6-44" class="headerlink" title="安装mysql5.6.44"></a>安装mysql5.6.44</h2><blockquote>
<p><a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener">mysql官方下载地址</a></p>
<p><a href="https://blog.csdn.net/hwh1231/article/details/71426844" target="_blank" rel="noopener">网上步骤</a></p>
<p>记得要下载<strong>Source Code</strong>版本的mysql，因为这里是源码安装</p>
</blockquote>
<ol>
<li><p>先卸载：</p>
<p>rpm -qa|grep mysql</p>
<p>如果有查到，就直接删除：</p>
<ul>
<li>rpm -e mysql：普通删除</li>
<li>rpm -e –nodeps mysql ：强制删除，如果上面的命令提示有依赖，可以用这个命令进行强制删除</li>
</ul>
</li>
<li><p>安装编译代码需要的包</p>
<ul>
<li>yum -y install make gcc-c++ cmake bison-devel ncurses-devel</li>
</ul>
</li>
<li><p>下载MySQL5.6.44</p>
</li>
<li><p>解压</p>
<ul>
<li>tar -zxvf mysql-5.6.44.tar.gz</li>
</ul>
</li>
<li><p>进入到mysql-5.6目录</p>
</li>
<li><p>编译安装</p>
<ul>
<li><pre><code class="shell">cmake -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DMYSQL_DATADIR=/usr/local/mysql/data -DSYSCONFDIR=/etc -DWITH_MYISAM_STORAGE_ENGINE=1 -DWITH_INNOBASE_STORAGE_ENGINE=1 -DWITH_MEMORY_STORAGE_ENGINE=1 -DWITH_READLINE=1 -DMYSQL_UNIX_ADDR=/var/lib/mysql/mysql.sock -DMYSQL_TCP_PORT=3306 -DENABLED_LOCAL_INFILE=1 -DWITH_PARTITION_STORAGE_ENHINE=1 -DEXTRA_CHARSETS=all -DDEFAULT_CHARSET=utf8 -DDEFAULT_COLLATION=utf8_general_ci
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">- ```shell</span><br><span class="line">  cmake . -DCMAKE_INSTALL_PREFIX=/data/mysql/installdir \</span><br><span class="line">  -DDEFAULT_CHARSET=utf8 \</span><br><span class="line">  -DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">  -DENABLED_LOCAL_INFILE=ON \</span><br><span class="line">  -DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line"> -DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">  -DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">  -DWITHOUT_EXAMPLE_STORAGE_ENGINE=1 \</span><br><span class="line">  -DWITH_PARTITION_STORAGE_ENGINE=1 \</span><br><span class="line">  -DWITH_PERFSCHEMA_STORAGE_ENGINE=1 \</span><br><span class="line">  -DCOMPILATION_COMMENT=&apos;MySQL&apos; \</span><br><span class="line">  -DWITH_READLINE=ON \</span><br><span class="line">  -DWITH_BOOST=/data/mysql/src/mysql-5.7.18/boost \</span><br><span class="line">  -DSYSCONFDIR=/data/mysql/datadir/3306/data \</span><br><span class="line">  -DMYSQL_UNIX_ADDR=/data/mysql/datadir/3306/data/mysql.sock</span><br></pre></td></tr></table></figure></code></pre>
</li>
<li><p>make &amp;&amp; make install</p>
</li>
</ul>
</li>
<li><p>配置MySQL</p>
<ul>
<li>设置权限<ul>
<li>查看是否有mysql用户和mysql组<ul>
<li>cat /etc/passwd：查看用户列表</li>
<li>cat /etc/group：查看用户组列表</li>
</ul>
</li>
<li>无则创建：<ul>
<li>groupadd mysql</li>
<li>useradd -g mysql mysql</li>
</ul>
</li>
<li>修改/usr/local/mysql权限<ul>
<li>chown -R mysql:mysql /user/local/mysql（-R表示递归修改权限）</li>
</ul>
</li>
</ul>
</li>
<li>初始化配置，进入安装路径（再执行下面的指令），执行初始化配置脚本，创建系统自带的数据库和表<ul>
<li>cd /usr/local/mysql</li>
<li>scripts/mysql_install_db –basedir=/usr/local/mysql –datadir=/usr/local/mysql/data –user=mysql</li>
</ul>
</li>
<li><strong>注意：</strong><ul>
<li><strong>在启动MySQL服务的时候，会按照一定次序搜查my.cnf配置文件，先在/etc目录下找，找不到就会搜索”$basedir/my.cnf”，这里就是/usr/local/mysql/my.cnf，这是最新版MySQL的配置文件的默认位置！</strong></li>
<li><strong>在CentOS6.8版本操作系统的最小安装完成后，会在/etc目录下有个my.cnf，需要吧这个文件改名，如/etc/my.cnf.bak，否则该文件会干扰源码安装的MySQL正确配置，造成无法启动</strong></li>
</ul>
</li>
</ul>
</li>
<li><p>启动MySQL</p>
<ul>
<li>添加服务，拷贝服务脚本到init.d目录，并设置为开机启动<ul>
<li>cd到/usr/local/mysql路径下</li>
<li>cp support-files/mysql.server /etc/init.d/mysql（复制服务到/etc/init.d/mysql目录）</li>
<li>chkconfig mysql on（设置为开机启动）</li>
<li>service mysql start（启动MySQL）<ul>
<li>如果不能启动，查看日志，可能是因为/var/lib/mysql没有给mysql用户权限</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>修改root密码</p>
<ul>
<li>cd /usr/local/mysql/bin</li>
<li>./mysql -uroot -p</li>
<li>mysql &gt; SET PASSWORD = PASSWORD(‘root’);</li>
</ul>
</li>
<li><p>可以把bin放到环境变量里头去（vim /etc/profile）</p>
<ul>
<li>PATH=/usr/local/mysql/bin:/…..:$PATH</li>
<li>source /etc/profile</li>
</ul>
</li>
<li><p>记得要开放防火墙：</p>
<ul>
<li>/etc/sysconfig/iptables</li>
<li>service iptables restart</li>
</ul>
</li>
<li><p>navicat远程连接可能失败</p>
<ul>
<li>可以进入命令行后，update user set host=’%’ where user = ‘root’;</li>
<li>然后flush  privileges;</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/16/">&lt;i class=&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><span class="space">&hellip;</span><a class="page-number" href="/page/48/">48</a><a class="extend next" rel="next" href="/page/18/">&lt;i class=&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg"
                alt="tomxwd" />
            
              <p class="site-author-name" itemprop="name">tomxwd</p>
              <p class="site-description motion-element" itemprop="description">tomxwd</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">478</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">34</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/tomxwd" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tomxwd</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
