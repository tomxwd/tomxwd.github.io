<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-128x128.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-32x32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/girl-16x16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="alternate" href="/atom.xml" title="tomxwd.blog" type="application/atom+xml">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="tomxwd">
<meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="tomxwd.blog">
<meta property="og:url" content="http:&#x2F;&#x2F;www.blog.tomxwd.com&#x2F;page&#x2F;34&#x2F;index.html">
<meta property="og:site_name" content="tomxwd.blog">
<meta property="og:description" content="tomxwd">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.blog.tomxwd.com/page/34/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>tomxwd.blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">tomxwd.blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/tomxwd" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/09/MyBatis-Plus/06_Mybatis-Plus_%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/09/MyBatis-Plus/06_Mybatis-Plus_%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/" class="post-title-link" itemprop="url">06_Mybatis-Plus_代码生成器</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-09 15:34:47" itemprop="dateCreated datePublished" datetime="2019-06-09T15:34:47+08:00">2019-06-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:48:16" itemprop="dateModified" datetime="2019-11-16T23:48:16+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis-Plus/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis-Plus</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="06-Mybatis-Plus-代码生成器"><a href="#06-Mybatis-Plus-代码生成器" class="headerlink" title="06_Mybatis-Plus_代码生成器"></a>06_Mybatis-Plus_代码生成器</h1><hr>
<h2 id="MP与MGB对比"><a href="#MP与MGB对比" class="headerlink" title="MP与MGB对比"></a>MP与MGB对比</h2><ol>
<li>MP提供了大量的自定义设置，生成的代码完全能够满足各类型的需求。</li>
<li>MP的代码生成器 和Mybatis MGB（逆向工程）代码生成器<ul>
<li>MP的代码生成器都是基于java代码来生成。</li>
<li>MBG基于xml文件进行代码生成。</li>
<li>Mybatis的代码生成器可以生成：实体类、Mapper接口、Mapper映射文件。</li>
<li>MP的代码生成器可生成：实体类（<strong>可以选择是否支持AR</strong>）、Mapper接口、Mapper映射文件、<strong>Service层、Controller层。</strong></li>
</ul>
</li>
</ol>
<hr>
<h2 id="表及字段命名策略选择"><a href="#表及字段命名策略选择" class="headerlink" title="表及字段命名策略选择"></a>表及字段命名策略选择</h2><br>
在MP中，我们建议数据库**表名**和**字段名**采用**驼峰命名**方式，如果采用下划线命名方式，则要开启下划线开关，如果表名字段名命名方式不一致，请注解指定，建议最好保持一致。
<br>
这么做的原因是为了**避免在对应实体类时产生的性能损耗**，这样字段不用做映射就能直接和实体类对应。当然如果项目里不用考虑这点性能损耗，那么可以采用下划线，只需要在生成代码时配置dbColumnUnderline属性即可。

<hr>
<h2 id="代码生成器依赖"><a href="#代码生成器依赖" class="headerlink" title="代码生成器依赖"></a>代码生成器依赖</h2><h4 id="模板引擎"><a href="#模板引擎" class="headerlink" title="模板引擎"></a>模板引擎</h4><p>MP的代码生成器默认使用的是Apache的Velocity模板，当然也可以更换为别的模板技术，例如freemarker。此处不做过多的介绍。<br><br>加入<strong>Apache Velocity依赖</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Apache Velocity模板引擎 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.velocity&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;velocity-engine-core&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>加入slf4j，查看日志输出信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- slf4j 日志输出 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;1.7.7&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.slf4j&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;1.7.7&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//1.全局配置</span><br><span class="line">GlobalConfig config = new GlobalConfig();</span><br><span class="line">config.setActiveRecord(true)//是否支持AR模式</span><br><span class="line">.setAuthor(&quot;weidu.xie&quot;)//设置作者</span><br><span class="line">.setOutputDir(&quot;E:\\Java文件\\mp04\\src\\main\\java&quot;)//生成路径</span><br><span class="line">.setFileOverride(true)//文件覆盖</span><br><span class="line">.setIdType(IdType.AUTO) //主键策略</span><br><span class="line">.setServiceName(&quot;%sService&quot;)//设置生成的service接口的名字的首字母是否为I 如IEmployeeService</span><br><span class="line">.setBaseResultMap(true)//生成基本的结果集</span><br><span class="line">.setBaseColumnList(true);//生成基本的列的集合 SQL片段供使用</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="数据源配置"><a href="#数据源配置" class="headerlink" title="数据源配置"></a>数据源配置</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//2.数据源配置</span><br><span class="line">DataSourceConfig dsConfig = new DataSourceConfig();</span><br><span class="line">dsConfig.setDbType(DbType.MYSQL)//设置数据库类型 MYSQL ORACLE等</span><br><span class="line">.setDriverName(&quot;com.mysql.jdbc.Driver&quot;)</span><br><span class="line">.setUrl(&quot;jdbc:mysql://localhost:3306/mp-test&quot;)</span><br><span class="line">.setUsername(&quot;root&quot;)</span><br><span class="line">.setPassword(&quot;root&quot;);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="策略配置"><a href="#策略配置" class="headerlink" title="策略配置"></a>策略配置</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//3.策略配置</span><br><span class="line">StrategyConfig stConfig = new StrategyConfig();</span><br><span class="line">stConfig.setCapitalMode(true)//全局大写命名</span><br><span class="line">.setDbColumnUnderline(true)//指定表名 字段名是否使用下划线</span><br><span class="line">.setNaming(NamingStrategy.underline_to_camel)//数据库表映射到实体的命名策略</span><br><span class="line">.setTablePrefix(&quot;tbl_&quot;)//表名前缀</span><br><span class="line">.setInclude(&quot;tbl_employee&quot;);//生成的表 可变参数</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="包名策略配置"><a href="#包名策略配置" class="headerlink" title="包名策略配置"></a>包名策略配置</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//4.包名策略配置</span><br><span class="line">PackageConfig pkConfig = new PackageConfig();</span><br><span class="line">pkConfig.setParent(&quot;top.tomxwd.mp&quot;)//设置父包，后面就不用写这段包名</span><br><span class="line">.setMapper(&quot;mapper&quot;)</span><br><span class="line">.setService(&quot;service&quot;)</span><br><span class="line">.setController(&quot;controller&quot;)</span><br><span class="line">.setEntity(&quot;beans&quot;)</span><br><span class="line">.setXml(&quot;mapper&quot;);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="整合配置"><a href="#整合配置" class="headerlink" title="整合配置"></a>整合配置</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//5.整合配置</span><br><span class="line">AutoGenerator ag = new AutoGenerator();</span><br><span class="line">ag.setGlobalConfig(config)</span><br><span class="line">.setDataSource(dsConfig)</span><br><span class="line">.setStrategy(stConfig)</span><br><span class="line">.setPackageInfo(pkConfig);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//6.执行</span><br><span class="line">ag.execute();</span><br></pre></td></tr></table></figure>
<p>日志相关：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 16:13:53,301 ================================================================= (ClassMap.java:91)</span><br><span class="line">DEBUG 06-09 16:13:53,305 模板:/templates/entity.java.vm;  文件:E:\Java文件\mp04\src\main\java\top\tomxwd\mp\beans\Employee.java (VelocityTemplateEngine.java:72)</span><br><span class="line">DEBUG 06-09 16:13:53,308 ResourceManager: found /templates/mapper.java.vm with loader org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader (ResourceManagerImpl.java:439)</span><br><span class="line">DEBUG 06-09 16:13:53,312 模板:/templates/mapper.java.vm;  文件:E:\Java文件\mp04\src\main\java\top\tomxwd\mp\mapper\EmployeeMapper.java (VelocityTemplateEngine.java:72)</span><br><span class="line">DEBUG 06-09 16:13:53,317 ResourceManager: found /templates/mapper.xml.vm with loader org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader (ResourceManagerImpl.java:439)</span><br><span class="line">DEBUG 06-09 16:13:53,320 模板:/templates/mapper.xml.vm;  文件:E:\Java文件\mp04\src\main\java\top\tomxwd\mp\mapper\EmployeeMapper.xml (VelocityTemplateEngine.java:72)</span><br><span class="line">DEBUG 06-09 16:13:53,321 ResourceManager: found /templates/service.java.vm with loader org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader (ResourceManagerImpl.java:439)</span><br><span class="line">DEBUG 06-09 16:13:53,324 模板:/templates/service.java.vm;  文件:E:\Java文件\mp04\src\main\java\top\tomxwd\mp\service\EmployeeService.java (VelocityTemplateEngine.java:72)</span><br><span class="line">DEBUG 06-09 16:13:53,326 ResourceManager: found /templates/serviceImpl.java.vm with loader org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader (ResourceManagerImpl.java:439)</span><br><span class="line">DEBUG 06-09 16:13:53,327 模板:/templates/serviceImpl.java.vm;  文件:E:\Java文件\mp04\src\main\java\top\tomxwd\mp\service\impl\EmployeeServiceImpl.java (VelocityTemplateEngine.java:72)</span><br><span class="line">DEBUG 06-09 16:13:53,329 ResourceManager: found /templates/controller.java.vm with loader org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader (ResourceManagerImpl.java:439)</span><br><span class="line">DEBUG 06-09 16:13:53,330 模板:/templates/controller.java.vm;  文件:E:\Java文件\mp04\src\main\java\top\tomxwd\mp\controller\EmployeeController.java (VelocityTemplateEngine.java:72)</span><br><span class="line">DEBUG 06-09 16:13:53,396 ==========================文件生成完成！！！========================== (AutoGenerator.java:100)</span><br></pre></td></tr></table></figure>
<p>注意：此时可能报错，因为pom中没有关于spring-webmvc相关的依赖。<br><br>加入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在XxxServiceImpl中，不用再注入mapper了。<br><br>原因：</p>
<ol>
<li>因为其继承了ServiceImpl，在ServiceImpl中已经完成了对Mapper对象的注入，直接在XxxServiceImpl中进行使用。</li>
<li>在ServiceImpl中也帮我们提供了CRUD方法，基本的一些CRUD的方法在Service中不需要自己定义了。</li>
</ol>
<hr>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>比MGB好用。</p>
<hr>
<h2 id="总的生成代码"><a href="#总的生成代码" class="headerlink" title="总的生成代码"></a>总的生成代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">	 * 代码生成 实例代码</span><br><span class="line">	 * @throws Exception</span><br><span class="line">	 */</span><br><span class="line">	@Test</span><br><span class="line">	public void testGenerator() throws Exception &#123;</span><br><span class="line">		//1.全局配置</span><br><span class="line">		GlobalConfig config = new GlobalConfig();</span><br><span class="line">		config.setActiveRecord(true)//是否支持AR模式</span><br><span class="line">		.setAuthor(&quot;weidu.xie&quot;)//设置作者</span><br><span class="line">		.setOutputDir(&quot;E:\\Java文件\\mp04\\src\\main\\java&quot;)//生成路径</span><br><span class="line">		.setFileOverride(true)//文件覆盖</span><br><span class="line">		.setIdType(IdType.AUTO) //主键策略</span><br><span class="line">		.setServiceName(&quot;%sService&quot;)//设置生成的service接口的名字的首字母是否为I 如IEmployeeService</span><br><span class="line">		.setBaseResultMap(true)//生成基本的结果集</span><br><span class="line">		.setBaseColumnList(true);//生成基本的列的集合 SQL片段供使用</span><br><span class="line">		//2.数据源配置</span><br><span class="line">		DataSourceConfig dsConfig = new DataSourceConfig();</span><br><span class="line">		dsConfig.setDbType(DbType.MYSQL)//设置数据库类型 MYSQL ORACLE等</span><br><span class="line">		.setDriverName(&quot;com.mysql.jdbc.Driver&quot;)</span><br><span class="line">		.setUrl(&quot;jdbc:mysql://localhost:3306/mp-test&quot;)</span><br><span class="line">		.setUsername(&quot;root&quot;)</span><br><span class="line">		.setPassword(&quot;root&quot;);</span><br><span class="line">		//3.策略配置</span><br><span class="line">		StrategyConfig stConfig = new StrategyConfig();</span><br><span class="line">		stConfig.setCapitalMode(true)//全局大写命名</span><br><span class="line">		.setDbColumnUnderline(true)//指定表名 字段名是否使用下划线</span><br><span class="line">		.setNaming(NamingStrategy.underline_to_camel)//数据库表映射到实体的命名策略</span><br><span class="line">		.setTablePrefix(&quot;tbl_&quot;)//表名前缀</span><br><span class="line">		.setInclude(&quot;tbl_employee&quot;);//生成的表 可变参数</span><br><span class="line">		//4.包名策略配置</span><br><span class="line">		PackageConfig pkConfig = new PackageConfig();</span><br><span class="line">		pkConfig.setParent(&quot;top.tomxwd.mp&quot;)//设置父包，后面就不用写这段包名</span><br><span class="line">		.setMapper(&quot;mapper&quot;)</span><br><span class="line">		.setService(&quot;service&quot;)</span><br><span class="line">		.setController(&quot;controller&quot;)</span><br><span class="line">		.setEntity(&quot;beans&quot;)</span><br><span class="line">		.setXml(&quot;mapper&quot;);</span><br><span class="line">		//5.整合配置</span><br><span class="line">		AutoGenerator ag = new AutoGenerator();</span><br><span class="line">		ag.setGlobalConfig(config)</span><br><span class="line">		.setDataSource(dsConfig)</span><br><span class="line">		.setStrategy(stConfig)</span><br><span class="line">		.setPackageInfo(pkConfig);</span><br><span class="line">		//6.执行</span><br><span class="line">		ag.execute();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/09/MyBatis-Plus/05_Mybatis-Plus_ActiveRecord(%E6%B4%BB%E5%8A%A8%E8%AE%B0%E5%BD%95)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/09/MyBatis-Plus/05_Mybatis-Plus_ActiveRecord(%E6%B4%BB%E5%8A%A8%E8%AE%B0%E5%BD%95)/" class="post-title-link" itemprop="url">05_Mybatis-Plus_ActiveRecord(活动记录)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-09 13:13:00" itemprop="dateCreated datePublished" datetime="2019-06-09T13:13:00+08:00">2019-06-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:48:10" itemprop="dateModified" datetime="2019-11-16T23:48:10+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis-Plus/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis-Plus</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="05-Mybatis-Plus-ActiveRecord-活动记录"><a href="#05-Mybatis-Plus-ActiveRecord-活动记录" class="headerlink" title="05_Mybatis-Plus_ActiveRecord(活动记录)"></a>05_Mybatis-Plus_ActiveRecord(活动记录)</h1><p>Active Record(活动记录)，是一种<strong>领域模型模式</strong>，特点是一个模型类对应关系型数据库中的一个表，而模型类的一个实例对应表中的一条记录。<br><br><br>ActiveRecord一直广受动态语言（PHP、Ruby等）的喜爱，而Java作为准静态语言，对于ActiveRecord往往只能感叹其优雅，所以MP也在AR道路上进行了一定的探索。</p>
<hr>
<h2 id="如何使用AR模式"><a href="#如何使用AR模式" class="headerlink" title="如何使用AR模式"></a>如何使用AR模式</h2><p>仅仅需要让实体类继承Model类并且实现主键指定方法即可。<br><br><br>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Employee extends Model&lt;Employee&gt; &#123;</span><br><span class="line">	/**</span><br><span class="line">	 * 该方法是Model的抽象方法 必须要实现</span><br><span class="line">	 * 这里用来指定当前实体类的主键属性</span><br><span class="line">	 */</span><br><span class="line">	@Override</span><br><span class="line">	protected Serializable pkVal() &#123;</span><br><span class="line">		return this.id;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>继承Model</li>
<li>实现pkVal，返回主键</li>
</ol>
<hr>
<h2 id="AR基本的CRUD操作"><a href="#AR基本的CRUD操作" class="headerlink" title="AR基本的CRUD操作"></a>AR基本的CRUD操作</h2><h4 id="插入操作"><a href="#插入操作" class="headerlink" title="插入操作"></a>插入操作</h4><h6 id="public-boolean-insert"><a href="#public-boolean-insert" class="headerlink" title="public boolean insert()"></a>public boolean insert()</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR插入操作</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARInsert() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  emp.setLastName(&quot;Tommy&quot;);</span><br><span class="line">  emp.setEmail(&quot;tommy@tomxwd.top&quot;);</span><br><span class="line">  emp.setAge(35);</span><br><span class="line">  boolean result = emp.insert();</span><br><span class="line">  System.out.println(&quot;result: &quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:36:01,570 ==&gt;  Preparing: INSERT INTO tbl_employee ( last_name, email, age ) VALUES ( ?, ?, ? )  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:36:01,618 ==&gt; Parameters: Tommy(String), tommy@tomxwd.top(String), 35(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:36:01,623 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result: true</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="修改操作"><a href="#修改操作" class="headerlink" title="修改操作"></a>修改操作</h4><h6 id="public-boolean-updateById"><a href="#public-boolean-updateById" class="headerlink" title="public boolean updateById()"></a>public boolean updateById()</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR修改操作</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARUpdate() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  emp.setAge(15);</span><br><span class="line">  emp.setId(16);</span><br><span class="line">  boolean result = emp.updateById();</span><br><span class="line">  System.out.println(&quot;result: &quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:40:05,772 ==&gt;  Preparing: UPDATE tbl_employee SET age=? WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:40:05,830 ==&gt; Parameters: 15(Integer), 16(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:40:05,832 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result: true</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作"></a>查询操作</h4><h6 id="public-T-selectById"><a href="#public-T-selectById" class="headerlink" title="public T selectById()"></a>public T selectById()</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR查询，根据id</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARSelectById() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  emp.setId(16);</span><br><span class="line">  Employee employee = emp.selectById();</span><br><span class="line">  System.out.println(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:42:30,910 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:42:30,964 ==&gt; Parameters: 16(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:42:30,984 &lt;==      Total: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Employee [id=16, lastName=Tommy, email=tommy@tomxwd.top, gender=1, age=15]</span><br></pre></td></tr></table></figure>

<h6 id="public-T-selectById-Serializable-id"><a href="#public-T-selectById-Serializable-id" class="headerlink" title="public T selectById(Serializable id)"></a>public T selectById(Serializable id)</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR查询，根据id,直接传入id值</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARSelectByIdSerializable() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  Employee employee = emp.selectById(16);</span><br><span class="line">  System.out.println(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:44:32,941 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:44:32,979 ==&gt; Parameters: 16(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:44:32,996 &lt;==      Total: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Employee [id=16, lastName=Tommy, email=tommy@tomxwd.top, gender=1, age=15]</span><br></pre></td></tr></table></figure>

<h6 id="public-List-selectAll"><a href="#public-List-selectAll" class="headerlink" title="public List selectAll()"></a>public List<T> selectAll()</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR查询，查询所有记录ALL</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARSelectAll() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  List&lt;Employee&gt; emps = emp.selectAll();</span><br><span class="line">  System.out.println(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:46:25,544 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:46:25,598 ==&gt; Parameters:  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:46:25,626 &lt;==      Total: 9 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=1, lastName=Tom, email=tom@tomxwd.top, gender=1, age=22],</span><br><span class="line">  Employee [id=2, lastName=Jerry, email=jerry@tomxwd.top, gender=0, age=25],</span><br><span class="line">  Employee [id=3, lastName=Black, email=black@tomxwd.top, gender=1, age=30],</span><br><span class="line">  Employee [id=4, lastName=White, email=white@tomxwd.top, gender=0, age=35],</span><br><span class="line">  Employee [id=8, lastName=Ken, email=ken@tomxwd.top, gender=1, age=30],</span><br><span class="line">  Employee [id=12, lastName=Ken, email=ken@tomxwd.top, gender=1, age=30],</span><br><span class="line">  Employee [id=13, lastName=Marry, email=marry@tomxwd.top, gender=0, age=15],</span><br><span class="line">  Employee [id=15, lastName=1老师, email=laoshi@tomxwd.top, gender=0, age=20],</span><br><span class="line">  Employee [id=16, lastName=Tommy, email=tommy@tomxwd.top, gender=1, age=15]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h6 id="public-List-selectList-Wrapper-wrapper"><a href="#public-List-selectList-Wrapper-wrapper" class="headerlink" title="public List selectList(Wrapper wrapper)"></a>public List<T> selectList(Wrapper wrapper)</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR查询，selectList，可以传入查询对象Wrapper</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARSelectList() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  List&lt;Employee&gt; emps = emp.selectList(new EntityWrapper&lt;Employee&gt;().like(&quot;last_name&quot;, &quot;Ken&quot;));</span><br><span class="line">  System.out.println(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:49:32,255 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE (last_name LIKE ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:49:32,322 ==&gt; Parameters: %Ken%(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:49:32,357 &lt;==      Total: 2 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=8, lastName=Ken, email=ken@tomxwd.top, gender=1, age=30],</span><br><span class="line">  Employee [id=12, lastName=Ken, email=ken@tomxwd.top, gender=1, age=30]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h6 id="public-int-selectCount-Wrapper-wrapper"><a href="#public-int-selectCount-Wrapper-wrapper" class="headerlink" title="public int selectCount(Wrapper wrapper)"></a>public int selectCount(Wrapper wrapper)</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR查询：selectCount</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARSelectCount() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  int count = emp.selectCount(new EntityWrapper&lt;Employee&gt;().like(&quot;last_name&quot;, &quot;K&quot;));</span><br><span class="line">  System.out.println(&quot;count: &quot;+count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:51:55,245 ==&gt;  Preparing: SELECT COUNT(1) FROM tbl_employee WHERE (last_name LIKE ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:51:55,313 ==&gt; Parameters: %K%(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:51:55,332 &lt;==      Total: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">count: 3</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h4><p><strong><em>注意，当删除不存在的数据时，也会返回true。</em></strong></p>
<h6 id="public-boolean-deleteById"><a href="#public-boolean-deleteById" class="headerlink" title="public boolean deleteById()"></a>public boolean deleteById()</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR删除：根据id删除——从对象setId</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARDeleteById() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  emp.setId(15);</span><br><span class="line">  boolean result = emp.deleteById();</span><br><span class="line">  System.out.println(&quot;result: &quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 14:07:16,965 ==&gt;  Preparing: DELETE FROM tbl_employee WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 14:07:17,010 ==&gt; Parameters: 15(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 14:07:17,013 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result: true</span><br></pre></td></tr></table></figure>

<h6 id="public-boolean-deleteById-Serializable-id"><a href="#public-boolean-deleteById-Serializable-id" class="headerlink" title="public boolean deleteById(Serializable id)"></a>public boolean deleteById(Serializable id)</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR删除：根据id删除——直接传入id值</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARDeleteByIdSerializable() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  boolean result = emp.deleteById(13);</span><br><span class="line">  System.out.println(&quot;result: &quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 14:08:43,546 ==&gt;  Preparing: DELETE FROM tbl_employee WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 14:08:43,594 ==&gt; Parameters: 13(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 14:08:43,596 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result: true</span><br></pre></td></tr></table></figure>

<h6 id="public-boolean-delete-Wrapper-wrapper"><a href="#public-boolean-delete-Wrapper-wrapper" class="headerlink" title="public boolean delete(Wrapper wrapper)"></a>public boolean delete(Wrapper wrapper)</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR删除：根据条件删除</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testARDeleteWrapper() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  boolean result = emp.delete(new EntityWrapper&lt;Employee&gt;().like(&quot;age&quot;, &quot;15&quot;));</span><br><span class="line">  System.out.println(&quot;result: &quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 14:09:19,046 ==&gt;  Preparing: DELETE FROM tbl_employee WHERE (age LIKE ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 14:09:19,124 ==&gt; Parameters: %15%(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 14:09:19,126 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result: true</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="分页复杂操作"><a href="#分页复杂操作" class="headerlink" title="分页复杂操作"></a>分页复杂操作</h4><p>这里会返回Page对象，需要getRecords()才能得到具体数据，其他是分页结果等信息。</p>
<h6 id="public-Page-selectPage-Page-page-String-whereClause-Object…args-getRecords"><a href="#public-Page-selectPage-Page-page-String-whereClause-Object…args-getRecords" class="headerlink" title="public Page selectPage(Page page,String whereClause, Object…args).getRecords();"></a>public Page<T> selectPage(Page<T> page,String whereClause, Object…args).getRecords();</h6><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * AR分页复杂操作</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testSelectPage() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  Page&lt;Employee&gt; emps = emp.selectPage(new Page&lt;Employee&gt;(2, 1), new EntityWrapper&lt;Employee&gt;().eq(&quot;last_name&quot;, &quot;Ken&quot;));</span><br><span class="line">  System.out.println(emps);</span><br><span class="line">  System.out.println(emps.getRecords());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 14:19:42,949 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE (last_name = ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 14:19:43,024 ==&gt; Parameters: Ken(String) (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Page:&#123; [Pagination &#123; total=0 ,size=1 ,pages=0 ,current=2 &#125;], records-size:1 &#125;</span><br><span class="line">[Employee [id=12, lastName=Ken, email=ken@tomxwd.top, gender=1, age=30]]</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="AR总结"><a href="#AR总结" class="headerlink" title="AR总结"></a>AR总结</h2><ol>
<li>AR模式提供了一种更加便捷的方式实现了CRUD操作，其本质还是调用了Mybatis对应的方法（sqlSession调用方法），类似于语法糖。<ul>
<li>语法糖：计算机学专家发明的一种术语。指<strong>计算机语言中添加的某种语法，这种语法对原本语言的功能并没有影响，可以更方便开发者使用，可以避免出错的机会，让程序可读性更好。</strong></li>
</ul>
</li>
<li>到此，我们简单领略了Mybatis-Plus的魅力与高效率，值得一提的是：我们提供了强大的代码生成器，可以快速生成各类代码，真正做到了<strong>即开即用</strong>。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/09/MyBatis-Plus/04_Mybatis-Plus_%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8_EntityWrapper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/09/MyBatis-Plus/04_Mybatis-Plus_%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8_EntityWrapper/" class="post-title-link" itemprop="url">04_Mybatis-Plus_条件构造器_EntityWrapper</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-09 10:59:24" itemprop="dateCreated datePublished" datetime="2019-06-09T10:59:24+08:00">2019-06-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:48:02" itemprop="dateModified" datetime="2019-11-16T23:48:02+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis-Plus/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis-Plus</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="04-Mybatis-Plus-条件构造器-EntityWrapper"><a href="#04-Mybatis-Plus-条件构造器-EntityWrapper" class="headerlink" title="04_Mybatis-Plus_条件构造器_EntityWrapper"></a>04_Mybatis-Plus_条件构造器_EntityWrapper</h1><hr>
<h2 id="EntityWrapper简介"><a href="#EntityWrapper简介" class="headerlink" title="EntityWrapper简介"></a>EntityWrapper简介</h2><ol>
<li>Mybatis-Plus通过EntityWrapper（简称<strong>EW</strong>，MP封装的一个查询条件构造器）或者Condition（与EW类似）来让用户自由的构建查询条件，简单便捷，没有额外的负担，能够有效提高开发效率。</li>
<li>实体包装器，主要用于处理SQL拼接、排序、实体参数查询等。</li>
<li><strong>注意：使用的是数据库的字段名，而不是java属性。</strong></li>
<li>条件参数说明：</li>
</ol>
<table>
<thead>
<tr>
<th>查询方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>setSqlSelect</td>
<td>设置SELECT查询字段</td>
</tr>
<tr>
<td>where</td>
<td>WHERE语句，拼接 - WHERE条件</td>
</tr>
<tr>
<td>and</td>
<td>AND语句，拼接 - AND 字段=值</td>
</tr>
<tr>
<td>andNew</td>
<td>AND语句，拼接 - AND （字段=值）</td>
</tr>
<tr>
<td>or</td>
<td>OR语句，拼接 - OR 字段=值</td>
</tr>
<tr>
<td>orNew</td>
<td>OR语句，拼接 - OR（字段=值）</td>
</tr>
<tr>
<td>eq</td>
<td>等于=</td>
</tr>
<tr>
<td>allEq</td>
<td>基于map内容等于=</td>
</tr>
<tr>
<td>ne</td>
<td>不等于&lt;&gt;</td>
</tr>
<tr>
<td>gt</td>
<td>大于&gt;</td>
</tr>
<tr>
<td>ge</td>
<td>大于等于&gt;=</td>
</tr>
<tr>
<td>lt</td>
<td>小于&lt;</td>
</tr>
<tr>
<td>le</td>
<td>小于等于&lt;=</td>
</tr>
<tr>
<td>like</td>
<td>模糊查询LIKE</td>
</tr>
<tr>
<td>notLike</td>
<td>模糊查询NOT LIKE</td>
</tr>
<tr>
<td>in</td>
<td>IN查询</td>
</tr>
<tr>
<td>notin</td>
<td>NOT IN查询</td>
</tr>
<tr>
<td>isNull</td>
<td>NULL值查询</td>
</tr>
<tr>
<td>isNotNull</td>
<td>IS NOT NULL</td>
</tr>
<tr>
<td>groupBy</td>
<td>分组GROUP BY</td>
</tr>
<tr>
<td>having</td>
<td>HAVING关键词</td>
</tr>
<tr>
<td>orderBy</td>
<td>排序ORDER BY</td>
</tr>
<tr>
<td>orderAsc</td>
<td>ASC排序ORDER BY</td>
</tr>
<tr>
<td>orderDesc</td>
<td>DESC排序ORDER BY</td>
</tr>
<tr>
<td>exists</td>
<td>EXISTS条件语句</td>
</tr>
<tr>
<td>notExists</td>
<td>NOT EXISTS条件语句</td>
</tr>
<tr>
<td>between</td>
<td>BETWEEN条件语句</td>
</tr>
<tr>
<td>notBetween</td>
<td>NOT BETWEEN条件语句</td>
</tr>
<tr>
<td>addFilter</td>
<td>自由拼接SQL</td>
</tr>
<tr>
<td>last</td>
<td>拼接在最后，例如last(“LIMIT 1”)</td>
</tr>
</tbody></table>
<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><blockquote>
<p>需要分页查询tbl_employee表中，年龄在18-50，性别为男，姓名为Xxx的所有用户（Ken）</p>
</blockquote>
<p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 条件构造器EntityWrapper</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testEntityWrapper() throws Exception &#123;</span><br><span class="line">  // 需要分页查询tbl_employee表中，年龄在18-50，性别为男，姓名为Xxx的所有用户（Ken）</span><br><span class="line"></span><br><span class="line">  List&lt;Employee&gt; list = employeeMapper.selectPage(new Page&lt;Employee&gt;(1,3), new EntityWrapper&lt;Employee&gt;().between(&quot;age&quot;, 18, 50).eq(&quot;gender&quot;, 1).eq(&quot;last_name&quot;, &quot;KEN&quot;));</span><br><span class="line">  System.out.println(list);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 11:11:14,841 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE (age BETWEEN ? AND ? AND gender = ? AND last_name = ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 11:11:14,872 ==&gt; Parameters: 18(Integer), 50(Integer), 1(Integer), KEN(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 11:11:14,891 &lt;==      Total: 2 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=8, lastName=Ken, email=ken@tomxwd.top, gender=1, age=40],</span><br><span class="line">  Employee [id=12, lastName=Ken, email=ken@tomxwd.top, gender=1, age=40]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="带条件的查询"><a href="#带条件的查询" class="headerlink" title="带条件的查询"></a>带条件的查询</h2><h4 id="selectList-Param-“ew”-Wrapper-wrapper"><a href="#selectList-Param-“ew”-Wrapper-wrapper" class="headerlink" title="selectList(@Param(“ew”) Wrapper wrapper);"></a>selectList(@Param(“ew”) Wrapper<T> wrapper);</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * selectList(@Param(&quot;ew&quot;) Wrapper&lt;T&gt; wrapper);</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testSelectList() throws Exception &#123;</span><br><span class="line">  // 查询tbl_employee表中，性别为女，姓名中带“老师” 或者 邮箱中带有a的</span><br><span class="line">  List&lt;Employee&gt; emps = employeeMapper.selectList(</span><br><span class="line">      new EntityWrapper&lt;Employee&gt;()</span><br><span class="line">      .eq(&quot;gender&quot;, 0)</span><br><span class="line">      .like(&quot;last_name&quot;, &quot;老师&quot;)</span><br><span class="line">//				.or()   //WHERE (gender = ? AND last_name LIKE ? OR email LIKE ?)</span><br><span class="line">      .orNew()  //WHERE (gender = ? AND last_name LIKE ?) OR (email LIKE ?)</span><br><span class="line">      .like(&quot;email&quot;, &quot;a&quot;));</span><br><span class="line">  System.out.println(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 12:33:35,887 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE (gender = ? AND last_name LIKE ?) OR (email LIKE ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:33:35,932 ==&gt; Parameters: 0(Integer), %老师%(String), %a%(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:33:35,953 &lt;==      Total: 3 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=3, lastName=Black, email=black@tomxwd.top, gender=1, age=30],</span><br><span class="line">  Employee [id=13, lastName=Marry, email=marry@tomxwd.top, gender=0, age=15],</span><br><span class="line">  Employee [id=15, lastName=1老师, email=laoshi@tomxwd.top, gender=0, age=20]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>需要注意：or()和orNew()的区别在于是否另起一个or。如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">or() : WHERE (gender = ? AND last_name LIKE ? OR email LIKE ?)</span><br><span class="line">orNew : WHERE (gender = ? AND last_name LIKE ?) OR (email LIKE ?)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="带条件的修改"><a href="#带条件的修改" class="headerlink" title="带条件的修改"></a>带条件的修改</h2><h4 id="update-Param-“et”-T-entity-Param-“ew”-Wrapper-wrapper"><a href="#update-Param-“et”-T-entity-Param-“ew”-Wrapper-wrapper" class="headerlink" title="update(@Param(“et”) T  entity,@Param(“ew”) Wrapper wrapper)"></a>update(@Param(“et”) T  entity,@Param(“ew”) Wrapper<T> wrapper)</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 條件構造器的修改操作</span><br><span class="line"> * 把名字为Ken的，性别改为女，年龄改为30岁</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testUpdate() throws Exception &#123;</span><br><span class="line">  Employee emp = new Employee();</span><br><span class="line">  emp.setAge(30);</span><br><span class="line">  emp.setGender(0);</span><br><span class="line">  Integer result = employeeMapper.update(emp, new EntityWrapper&lt;Employee&gt;().eq(&quot;last_name&quot;, &quot;KEN&quot;));</span><br><span class="line">  System.out.println(&quot;result: &quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 12:45:49,230 ==&gt;  Preparing: UPDATE tbl_employee SET gender=?, age=? WHERE (last_name = ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:45:49,282 ==&gt; Parameters: 0(Integer), 30(Integer), KEN(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:45:49,284 &lt;==    Updates: 3 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result: 3</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="带条件的删除"><a href="#带条件的删除" class="headerlink" title="带条件的删除"></a>带条件的删除</h2><h4 id="delete-Param-“ew”-Wrapper-wrapper"><a href="#delete-Param-“ew”-Wrapper-wrapper" class="headerlink" title="delete(@Param(“ew”) Wrapper wrapper)"></a>delete(@Param(“ew”) Wrapper<T> wrapper)</h4><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 条件构造器的删除操作</span><br><span class="line"> * 把名字为Ken且年龄为50的删除</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testDelete() throws Exception &#123;</span><br><span class="line">  Integer result = employeeMapper.delete(new EntityWrapper&lt;Employee&gt;().eq(&quot;last_name&quot;, &quot;KEN&quot;).eq(&quot;age&quot;, 50));</span><br><span class="line">  System.out.println(&quot;result: &quot;+result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 12:53:28,412 ==&gt;  Preparing: DELETE FROM tbl_employee WHERE (last_name = ? AND age = ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:53:28,473 ==&gt; Parameters: KEN(String), 50(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:53:28,476 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result: 1</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="其他常用方法"><a href="#其他常用方法" class="headerlink" title="其他常用方法"></a>其他常用方法</h2><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 查询性别为女，根据age排序（asc/desc），并进行简单分页。</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testCommon() throws Exception &#123;</span><br><span class="line">  List&lt;Employee&gt; emps = employeeMapper.selectList(</span><br><span class="line">      new EntityWrapper&lt;Employee&gt;()</span><br><span class="line">      .eq(&quot;gender&quot;, 0)</span><br><span class="line">      .orderDesc(Arrays.asList(new String[] &#123;&quot;age&quot;&#125;)));</span><br><span class="line">  System.out.println(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 12:58:38,939 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE (gender = ?) ORDER BY age DESC  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:58:39,001 ==&gt; Parameters: 0(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 12:58:39,030 &lt;==      Total: 6 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=4, lastName=White, email=white@tomxwd.top, gender=0, age=35],</span><br><span class="line">  Employee [id=8, lastName=Ken, email=ken@tomxwd.top, gender=0, age=30],</span><br><span class="line">  Employee [id=12, lastName=Ken, email=ken@tomxwd.top, gender=0, age=30],</span><br><span class="line">  Employee [id=2, lastName=Jerry, email=jerry@tomxwd.top, gender=0, age=25],</span><br><span class="line">  Employee [id=15, lastName=1老师, email=laoshi@tomxwd.top, gender=0, age=20],</span><br><span class="line">  Employee [id=13, lastName=Marry, email=marry@tomxwd.top, gender=0, age=15]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>使用orderBy是默认asc（升序）。<br><br><br>使用orderAsc()升序。<br>使用orderDesc()降序<br>也可以使用<strong>last()</strong>方法，手动在sql最后拼接，有sql注入的风险！这里先使用orderBy(“age”)，再使用last(“desc”);<br><br><br>在last里面还可以做分页——last(“desc limit 1,3”)</p>
<hr>
<h2 id="使用Condition的方式打开如上需求"><a href="#使用Condition的方式打开如上需求" class="headerlink" title="使用Condition的方式打开如上需求"></a>使用Condition的方式打开如上需求</h2><p>tbl_employee表中，年龄在18-50且为男性，姓名为Ken的所有用户<br><br>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 用Condition来解决上述问题。</span><br><span class="line"> * tbl_employee表中，年龄在18-50且为男性，姓名为Ken的所有用户</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">@Test</span><br><span class="line">public void testCondition() throws Exception &#123;</span><br><span class="line">  List&lt;Employee&gt; emps = employeeMapper.selectPage(new Page&lt;Employee&gt;(1,2), Condition.create().between(&quot;age&quot;, 18, 50).eq(&quot;gender&quot;, 1).eq(&quot;last_name&quot;, &quot;Ken&quot;));</span><br><span class="line">  System.out.println(emps);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-09 13:07:37,324 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE (age BETWEEN ? AND ? AND gender = ? AND last_name = ?)  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-09 13:07:37,354 ==&gt; Parameters: 18(Integer), 50(Integer), 1(Integer), Ken(String) (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=8, lastName=Ken, email=ken@tomxwd.top, gender=1, age=30],</span><br><span class="line">  Employee [id=12, lastName=Ken, email=ken@tomxwd.top, gender=1, age=30]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h2><p>MP：EntityWrapper&amp;&amp;Condition条件构造器。<br><br><br>MyBatis MGB(逆向工程):XxxExample–&gt;Criteria:QBC风格（Query ByCriteria）<br><br><br>Hibernate、通用Mapper也是有QBC风格的。<br>MP中实现与QBC较为相似。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/08/MyBatis-Plus/03_Mybatis-Plus%E5%85%A5%E9%97%A8CRUD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/08/MyBatis-Plus/03_Mybatis-Plus%E5%85%A5%E9%97%A8CRUD/" class="post-title-link" itemprop="url">03_Mybatis-Plus入门CRUD</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-08 17:05:13" itemprop="dateCreated datePublished" datetime="2019-06-08T17:05:13+08:00">2019-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:47:50" itemprop="dateModified" datetime="2019-11-16T23:47:50+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis-Plus/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis-Plus</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="03-Mybatis-Plus入门CRUD"><a href="#03-Mybatis-Plus入门CRUD" class="headerlink" title="03_Mybatis-Plus入门CRUD"></a>03_Mybatis-Plus入门CRUD</h1><hr>
<h2 id="通用的CRUD（入门DEMO）"><a href="#通用的CRUD（入门DEMO）" class="headerlink" title="通用的CRUD（入门DEMO）"></a>通用的CRUD（入门DEMO）</h2><ol>
<li>提出问题：<br>
假设我们已经存在一张tbl_employee表，且已有对应的实体类Employee，实现tbl_employee表的CRUD操作我们需要做什么？</li>
<li>实现方式：<br>
- 基于Mybatis：
 - 需要编写EmployeeMapper接口，并手动编写CRUD方法。
 - 提供EmployeeMapper.xml映射文件，并手动编写每个方法对应的SQL语句。
- 基于MP
 - 只需要创建EmployeeMapper接口，并继承BaseMapper接口，这就是使用MP需要完成的所有操作，甚至不用创建SQL映射文件。</li>
<li>具体实现<br><br>首先要编写Mapper接口：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.tomxwd.mp.mapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> top.tomxwd.mp.beans.Employee;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Mapper接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 基于Mybatis实现：在Mapper接口中编写CRUD相关方法，还要提供对应的SQL映射文件 以及方法对应的sql语句</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 基于MP：让XxxMapper接口继承BaseMapper接口即可</span></span><br><span class="line"><span class="comment"> * 			BaseMapper&lt;T&gt; : 泛型指定的就是当前Mapper接口所操作的实体类类型</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">Employee</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>第二步要在实体类上的主键打@TabledId注解</strong><br></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@TableId</span>：</span></span><br><span class="line"><span class="comment"> * 	value：指定表中的主键列的列名，如果实体属性名和列名一致，可以省略</span></span><br><span class="line"><span class="comment"> * 	type：指定主键策略</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableId</span>(value=<span class="string">"id"</span>,type=IdType.AUTO)</span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br></pre></td></tr></table></figure>
<p><strong>第三步要在实体类上打@TableName注解</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Mybatis-Plus会默认使用实体类的类名到数据库中找对应的表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableName</span>(value=<span class="string">"tbl_employee"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>以上就是MP的CRUD操作所需要做的事情。<br>4. 测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> ApplicationContext ioc = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);</span><br><span class="line"><span class="keyword">private</span> EmployeeMapper employeeMapper = ioc.getBean(<span class="string">"employeeMapper"</span>,EmployeeMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 通用的插入操作</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCommonInsert</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  <span class="comment">// 初始化Employee对象</span></span><br><span class="line">  Employee employee = <span class="keyword">new</span> Employee();</span><br><span class="line">  employee.setAge(<span class="number">18</span>);</span><br><span class="line">  employee.setEmail(<span class="string">"marry@tomxwd.top"</span>);</span><br><span class="line">  employee.setGender(<span class="number">0</span>);</span><br><span class="line">  employee.setLastName(<span class="string">"Marry"</span>);</span><br><span class="line">  <span class="comment">// 插入到数据库 返回受影响的条数</span></span><br><span class="line">  Integer result = employeeMapper.insert(employee);</span><br><span class="line">  System.out.println(<span class="string">"result:"</span> + result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">省略其他日志信息之后：</span><br><span class="line">DEBUG 06-08 17:41:51,646 ==&gt;  Preparing: INSERT INTO tbl_employee ( last_name, email, gender, age ) VALUES ( ?, ?, ?, ? )  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 17:41:51,679 ==&gt; Parameters: Marry(String), marry@tomxwd.top(String), 0(Integer), 18(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 17:41:51,683 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">result:1</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="主键策略以及-TableId注解"><a href="#主键策略以及-TableId注解" class="headerlink" title="主键策略以及@TableId注解"></a>主键策略以及@TableId注解</h2><table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">idType.AUTO</td>
<td align="center">数据库ID自增</td>
</tr>
<tr>
<td align="center">idType.INPUT</td>
<td align="center">用户输入ID</td>
</tr>
<tr>
<td align="center">idType.ID_WORKER</td>
<td align="center">全局唯一ID，内容为空自动填充<strong>（默认配置）</strong></td>
</tr>
<tr>
<td align="center">idType.UUID</td>
<td align="center">全局唯一id，内容为空自动填充</td>
</tr>
<tr>
<td align="center"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@TableId</span>：</span></span><br><span class="line"><span class="comment"> * 	value：指定表中的主键列的列名，如果实体属性名和列名一致，可以省略</span></span><br><span class="line"><span class="comment"> * 	type：指定主键策略</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@TableId</span>(value=<span class="string">"id"</span>,type=IdType.AUTO)</span><br><span class="line"><span class="keyword">private</span> Integer id;</span><br></pre></td></tr></table></figure></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">如果实体类field名和表中的字段名一样，则value可以不写。</td>
<td align="center"></td>
</tr>
</tbody></table>
<hr>
<h2 id="TableName注解"><a href="#TableName注解" class="headerlink" title="@TableName注解"></a>@TableName注解</h2><p>表名注解。</p>
<table>
<thead>
<tr>
<th align="center">值</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">value</td>
<td align="center">表名（默认空）</td>
</tr>
<tr>
<td align="center">resultMap</td>
<td align="center">xml字段映射resultMap的ID</td>
</tr>
</tbody></table>
<hr>
<h2 id="TableField注解"><a href="#TableField注解" class="headerlink" title="@TableField注解"></a>@TableField注解</h2><p>字段注解：<br><br><strong>其一：（value）</strong>比如遇到表中是last_name，实体类属性是lastName，而且全局策略配置没有进行配置，则需要用到该字段，与@TableName类似，都是用来解决不统一的问题。用value来指定表中的字段名。<br><br><strong>其二：（exist）</strong>里面有个exist属性，表示这个是不是数据库表里面的字段，因为以后会有这种情况。</p>
<hr>
<h2 id="MP全局策略配置-重要"><a href="#MP全局策略配置-重要" class="headerlink" title="MP全局策略配置(重要)"></a>MP全局策略配置(重要)</h2><p>问题引出：<br><br><br>数据库中的字段名是last_name，而实体类属性名为lastName，但是根据日志信息得到的插入信息确实是last_name字段，为什么？<br><br><br>而且在mybatis-config.xml文件里也没有配置对应的驼峰规则等，为什么？<br><br><br>说明MP帮我们去解决了这个问题。</p>
<h4 id="定义Mybatis-Plus的全局策略配置"><a href="#定义Mybatis-Plus的全局策略配置" class="headerlink" title="定义Mybatis-Plus的全局策略配置"></a>定义Mybatis-Plus的全局策略配置</h4><p>在spring配置文件（applicationContext.xml）中进行配置。</p>
<h4 id="为什么要进行全局配置？"><a href="#为什么要进行全局配置？" class="headerlink" title="为什么要进行全局配置？"></a>为什么要进行全局配置？</h4><p>比如每个实体类都以tbl_开头，那么每一个实体类都需要去声明@TableName，每一个主键id都需要配置自动递增，则需要每一个id字段去设置@TabledId注解。相对麻烦，如果用全局配置，则一步到位。</p>
<ol>
<li>字段驼峰原则</li>
<li>配置全局主键策略</li>
<li>配置全局表前缀策略</li>
<li>后续会使用更多的策略来配置</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 定义Mybatis-Plus的全局策略配置 --&gt;</span><br><span class="line">&lt;!-- 定义Mybatis-Plus的全局策略配置 --&gt;</span><br><span class="line">&lt;bean id=&quot;globalConfiguration&quot; class=&quot;com.baomidou.mybatisplus.entity.GlobalConfiguration&quot;&gt;</span><br><span class="line">  &lt;!-- 2.3版本之后，dbColumnUnderline默认就是true --&gt;</span><br><span class="line">  &lt;!-- 驼峰原则 --&gt;</span><br><span class="line">  &lt;property name=&quot;dbColumnUnderline&quot; value=&quot;true&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;!-- 配置全局主键策略 0为自动递增 --&gt;</span><br><span class="line">  &lt;property name=&quot;idType&quot; value=&quot;0&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;!-- 全局的表前缀策略配置 --&gt;</span><br><span class="line">  &lt;property name=&quot;tablePrefix&quot; value=&quot;tbl_&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p>切记，在配置完全局策略配置之后，需要把改配置注入到Mybatis配置中去，也就是SqlSessionFactorybean，此时才会生效。否则报错。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置MybatisSqlSessionFactoryBean --&gt;</span><br><span class="line">&lt;bean id=&quot;sqlSessionFactoryBean&quot; class=&quot;com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean&quot;&gt;</span><br><span class="line">  &lt;!-- 数据源 --&gt;</span><br><span class="line">  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;!-- 别名处理 --&gt;</span><br><span class="line">  &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;top.tomxwd.mp.beans&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;!-- 注入全局MP策略配置  --&gt;</span><br><span class="line">  &lt;property name=&quot;globalConfig&quot; ref=&quot;globalConfiguration&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="插入数据获取主键值"><a href="#插入数据获取主键值" class="headerlink" title="插入数据获取主键值"></a>插入数据获取主键值</h2><p><strong>以前的做法：</strong><br></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer insertEmployee(Employee employee)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;SQL...&lt;/insert&gt;</span><br></pre></td></tr></table></figure>
<p><strong>MP的做法：</strong><br><br>MP会自动把主键值回写到实体类中。</p>
<hr>
<h2 id="insertAllColumn方法"><a href="#insertAllColumn方法" class="headerlink" title="insertAllColumn方法"></a>insertAllColumn方法</h2><p>普通的insert方法是使用非空来判断是否插入值，而insertAllColumn方法是插入所有的字段。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * insertAllColumn方法</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testInsertAllColumn() throws Exception &#123;</span><br><span class="line">  Employee e = new Employee();</span><br><span class="line">  e.setLastName(&quot;Tony&quot;);</span><br><span class="line">  e.setEmail(&quot;tony@tomxwd.top&quot;);</span><br><span class="line">  e.setAge(50);</span><br><span class="line">  Integer result = employeeMapper.insertAllColumn(e);</span><br><span class="line">  System.out.println(result);</span><br><span class="line">  Integer id = e.getId();</span><br><span class="line">  System.out.println(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时日志记录为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 20:33:09,786 ==&gt;  Preparing: INSERT INTO tbl_employee ( last_name,email,gender,age ) VALUES ( ?,?,?,? )  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:33:09,820 ==&gt; Parameters: Tony(String), tony@tomxwd.top(String), null, 50(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:33:09,824 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>发现数据库结果：gender为null，没有用到数据库中的default值。</p>
<hr>
<h2 id="updateById方法"><a href="#updateById方法" class="headerlink" title="updateById方法"></a>updateById方法</h2><p><strong>null则不更新</strong>，返回结果是影响条数。<br><br><br>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 通用更新操作</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testUpdateById() throws Exception &#123;</span><br><span class="line">  Employee e = new Employee();</span><br><span class="line">  e.setId(9);</span><br><span class="line">  e.setGender(1);</span><br><span class="line">  Integer result = employeeMapper.updateById(e);</span><br><span class="line">  System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 20:38:33,846 ==&gt;  Preparing: UPDATE tbl_employee SET gender=? WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:38:33,888 ==&gt; Parameters: 1(Integer), 9(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:38:33,890 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="updateAllColumnById方法"><a href="#updateAllColumnById方法" class="headerlink" title="updateAllColumnById方法"></a>updateAllColumnById方法</h2><p>跟updateById的区别在于，<strong>null值也会插入到里面。</strong><br><br>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * UpdateAllColumnById方法</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testUpdateAllColumnById() throws Exception &#123;</span><br><span class="line">  Employee e = new Employee();</span><br><span class="line">  e.setId(9);</span><br><span class="line">  e.setGender(1);</span><br><span class="line">  Integer result = employeeMapper.updateAllColumnById(e);</span><br><span class="line">  System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 20:44:18,682 ==&gt;  Preparing: UPDATE tbl_employee SET last_name=?,email=?,gender=?,age=? WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:44:18,742 ==&gt; Parameters: null, null, 1(Integer), null, 9(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:44:18,746 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="selectById方法"><a href="#selectById方法" class="headerlink" title="selectById方法"></a>selectById方法</h2><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * selectById方法</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testSelectById() throws Exception &#123;</span><br><span class="line">  Employee employee = employeeMapper.selectById(8);</span><br><span class="line">  System.out.println(employee);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 20:48:39,273 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:48:39,308 ==&gt; Parameters: 8(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:48:39,326 &lt;==      Total: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="selectOne方法（条件查询）"><a href="#selectOne方法（条件查询）" class="headerlink" title="selectOne方法（条件查询）"></a>selectOne方法（条件查询）</h2><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 多个列来查询</span><br><span class="line"> * SelectOne</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testSelectOne() throws Exception &#123;</span><br><span class="line">  // 通过多个列进行查询 比如 id和lastName来查询</span><br><span class="line">  Employee employee = new Employee();</span><br><span class="line">  employee.setId(7);</span><br><span class="line">  employee.setLastName(&quot;Marry&quot;);</span><br><span class="line">  Employee e = employeeMapper.selectOne(employee);</span><br><span class="line">  System.out.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 20:52:39,303 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE id=? AND last_name=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:52:39,348 ==&gt; Parameters: 7(Integer), Marry(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 20:52:39,364 &lt;==      Total: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>需要注意的是！该方法是查询一条数据的，不可以返回多个数据，否则报错！！！</p>
<hr>
<h2 id="selectBatchIds方法（批量查询根据ID）"><a href="#selectBatchIds方法（批量查询根据ID）" class="headerlink" title="selectBatchIds方法（批量查询根据ID）"></a>selectBatchIds方法（批量查询根据ID）</h2><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 批量查询，根据Id</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testSelectBatchIds() throws Exception &#123;</span><br><span class="line">  ArrayList&lt;Integer&gt; Ids = new ArrayList&lt;Integer&gt;();</span><br><span class="line">  Ids.add(1);</span><br><span class="line">  Ids.add(2);</span><br><span class="line">  Ids.add(3);</span><br><span class="line">  List&lt;Employee&gt; list = employeeMapper.selectBatchIds(Ids);</span><br><span class="line">  System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 21:06:49,409 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE id IN ( ? , ? , ? )  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:06:49,440 ==&gt; Parameters: 1(Integer), 2(Integer), 3(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:06:49,457 &lt;==      Total: 3 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=1, lastName=Tom, email=tom@tomxwd.top, gender=1, age=22],</span><br><span class="line">  Employee [id=2, lastName=Jerry, email=jerry@tomxwd.top, gender=0, age=25],</span><br><span class="line">  Employee [id=3, lastName=Black, email=black@tomxwd.top, gender=1, age=30]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="selectByMap方法（根据Map对象进行条件查询）"><a href="#selectByMap方法（根据Map对象进行条件查询）" class="headerlink" title="selectByMap方法（根据Map对象进行条件查询）"></a>selectByMap方法（根据Map对象进行条件查询）</h2><p>需要注意的是，Map中封装的key是column名，也就是数据库中的列名，而不是实体类的属性名。<br>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 根据Map对象查询，即是封装为Map对象，条件查询</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testSelectByMap() throws Exception &#123;</span><br><span class="line">  Map&lt;String,Object&gt; columnMap = new HashMap&lt;String, Object&gt;();</span><br><span class="line">  columnMap.put(&quot;last_name&quot;, &quot;Marry&quot;);</span><br><span class="line">  List&lt;Employee&gt; list = employeeMapper.selectByMap(columnMap);</span><br><span class="line">  System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 21:13:16,779 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee WHERE last_name = ?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:13:16,808 ==&gt; Parameters: Marry(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:13:16,824 &lt;==      Total: 3 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Employee [id=5, lastName=Marry, email=marry@tomxwd.top, gender=0, age=18], Employee [id=6, lastName=Marry, email=marry@tomxwd.top, gender=0, age=18], Employee [id=7, lastName=Marry, email=marry@tomxwd.top, gender=0, age=18]]</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="selectPage方法（分页查询）"><a href="#selectPage方法（分页查询）" class="headerlink" title="selectPage方法（分页查询）"></a>selectPage方法（分页查询）</h2><p>第一个参数：Page对象，继承了Pagination对象，而Pagination对象又继承了RowBounds对象（Mybatis的分页对象）<br><br>第二个参数是条件对象，后续说明，此处不用。<br>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 分页查询</span><br><span class="line"> * 第一个对象为Page对象，继承了Pagination对象，而Pagination对象继承RowBounds（Mybatis的分页对象）</span><br><span class="line"> * 第二个对象是条件对象</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testSelectPage() throws Exception &#123;</span><br><span class="line">  List&lt;Employee&gt; list = employeeMapper.selectPage(new Page&lt;Employee&gt;(2, 2), null);</span><br><span class="line">  System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 21:20:29,110 ==&gt;  Preparing: SELECT id,last_name AS lastName,email,gender,age FROM tbl_employee  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:20:29,181 ==&gt; Parameters:  (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  Employee [id=3, lastName=Black, email=black@tomxwd.top, gender=1, age=30],</span><br><span class="line">  Employee [id=4, lastName=White, email=white@tomxwd.top, gender=0, age=35]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>根据日志信息可知，并没有看到limit子句，说明底层还是用了Mybatis提供的RowBounds分页。<strong>使用的是内存的分页方式。</strong><br><br>如果想要做到真正的物理分页（limit）还是要依赖一些分页插件来做（<strong>PageHelper等</strong>）。</p>
<hr>
<h2 id="deleteById方法（根据id删除）"><a href="#deleteById方法（根据id删除）" class="headerlink" title="deleteById方法（根据id删除）"></a>deleteById方法（根据id删除）</h2><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 根据id删除数据</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testDeleteById() throws Exception &#123;</span><br><span class="line">  Integer result = employeeMapper.deleteById(9);</span><br><span class="line">  System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 21:30:41,429 ==&gt;  Preparing: DELETE FROM tbl_employee WHERE id=?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:30:41,470 ==&gt; Parameters: 9(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:30:41,473 &lt;==    Updates: 1 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="deleteByMap方法（map来封装列名信息）"><a href="#deleteByMap方法（map来封装列名信息）" class="headerlink" title="deleteByMap方法（map来封装列名信息）"></a>deleteByMap方法（map来封装列名信息）</h2><p>map的key是列名，而不是实体类的属性名。<br><br>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 根据columnMap条件删除数据</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testDeleteByMap() throws Exception &#123;</span><br><span class="line">  Map&lt;String, Object&gt; columnMap = new HashMap&lt;String, Object&gt;();</span><br><span class="line">  columnMap.put(&quot;last_name&quot;, &quot;Marry&quot;);</span><br><span class="line">  columnMap.put(&quot;gender&quot;, 0);</span><br><span class="line">  Integer result = employeeMapper.deleteByMap(columnMap);</span><br><span class="line">  System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 21:35:50,642 ==&gt;  Preparing: DELETE FROM tbl_employee WHERE gender = ? AND last_name = ?  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:35:50,674 ==&gt; Parameters: 0(Integer), Marry(String) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:35:50,677 &lt;==    Updates: 3 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<h2 id="deleteBatchIds方法（根据Id批量删除）"><a href="#deleteBatchIds方法（根据Id批量删除）" class="headerlink" title="deleteBatchIds方法（根据Id批量删除）"></a>deleteBatchIds方法（根据Id批量删除）</h2><p>相关代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 根据Id批量删除</span><br><span class="line"> * @throws Exception</span><br><span class="line"> */</span><br><span class="line">@Test</span><br><span class="line">public void testDeleteBatchIds() throws Exception &#123;</span><br><span class="line">  List&lt;Integer&gt; Ids = new ArrayList&lt;Integer&gt;();</span><br><span class="line">  Ids.add(10);</span><br><span class="line">  Ids.add(11);</span><br><span class="line">  Integer result = employeeMapper.deleteBatchIds(Ids);</span><br><span class="line">  System.out.println(result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>日志输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 21:43:24,751 ==&gt;  Preparing: DELETE FROM tbl_employee WHERE id IN ( ? , ? )  (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,838 ==&gt; Parameters: 10(Integer), 11(Integer) (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,840 &lt;==    Updates: 2 (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>控制台输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="MP启动注入SQL原理分析"><a href="#MP启动注入SQL原理分析" class="headerlink" title="MP启动注入SQL原理分析"></a>MP启动注入SQL原理分析</h2><h4 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h4><p>XxxMapper继承了BaseMapper<T>,BaseMapper中提供了通用的CRUD方法，方法来源于BaseMapper，有方法就必须有SQL，因为Mybatis最终还是要通过SQL语句来操作数据。<br><br></p>
<h6 id="前置知识："><a href="#前置知识：" class="headerlink" title="前置知识："></a>前置知识：</h6><p>Mybatis源码中有比较重要的一些对象，Mybatis框架的执行流程。</p>
<ul>
<li>Configuration 全局配置对象</li>
<li>MappedStatement</li>
<li>……</li>
</ul>
<h4 id="通过现象看到本质"><a href="#通过现象看到本质" class="headerlink" title="通过现象看到本质"></a>通过现象看到本质</h4><ol>
<li>employeeMapper的本质：org.apache.ibatis.binding.MapperProxy</li>
<li>MapperProxy中，有一个sqlSession–&gt;SqlSessionFactory。</li>
<li>SqlSessionFactory–&gt;Configuration–&gt;MappedStatements，<strong>（每一个MappedStatement都表示Mapper接口中的一个方法与Mapper映射文件中的一个SQL）</strong>。在这里面–&gt;sqlSource–&gt;sql里面就是要执行的sql语句。<br>
也就是说，MP在启动的时候会挨个分析XxxMapper中的方法，并且将对应的SQL语句处理好，保存到Configuration对象的MappedStatements中。

</li>
</ol>
<h5 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h5><p>对象介绍：</p>
<ol>
<li>sqlMethod:枚举对象，MP支持的SQL方法</li>
<li>TableInfo:数据库表反射信息，可以获取到数据库表相关的信息。</li>
<li>sqlSource:SQL语句处理对象</li>
<li>MapperBuilderAssistant:用于缓存、SQL参数、查询返回结果集处理等。<br><br>通过MapperBuilderAssistant添加到Configrration中的mappedstatements中去。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">DEBUG 06-08 21:43:24,522 Invoking afterPropertiesSet() on bean with name &apos;employeeMapper&apos; (AbstractAutowireCapableBeanFactory.java:1670)</span><br><span class="line">DEBUG 06-08 21:43:24,567 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.deleteById (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,570 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.deleteBatchIds (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,573 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.updateById (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,575 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.updateAllColumnById (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,575 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectById (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,576 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectBatchIds (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,579 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.insert (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,581 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.insertAllColumn (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,584 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.delete (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,586 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.deleteByMap (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,588 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.update (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,590 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.updateForSet (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,592 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectByMap (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,602 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectOne (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,604 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectCount (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,608 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectList (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,610 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectPage (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,612 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectMaps (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,614 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectMapsPage (JakartaCommonsLoggingImpl.java:54)</span><br><span class="line">DEBUG 06-08 21:43:24,616 addMappedStatement: top.tomxwd.mp.mapper.EmployeeMapper.selectObjs (JakartaCommonsLoggingImpl.java:54)</span><br></pre></td></tr></table></figure>
<p>从日志信息中可以看出，在启动的时候，会把每一个方法构建成每个MappedStatement。<br><strong>整个构造流程</strong></p>
<ol>
<li>AutoSqlInjector（SQL自动注入器）</li>
<li>injectDeleteByIdSql方法构建出SqlSource（languageDriver.createSqlSource(configuration,sql,modelClass;)</li>
<li>this.addDeleteMappedStatement(mapperClass,sqlMethod.getMethod(),sqlSource)</li>
<li>builderAssistant.addMappedStatement-&gt;configuration.addMappedStatement(statement);最终注入到configuration中。</li>
</ol>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>以上是基本的CRUD操作，我们仅仅需要继承一个BaseMapper接口，就可以实现大部分的单标CRUD操作。BaseMapper提供了多达17个方法给我们使用，可以很方便的实现单一、批量、分页等操作。极大减少开发负担，难道这就是MP的强大之处吗？</li>
<li>提出需求：<br><br>现在有一个需求，我们需要分页查询Employee表中，年龄在18-50之间性别为难而且姓名为Xx的用户，这时候我们怎么实现上述需求呢？<br>
Mybatis:需要在SQL映射文件中编写带有条件查询的SQL，并且基于PageHelper插件完成分页。
<br>实现上面一个简单的需求，往往需要我们做很多重复单调的工作。普通的Mapper能够解决这类痛点吗？
<br>
MP：依旧不用编写SQL语句，MP提供了功能强大的条件构造器EntityWrapper。
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/08/MyBatis-Plus/02_%E9%9B%86%E6%88%90MP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/08/MyBatis-Plus/02_%E9%9B%86%E6%88%90MP/" class="post-title-link" itemprop="url">02_集成MP</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-08 14:31:08" itemprop="dateCreated datePublished" datetime="2019-06-08T14:31:08+08:00">2019-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:47:40" itemprop="dateModified" datetime="2019-11-16T23:47:40+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis-Plus/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis-Plus</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="02-集成MP"><a href="#02-集成MP" class="headerlink" title="02_集成MP"></a>02_集成MP</h1><hr>
<h2 id="创建测试表"><a href="#创建测试表" class="headerlink" title="创建测试表"></a>创建测试表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">Navicat MySQL Data Transfer</span><br><span class="line"></span><br><span class="line">Source Server         : tom</span><br><span class="line">Source Server Version : 50525</span><br><span class="line">Source Host           : localhost:3306</span><br><span class="line">Source Database       : mp-test</span><br><span class="line"></span><br><span class="line">Target Server Type    : MYSQL</span><br><span class="line">Target Server Version : 50525</span><br><span class="line">File Encoding         : 65001</span><br><span class="line"></span><br><span class="line">Date: 2019-06-08 14:36:59</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS=0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for tbl_employee</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `tbl_employee`;</span><br><span class="line">CREATE TABLE `tbl_employee` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `last_name` varchar(50) DEFAULT NULL,</span><br><span class="line">  `email` varchar(50) DEFAULT NULL,</span><br><span class="line">  `gender` char(1) DEFAULT NULL,</span><br><span class="line">  `age` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of tbl_employee</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `tbl_employee` VALUES (&apos;1&apos;, &apos;Tom&apos;, &apos;tom@tomxwd.top&apos;, &apos;1&apos;, &apos;22&apos;);</span><br><span class="line">INSERT INTO `tbl_employee` VALUES (&apos;2&apos;, &apos;Jerry&apos;, &apos;jerry@tomxwd.top&apos;, &apos;0&apos;, &apos;25&apos;);</span><br><span class="line">INSERT INTO `tbl_employee` VALUES (&apos;3&apos;, &apos;Black&apos;, &apos;black@tomxwd.top&apos;, &apos;1&apos;, &apos;30&apos;);</span><br><span class="line">INSERT INTO `tbl_employee` VALUES (&apos;4&apos;, &apos;White&apos;, &apos;white@tomxwd.top&apos;, &apos;0&apos;, &apos;35&apos;);</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="创建javaBean"><a href="#创建javaBean" class="headerlink" title="创建javaBean"></a>创建javaBean</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">public class Employee &#123;</span><br><span class="line"></span><br><span class="line">	private Integer id;</span><br><span class="line">	private String lastName;</span><br><span class="line">	private String email;</span><br><span class="line">	private Integer gender;</span><br><span class="line">	private Integer age;</span><br><span class="line">	@Override</span><br><span class="line">	public String toString() &#123;</span><br><span class="line">		return &quot;Employee [id=&quot; + id + &quot;, lastName=&quot; + lastName + &quot;, email=&quot; + email + &quot;, gender=&quot; + gender + &quot;, age=&quot;</span><br><span class="line">				+ age + &quot;]&quot;;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getId() &#123;</span><br><span class="line">		return id;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setId(Integer id) &#123;</span><br><span class="line">		this.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getLastName() &#123;</span><br><span class="line">		return lastName;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setLastName(String lastName) &#123;</span><br><span class="line">		this.lastName = lastName;</span><br><span class="line">	&#125;</span><br><span class="line">	public String getEmail() &#123;</span><br><span class="line">		return email;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setEmail(String email) &#123;</span><br><span class="line">		this.email = email;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getGender() &#123;</span><br><span class="line">		return gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setGender(Integer gender) &#123;</span><br><span class="line">		this.gender = gender;</span><br><span class="line">	&#125;</span><br><span class="line">	public Integer getAge() &#123;</span><br><span class="line">		return age;</span><br><span class="line">	&#125;</span><br><span class="line">	public void setAge(Integer age) &#123;</span><br><span class="line">		this.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>需要注意的是，在定义javabean的时候，成员变量使用的类型：建议使用<strong>包装类型</strong>，因为基本类型由默认值。</p>
<ul>
<li>int ==&gt; 0</li>
<li>boolean ==&gt; false</li>
</ul>
<p>如果有默认值，那么就不会有null值出现。</p>
<hr>
<h2 id="依赖配置"><a href="#依赖配置" class="headerlink" title="依赖配置"></a>依赖配置</h2><ol>
<li>在pom.xml文件中加入对MP、Spring、连接池、Junit、Mysql驱动等依赖。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencies&gt;</span><br><span class="line">  &lt;!-- MP --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- Junit --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.9&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- mysql --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.1.37&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- log4j --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.17&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- c3p0连接池 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.mchange&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;c3p0&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.9.5.2&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">  &lt;!-- spring相关 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.3.10.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;4.3.10.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>可以发现没有加入Mybatis以及Mybatis-Spring桥梁包的信息，因为Mybatis-Plus插件会自动维护。</strong><br>2. 搭建Mybatis以及Spring相关的环境<br><br><br>首先创建mybatis-config.xml;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">  PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">  &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<p>由于要迁移到spring中，所以mybatis的配置文件这里是为空的。<br>3. log4j.xml文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;</span><br><span class="line">&lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt;</span><br><span class="line">	&lt;appender name=&quot;STDOUT&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;</span><br><span class="line">		&lt;param name=&quot;Encoding&quot; value=&quot;UTF-8&quot; /&gt;</span><br><span class="line">		&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;</span><br><span class="line">			&lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p %d&#123;MM-dd HH:mm:ss,SSS&#125; %m (%F:%L)\n&quot;/&gt;</span><br><span class="line">		&lt;/layout&gt;</span><br><span class="line">	&lt;/appender&gt;</span><br><span class="line">	&lt;logger name=&quot;java.sql&quot;&gt;</span><br><span class="line">		&lt;level value=&quot;debug&quot; /&gt;</span><br><span class="line">	&lt;/logger&gt;</span><br><span class="line">	&lt;logger name=&quot;org.apache.ibatis&quot;&gt;</span><br><span class="line">		&lt;level value=&quot;info&quot; /&gt;</span><br><span class="line">	&lt;/logger&gt;</span><br><span class="line"></span><br><span class="line">	&lt;root&gt;</span><br><span class="line">		&lt;level value=&quot;debug&quot;/&gt;</span><br><span class="line">		&lt;appender-ref ref=&quot;STDOUT&quot;/&gt;</span><br><span class="line">	&lt;/root&gt;</span><br><span class="line">&lt;/log4j:configuration&gt;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>db.properties文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/mp-test</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=root</span><br></pre></td></tr></table></figure></li>
<li>spring配置文件(applicationContext.xml)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">    xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line">    xmlns:mybatis-spring=&quot;http://mybatis.org/schema/mybatis-spring&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">        http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">        http://www.springframework.org/schema/context</span><br><span class="line">        http://www.springframework.org/schema/context/spring-context-4.0.xsd</span><br><span class="line">        http://www.springframework.org/schema/tx</span><br><span class="line">        http://www.springframework.org/schema/tx/spring-tx-4.0.xsd</span><br><span class="line">        http://mybatis.org/schema/mybatis-spring</span><br><span class="line">        http://mybatis.org/schema/mybatis-spring-1.2.xsd&quot;</span><br><span class="line">        &gt;</span><br><span class="line">    &lt;!-- 数据源 --&gt;</span><br><span class="line">    &lt;context:property-placeholder location=&quot;classpath:db.properties&quot;/&gt;</span><br><span class="line">    &lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class="line">    	&lt;property name=&quot;driverClass&quot; value=&quot;$&#123;jdbc.driver&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    	&lt;property name=&quot;jdbcUrl&quot; value=&quot;$&#123;jdbc.url&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    	&lt;property name=&quot;user&quot; value=&quot;$&#123;jdbc.username&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    	&lt;property name=&quot;password&quot; value=&quot;$&#123;jdbc.password&#125;&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 事务管理器 --&gt;</span><br><span class="line">    &lt;bean id=&quot;dataSourceTransactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class="line">    	&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 基于注解的事务管理 --&gt;</span><br><span class="line">    &lt;tx:annotation-driven transaction-manager=&quot;dataSourceTransactionManager&quot;/&gt;</span><br><span class="line">    &lt;!-- 配置SqlSessionFactoryBean --&gt;</span><br><span class="line">    &lt;bean id=&quot;sqlSessionFactoryBean&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;</span><br><span class="line">    	&lt;!-- 数据源 --&gt;</span><br><span class="line">    	&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">    	&lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;&gt;&lt;/property&gt;</span><br><span class="line">    	&lt;!-- 别名处理 --&gt;</span><br><span class="line">    	&lt;property name=&quot;typeAliasesPackage&quot; value=&quot;top.tomxwd.mp.beans&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 配置mybatis 扫描mapper接口的路径 --&gt;</span><br><span class="line">    &lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;</span><br><span class="line">    	&lt;property name=&quot;basePackage&quot; value=&quot;top.tomxwd.mp.mapper&quot;&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<hr>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class TestMP &#123;</span><br><span class="line"></span><br><span class="line">	private ApplicationContext ioc = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><br><span class="line"></span><br><span class="line">	@Test</span><br><span class="line">	public void testDataSource() throws SQLException &#123;</span><br><span class="line">		DataSource ds = ioc.getBean(&quot;dataSource&quot;,DataSource.class);</span><br><span class="line">		System.out.println(ds);</span><br><span class="line">		Connection conn = ds.getConnection();</span><br><span class="line">		System.out.println(conn);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试是否能够拿到DataSource，如果能够get到Connection，则说明成功。</p>
<hr>
<h2 id="集成MP"><a href="#集成MP" class="headerlink" title="集成MP"></a>集成MP</h2><p>Mybatis-Plus的集成非常简单，对于Spring，我们仅仅需要把Mybatis自带的MybatisSqlSessionFactoryBean替换为MP自带的即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置MybatisSqlSessionFactoryBean --&gt;</span><br><span class="line">&lt;bean id=&quot;sqlSessionFactoryBean&quot; class=&quot;com.baomidou.mybatisplus.spring.MybatisSqlSessionFactoryBean&quot;&gt;</span><br><span class="line">  &lt;!-- 数据源 --&gt;</span><br><span class="line">  &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis-config.xml&quot;&gt;&lt;/property&gt;</span><br><span class="line">  &lt;!-- 别名处理 --&gt;</span><br><span class="line">  &lt;property name=&quot;typeAliasesPackage&quot; value=&quot;top.tomxwd.mp.beans&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/08/MyBatis-Plus/01_MyBatis-Plus_%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/08/MyBatis-Plus/01_MyBatis-Plus_%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">01_MyBatis-Plus_简介</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-08 13:58:44" itemprop="dateCreated datePublished" datetime="2019-06-08T13:58:44+08:00">2019-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:49:24" itemprop="dateModified" datetime="2019-11-16T23:49:24+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Mybatis-Plus/" itemprop="url" rel="index">
                    <span itemprop="name">Mybatis-Plus</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="01-MyBatis-Plus-简介"><a href="#01-MyBatis-Plus-简介" class="headerlink" title="01_MyBatis-Plus_简介"></a>01_MyBatis-Plus_简介</h1><blockquote>
<p><a href="https://www.bilibili.com/video/av27212529/?p=90" target="_blank" rel="noopener">学习地址</a></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/Mybatis-Plus/relationship-with-mybatis.png" alt="Mybatis-Plus"></p>
<hr>
<h2 id="Mybatis-Plus介绍"><a href="#Mybatis-Plus介绍" class="headerlink" title="Mybatis-Plus介绍"></a>Mybatis-Plus介绍</h2><p>Mybatis-Plus(简称MP)，是一个Mybatis的增强工具包，<strong>只做增强，不做改变</strong>。是为了简化开发工作、提高生产效率而产生的。<br><br>愿景是：成为Mybatis的最好搭档，就像魂斗罗里的1P、2P。基友搭配，效率翻倍。</p>
<hr>
<h2 id="代码以及文档发布地址"><a href="#代码以及文档发布地址" class="headerlink" title="代码以及文档发布地址"></a>代码以及文档发布地址</h2><p>官方地址：<a href="http://mp.baomidou.com" target="_blank" rel="noopener">http://mp.baomidou.com</a><br><br><br>代码发布地址：</p>
<ol>
<li>Github：<a href="https://github.com/baomidou/mybatis-plus" target="_blank" rel="noopener">https://github.com/baomidou/mybatis-plus</a></li>
<li>Gitee: <a href="https://gitee.com/baomidou/mybatis-plus" target="_blank" rel="noopener">https://gitee.com/baomidou/mybatis-plus</a><br>

</li>
</ol>
<p>文档发布地址：<a href="https://mp.baomidou.com/guide/" target="_blank" rel="noopener">https://mp.baomidou.com/guide/</a></p>
<hr>
<h2 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h2><ol>
<li>Mybatis</li>
<li>Spring</li>
<li>Maven</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/07/MAVEN/05_Maven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/07/MAVEN/05_Maven/" class="post-title-link" itemprop="url">MAVEN的好处</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-07 22:27:02" itemprop="dateCreated datePublished" datetime="2019-06-07T22:27:02+08:00">2019-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:52:36" itemprop="dateModified" datetime="2019-11-16T23:52:36+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index">
                    <span itemprop="name">Java环境</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/Maven/" itemprop="url" rel="index">
                    <span itemprop="name">Maven</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MAVEN的好处"><a href="#MAVEN的好处" class="headerlink" title="MAVEN的好处"></a>MAVEN的好处</h1><hr>
<ol>
<li>不再拷贝jar包，项目不需要存放jar包，导致项目源代码小了。</li>
<li>使用maven开发的工程，如果环境统一，导入别的maven项目不会报错。</li>
<li>代码耦合度进一步降低。</li>
<li>方便项目进行升级。</li>
<li>节省人力成本。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/07/MAVEN/04_Maven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/07/MAVEN/04_Maven/" class="post-title-link" itemprop="url">MAVEN私服</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-07 21:43:20" itemprop="dateCreated datePublished" datetime="2019-06-07T21:43:20+08:00">2019-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:52:32" itemprop="dateModified" datetime="2019-11-16T23:52:32+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index">
                    <span itemprop="name">Java环境</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/Maven/" itemprop="url" rel="index">
                    <span itemprop="name">Maven</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MAVEN私服"><a href="#MAVEN私服" class="headerlink" title="MAVEN私服"></a>MAVEN私服</h1><hr>
<h2 id="私服安装"><a href="#私服安装" class="headerlink" title="私服安装"></a>私服安装</h2><ol>
<li>下载安装包（<strong>nexus-2.12.0-01-bundle.zip</strong>）。</li>
<li>解压到本地磁盘。</li>
<li>使用管理员权限打开dos，在dos下执行命令安装私服服务器。<ul>
<li><code>nexus install</code>命令</li>
</ul>
</li>
<li>启动服务<ul>
<li><code>nexus start</code>命令</li>
</ul>
</li>
<li>找到私服访问的url<ul>
<li>在conf文件夹中找到nexus.properties文件，看<code>application-port</code>等属性。</li>
<li>默认：<a href="http://localhost:8081/nexus/#welcome" target="_blank" rel="noopener">http://localhost:8081/nexus/#welcome</a></li>
<li>登录：admin/admin123</li>
</ul>
</li>
</ol>
<hr>
<h2 id="私服仓库类型"><a href="#私服仓库类型" class="headerlink" title="私服仓库类型"></a>私服仓库类型</h2><table>
<thead>
<tr>
<th align="center">Repository</th>
<th align="center">Type</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong><em>Public Repositories</em></strong></td>
<td align="center">group</td>
</tr>
<tr>
<td align="center">3rd pary</td>
<td align="center">hosted</td>
</tr>
<tr>
<td align="center">Releases</td>
<td align="center">hosted</td>
</tr>
<tr>
<td align="center">Snapshots</td>
<td align="center">hosted</td>
</tr>
<tr>
<td align="center">Apache Snapshots</td>
<td align="center">proxy</td>
</tr>
<tr>
<td align="center">Central</td>
<td align="center">proxy</td>
</tr>
<tr>
<td align="center">Central M1 shadow</td>
<td align="center">virtual</td>
</tr>
<tr>
<td align="center">1. Hosted：宿主仓库</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">- 存放本公司开发的jar包（正式版本、测试版本、第三方：存在版权问题———Oracle）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2. Proxy：代理仓库</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">- 代理中央仓库、Apache下测试版本的jar包。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3. Group：组仓库</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">- 包含Hosted宿主仓库和Proxy代理仓库。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">- <strong>将来连接组仓库即可</strong>。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">—</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">## 上传jar包到私服上（应用）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">1. 在Maven目录下conf/setting.xml<br>配置认证：配置用户名和密码。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">宿主仓库</span><br><span class="line">&lt;servers&gt;</span><br><span class="line">  &lt;server&gt;</span><br><span class="line">    &lt;id&gt;releases&lt;/id&gt;</span><br><span class="line">    &lt;username&gt;admin123&lt;/username&gt;</span><br><span class="line">    &lt;password&gt;amdin123&lt;/password&gt;</span><br><span class="line">  &lt;/server&gt;</span><br><span class="line">  &lt;server&gt;</span><br><span class="line">    &lt;id&gt;snapshots&lt;/id&gt;</span><br><span class="line">    &lt;username&gt;admin123&lt;/username&gt;</span><br><span class="line">    &lt;password&gt;amdin123&lt;/password&gt;</span><br><span class="line">  &lt;/server&gt;</span><br><span class="line">&lt;/servers&gt;</span><br></pre></td></tr></table></figure></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2. 在将要上传的项目的pom.xml中配置jar包上传路径url</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;distributionManagement&gt;</span><br><span class="line">  &lt;repository&gt;</span><br><span class="line">    &lt;id&gt;releases&lt;/id&gt;</span><br><span class="line">    &lt;url&gt;http://localhost:8081/nexus/content/repositories/releases/&lt;/url&gt;</span><br><span class="line">  &lt;/repository&gt;</span><br><span class="line">  &lt;snapshotRepository&gt;</span><br><span class="line">    &lt;id&gt;snapshots&lt;/id&gt;</span><br><span class="line">    &lt;url&gt;http://localhost:8081/nexus/content/repositories/snapshots/&lt;/url&gt;</span><br><span class="line">  &lt;/snapshotRepository&gt;</span><br><span class="line">&lt;/distributionManagement&gt;</span><br></pre></td></tr></table></figure></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3. 执行命令发布项目到私服（上传）<br></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">maven项目右键RunAs-&gt;bulid的时候用<code>deploy</code>指令</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">4. 下载jar包到本地仓库（应用）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">- 在Maven目录下的conf/settings.xml中配置模板</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;profile&gt;</span><br><span class="line">  &lt;!-- profile的id --&gt;</span><br><span class="line">  &lt;id&gt;dev&lt;/id&gt;</span><br><span class="line">  &lt;repositories&gt;</span><br><span class="line">    &lt;!-- 仓库id，repositories可以配置多个仓库，保证id不重复即可 --&gt;</span><br><span class="line">    &lt;id&gt;nexus&lt;/id&gt;</span><br><span class="line">    &lt;!-- 仓库地址，即nexus仓库组的地址 --&gt;</span><br><span class="line">    &lt;url&gt;http://localhost:8081/nexus/content/groups/public/&lt;/url&gt;</span><br><span class="line">    &lt;!-- 是否下载releases构件 --&gt;</span><br><span class="line">    &lt;releases&gt;</span><br><span class="line">      &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">    &lt;/releases&gt;</span><br><span class="line">    &lt;!-- 是否下载snapshots构件 --&gt;</span><br><span class="line">    &lt;snapshots&gt;</span><br><span class="line">      &lt;enabled&gt;true&lt;/enabled&gt;</span><br><span class="line">    &lt;/snapshots&gt;</span><br><span class="line">  &lt;/repositories&gt;</span><br><span class="line">  &lt;!-- 插件仓库，maven的运行依赖插件，也需要从私服下载插件 --&gt;</span><br><span class="line">  &lt;pluginRepository&gt;</span><br><span class="line">    &lt;!-- 插件仓库的id不允许重复，如果重复后边配置会覆盖前边 --&gt;</span><br><span class="line">    &lt;id&gt;public&lt;/id&gt;</span><br><span class="line">    &lt;name&gt;Public Repositories&lt;/name&gt;</span><br><span class="line">    &lt;url&gt;http://localhost:8081/nexus/content/groups/public/&lt;url&gt;</span><br><span class="line">  &lt;/pluginRepository&gt;</span><br><span class="line">&lt;/profile&gt;</span><br></pre></td></tr></table></figure></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">将来下载jar包可能是下载本公司开发的，也有可能是下载第三方的（中央仓库）。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">- 激活模板</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;activeProfiles&gt;</span><br><span class="line">  &lt;activeProfile&gt;dev&lt;/activeProfile&gt;</span><br><span class="line">&lt;/activeProfiles</span><br></pre></td></tr></table></figure></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">—</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">## 总结</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">1. 使用maven整合ssh框架（掌握）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">2. 拆分maven工程（重点）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">- 将每一层代码和配置文件全部提取到一个独立的工程</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">3. 私服（了解）</td>
<td align="center"></td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/07/MAVEN/03_Maven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/07/MAVEN/03_Maven/" class="post-title-link" itemprop="url">MAVEN3</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-07 20:35:02" itemprop="dateCreated datePublished" datetime="2019-06-07T20:35:02+08:00">2019-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:52:27" itemprop="dateModified" datetime="2019-11-16T23:52:27+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index">
                    <span itemprop="name">Java环境</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/Maven/" itemprop="url" rel="index">
                    <span itemprop="name">Maven</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MAVEN3"><a href="#MAVEN3" class="headerlink" title="MAVEN3"></a>MAVEN3</h1><hr>
<h2 id="通过maven对项目进行拆分、聚合（重点）"><a href="#通过maven对项目进行拆分、聚合（重点）" class="headerlink" title="通过maven对项目进行拆分、聚合（重点）"></a>通过maven对项目进行拆分、聚合（<strong>重点</strong>）</h2><p>对已有的maven SHH项目进行拆分。<br><br>拆分思路：</p>
<ul>
<li>将dao层的代码以及配置文件全体提取出来到一个表现上独立的工程中。</li>
<li>同样service、action拆分</li>
</ul>
<p>拆分完成对拆分后的项目进行聚合，提出概念–父工程。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SSH-parent</span><br><span class="line">  SSH-dao</span><br><span class="line">  SSH-service</span><br><span class="line">  SSH-web</span><br></pre></td></tr></table></figure>
<ol>
<li>创建父工程需要选择创建maven工程。<strong>packaging选择pom</strong>。<ul>
<li>创建好的父工程只有一个pom.xml文件，不负责编码。作用：<ol>
<li>项目需要的依赖信息，在父工程中定义，子模块不需要定义，直接进行继承。</li>
<li>将各个模块聚合到一起。</li>
</ol>
</li>
<li><strong>将创建好的父工程发布到本地仓库！</strong></li>
</ul>
</li>
<li>创建dao项目<ul>
<li>需要在父工程下右键，否则需要输入父工程的项目坐标。建立Maven-Module工程。</li>
<li>打包方式选择jar形式。</li>
<li>创建好的dao项目，包含dao相关的代码、配置文件。</li>
</ul>
</li>
<li>创建service工程<ul>
<li>同样需要创建Maven-Module工程，jar形式。</li>
<li>把service相关的配置文件以及代码也迁移到service工程中。</li>
<li>由于需要到dao项目，所以要在<strong>pom.xml中添加dao作为依赖</strong>，否则会报错。</li>
</ul>
</li>
<li>创建web工程<ul>
<li>同样需要创建Maven-Module工程，但是需要打成war形式。</li>
<li>同样需要把action相关的配置文件以及代码迁移到web工程中。</li>
<li>由于需要调用多啊service项目，所以需要在<strong>pom.xml中添加service作为依赖</strong>，否则会报错。为什么没有引入dao？因为service已经引入了dao，所以不需要再引入。</li>
</ul>
</li>
<li>单元测试<ul>
<li>批量加载spring配置文件<ol>
<li>classpath:spring/applicationContext-*.xml</li>
<li>classpath<em>:spring/applicationContext-</em>.xml:既要加载本项目中的配置文件，也要加载jar包中的配置文件。</li>
</ol>
</li>
<li>传递依赖的范围<br><br><img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/blog/Maven/03maven%E7%9A%84%E4%BC%A0%E9%80%92%E4%BE%9D%E8%B5%96%E8%8C%83%E5%9B%B4.png" alt="maven的传递依赖范围"><br>直接依赖：A跟B的范围<br><br>传递依赖：B跟C的范围<br><br>中间部分：A跟C的范围<br><br>例如：A：SSH-service工程  B：SSH-dao工程 C:Junit单元测试</li>
<li>总结：<br><br>当项目中需要某一个依赖没有传递过来的时候，在自己的工程中添加对应的依赖即可。</li>
</ul>
</li>
<li>运行方式<br><ul>
<li>Maven方式：<ul>
<li>方式1：运行父工程。<br>父工程将各个子模块聚合在一起。将ssh-web打war包发布到tomcat。</li>
<li>方式2：直接运行web工程。</li>
</ul>
</li>
<li>其他方式：<ul>
<li>部署到tomcat中。</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.blog.tomxwd.com/2019/06/07/MAVEN/02_Maven/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="tomxwd">
      <meta itemprop="description" content="tomxwd">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tomxwd.blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2019/06/07/MAVEN/02_Maven/" class="post-title-link" itemprop="url">MAVEN实战</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-06-07 18:00:28" itemprop="dateCreated datePublished" datetime="2019-06-07T18:00:28+08:00">2019-06-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-16 23:52:20" itemprop="dateModified" datetime="2019-11-16T23:52:20+08:00">2019-11-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/" itemprop="url" rel="index">
                    <span itemprop="name">Java环境</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E7%8E%AF%E5%A2%83/Maven/" itemprop="url" rel="index">
                    <span itemprop="name">Maven</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="MAVEN实战"><a href="#MAVEN实战" class="headerlink" title="MAVEN实战"></a>MAVEN实战</h1><blockquote>
<p>1.传递依赖冲突解决（了解）<br>2.通过maven整合框架（重点）<br>3.通过maven项目进行拆分、聚合（重点）<br>4.私服应用（了解）</p>
</blockquote>
<hr>
<h2 id="传递依赖冲突解决"><a href="#传递依赖冲突解决" class="headerlink" title="传递依赖冲突解决"></a>传递依赖冲突解决</h2><p>传递依赖：</p>
<ol>
<li>A（项目）依赖B，B依赖C<strong>（1.1版本）</strong>，B是A的直接依赖，C就是A的传递依赖。</li>
<li>导入依赖D，D依赖C<strong>（1.2版本）</strong>。</li>
</ol>
<p>那么如何解决上述问题？</p>
<ol>
<li>Maven自己调解原则<ul>
<li><strong>第一声明者优先原则</strong><ul>
<li>即是使用先定义的，比如上述问题中，如果在pom文件中先声明了依赖B，再声明依赖D，则C的版本使用的是B依赖的C版本，是1.1版本。</li>
</ul>
</li>
<li><strong>路径近者优先原则</strong><ul>
<li>直接依赖&gt;间接依赖，就是在pom文件中直接指定版本。</li>
</ul>
</li>
</ul>
</li>
<li>排除依赖<ul>
<li><strong>在管理依赖的界面右键排除</strong></li>
<li><strong>在pom.xml文件的<code>&lt;dependency&gt;</code>标签中加入<code>&lt;exclusions&gt;</code>标签来声明排除的依赖</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;struts2-spring-plugin&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.3.24&lt;/version&gt;</span><br><span class="line">  &lt;exclusions&gt;</span><br><span class="line">    &lt;exclusion&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframeworks&lt;/groupId&gt;</span><br><span class="line">    &lt;/exclusion&gt;</span><br><span class="line">  &lt;/exclusions&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>版本锁定(<strong>推荐使用</strong>)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;artifactId&gt;org.springframeworks&lt;/artifactId&gt;</span><br><span class="line">      &lt;groupId&gt;spring-beans&lt;/groupId&gt;</span><br><span class="line">      &lt;version&gt;4.2.4&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">  &lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br></pre></td></tr></table></figure>
需要注意的是<code>&lt;dependencyManagement&gt;</code>并不会导入依赖，只是管理依赖版本，锁定版本。</li>
<li>版本信息管理，用<code>&lt;properties&gt;</code>标签<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 属性 --&gt;</span><br><span class="line">&lt;properties&gt;</span><br><span class="line">  &lt;a-version&gt;1.2.2&lt;/a-version&gt;</span><br><span class="line">  &lt;spring-version&gt;4.2.4.RELEASE&lt;/spring-version&gt;</span><br><span class="line">&lt;properties&gt;</span><br></pre></td></tr></table></figure>
在需要版本号的时候用${a-version}来引用(OGNL表达式)。如果下次要改版本，则直接改属性值即可。</li>
</ol>
<hr>
<h2 id="ssh配置文件加载顺序"><a href="#ssh配置文件加载顺序" class="headerlink" title="ssh配置文件加载顺序"></a>ssh配置文件加载顺序</h2><ol>
<li>首先部署到tomcat，那么tomcat启用的时候需要什么配置文件？（<strong>web.xml</strong>）。</li>
<li>web.xml中会有监听器的信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br></pre></td></tr></table></figure>
用于监听servletContext对象，web项目中最大的一个对象，这个对象创建了之后，认为项目启动了，项目启动了就要去加载spring的配置文件，而spring的配置是要让对象底层用反射来构建的，所以耗时大，因此要让他在项目启动的时候就去完成对象的反射构建<strong>applicationContext.xml</strong>。<ul>
<li>加载属性文件.properties文件</li>
<li>配置DataSource数据源</li>
<li>配置sessionFactory对象：LocalSessionFactoryBean<ul>
<li>内部注入数据源：注入Hibernate核心配置文件:hibernate.cfg.xml<ul>
<li>引用映射文件</li>
</ul>
</li>
</ul>
</li>
<li>配置事务管理：xml/注解方式</li>
<li>dao对象</li>
<li>service对象</li>
<li>action对象（多例）多例的不会创建，在使用的时候才会创建</li>
</ul>
</li>
<li>web.xml中的过滤器信息<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;fiter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/fiter-class&gt;</span><br></pre></td></tr></table></figure>
用于处理用户的请求，加载struts.xml配置文件。</li>
</ol>
<hr>
<h2 id="通过maven整合SSH框架（重点）"><a href="#通过maven整合SSH框架（重点）" class="headerlink" title="通过maven整合SSH框架（重点）"></a>通过maven整合SSH框架（重点）</h2><ol>
<li><p>搭建struts2环境</p>
<ul>
<li>创建strut2配置文件：struts.xml</li>
<li>在web.xml中配置struts2的核心过滤器</li>
</ul>
</li>
<li><p>搭建spring环境</p>
<ul>
<li>创建spring配置文件applicationContext.xml</li>
<li>在web.xml中配置监听器：ContextLoaderListener<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置监听器：默认加载WEB-INF/applicationContext.xml文件 --&gt;</span><br><span class="line">&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class="line">&lt;!-- 通过上下文参数指定spring配置文件路径 --&gt;</span><br><span class="line">&lt;context-param&gt;</span><br><span class="line">  &lt;param-name&gt;contextConfigLocation&lt;param-name&gt;</span><br><span class="line">  &lt;param-value&gt;classpath:applicationContext.xml&lt;param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>搭建hibernate环境</p>
<ul>
<li>hibernate.cfg.xml</li>
</ul>
</li>
<li><p>Struts2跟Spring整合</p>
<ul>
<li>整合关键点：action对象的创建，交给spring创建<ol>
<li>创建action类</li>
<li>将action对象配置到spring配置文件中</li>
<li>在struts.xml中，在action节点中class属性配置为spring工厂中action对象的bean id。</li>
</ol>
</li>
</ul>
</li>
<li><p>Spring跟Hibernate框架整合</p>
<ul>
<li>整合关键点：<ol>
<li>数据源DataSource交给Spring管理。</li>
<li>SessionFactory对象的创建交给Spring创建。</li>
<li>事务管理<ul>
<li>配置事务管理器：PlatFormTransactionManager接口。<ol>
<li>jdbc：DataSourceTransactionManager</li>
<li>Hibernate:HibernateTransactionManager</li>
</ol>
</li>
<li>xml方式管理事务<ol>
<li>配置通知：具体增强逻辑<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;tx:advice id=&quot;txAdvice&quot;&gt;</span><br><span class="line">  &lt;tx:attributes&gt;</span><br><span class="line">    &lt;!-- 匹配业务类中方法名称 --&gt;</span><br><span class="line">    &lt;tx:method name=&quot;save*&quot; /&gt;</span><br><span class="line">    &lt;tx:method name=&quot;update*&quot; /&gt;</span><br><span class="line">    &lt;tx:method name=&quot;delete*&quot; /&gt;</span><br><span class="line">    &lt;tx:method name=&quot;find*&quot; read-only=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;tx:method name=&quot;*&quot; /&gt;</span><br><span class="line">  &lt;/tx:attributes&gt;</span><br><span class="line">&lt;/tx:advice&gt;</span><br></pre></td></tr></table></figure></li>
<li>配置aop<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;aop:config&gt;</span><br><span class="line">  &lt;!-- 配置切点:具体哪些方法需要增强 --&gt;</span><br><span class="line">  &lt;aop:pointcut expression=&quot;execution(* top.tomxwd.service.*.*(..))&quot; id=&quot;cut&quot;/&gt;</span><br><span class="line">  &lt;!-- 配置切面：将增强逻辑作用到切点上 （通知+切入点） --&gt;</span><br><span class="line">  &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;cut&quot; /&gt;</span><br><span class="line">&lt;/aop:config&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>注解方式管理事务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 1、开启注解驱动 --&gt;</span><br><span class="line">&lt;tx:annotation-driven transaction-manager=&quot;transationManager&quot; /&gt;</span><br><span class="line">&lt;!-- 2、在service类上或者方法上使用注解@Transactional--&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>需求</p>
<ul>
<li>在地址栏中输入action请求，action-service-dao。完成客户查询。</li>
</ul>
</li>
<li><p>具体实现</p>
<ul>
<li>创建客户实体类、映射文件、将映射文件引入Hibernate核心配置文件中。</li>
<li>创建action、service、dao。完成注入。<ul>
<li>在类中添加属性生成set方法。</li>
<li>在spring配置文件中完成注入。（也可以用注解形式）</li>
</ul>
</li>
<li>在struts.xml中配置action。</li>
<li></li>
</ul>
</li>
</ol>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>页面提交参数，在服务端接收参数。</li>
<li>调用业务层方法-&gt;dao的方法-&gt;DB。</li>
<li>将返回的数据存值栈。</li>
<li>配置结果视图，挑转页面。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/33/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><span class="page-number current">34</span><a class="page-number" href="/page/35/">35</a><a class="extend next" rel="next" href="/page/35/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="tomxwd"
      src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/blog_headImg/%E9%B1%BC%E4%BA%BA%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">tomxwd</p>
  <div class="site-description" itemprop="description">tomxwd</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">342</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/tomxwd" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tomxwd" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://www.beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备18158552号-1 </a>
      <img src="https://raw.githubusercontent.com/tomxwd/ImageHosting/master/resource/ico/%E5%A4%87%E6%A1%88%E5%9B%BE%E6%A0%87.png" style="display: inline-block;"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=18158552" rel="noopener" target="_blank">1213123 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-bug"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tomxwd</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.0.0
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
